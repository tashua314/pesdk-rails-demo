!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("photoeditorsdk/js/PhotoEditorSDK"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["photoeditorsdk","react","react-dom"],e):"object"==typeof exports?exports.PhotoEditorDesktopUI=e(require("photoeditorsdk/js/PhotoEditorSDK"),require("react"),require("react-dom")):t.PhotoEditorDesktopUI=e(t.PhotoEditorSDK,t.React,t.ReactDOM)}("undefined"!=typeof self?self:this,function(t,e,n){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=57)}([function(t,e,n){"use strict";(function(t){n.d(e,"j",function(){return T}),n.d(e,"v",function(){return D}),n.d(e,"q",function(){return x}),n.d(e,"e",function(){return O}),n.d(e,"c",function(){return S}),n.d(e,"a",function(){return C}),n.d(e,"o",function(){return R}),n.d(e,"i",function(){return E}),n.d(e,"p",function(){return j}),n.d(e,"y",function(){return B}),n.d(e,"f",function(){return P}),n.d(e,"n",function(){return I}),n.d(e,"w",function(){return k});var o=n(2),i=n.n(o),r=n(7),s=n.n(r),a=n(59),l=n.n(a),c=n(9),u=n.n(c),p=n(29),h=n(65),f=n.n(h),d=n(30),m=n(66),_=n(78),g=n(83),y=n(3),v=n(16),b=n(6),w=n(31);n.d(e,"u",function(){return m.a}),n.d(e,"l",function(){return s.a}),n.d(e,"b",function(){return d.a}),n.d(e,"d",function(){return _.a}),n.d(e,"s",function(){return g.a}),n.d(e,"m",function(){return l.a}),n.d(e,"z",function(){return y.b}),n.d(e,"x",function(){return y.a}),n.d(e,"h",function(){return v.a}),n.o(h,"withTheme")&&n.d(e,"A",function(){return h.withTheme}),n.o(h,"ThemeProvider")&&n.d(e,"t",function(){return h.ThemeProvider}),n.d(e,"g",function(){return b.a}),n.d(e,"k",function(){return u.a}),n.d(e,"r",function(){return w.a});var k=new f.a(t.adonisOptions||{injection:!1,theme:p.a,minified:!0,cssSelectorPrefix:".pesdk-desktop-editor ",classNamePrefix:"pesdk-",hashedStyles:!0}),C=i.a.Base64,S=i.a.Color,O=(i.a.Math.ColorMatrix,i.a.EventEmitter),E=(i.a.EXIF,i.a.OptionType),T=i.a.Promise,x=i.a.Utils,R=i.a.RenderType,P=i.a.ImageFormat,j=i.a,D=(i.a.UniformType,i.a.Math.Vector2),I=i.a.Math.Rectangle,B="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(32)}).call(e,n(5))},function(t,e,n){/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
t.exports=n(58).default},function(e,n){e.exports=t},function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});for(var o="undefined"==typeof window?t:window,i=o.requestAnimationFrame,r=o.cancelAnimationFrame,s=0,a=["ms","moz","webkit","o"],l=0;l<a.length&&!i;++l)i=o[a[l]+"RequestAnimationFrame"],r=o[a[l]+"CancelAnimationFrame"]||o[a[l]+"CancelRequestAnimationFrame"];i&&(i=i.bind(o)),r&&(r=r.bind(o)),i||(i=function(t,e){var n=(new Date).getTime(),o=Math.max(0,16-(n-s)),i=setTimeout(function(){t(n+o)},o);return s=n+o,i}),r||(r=function(t){clearTimeout(t)})}).call(e,n(5))},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onDragStart","_onDragMove","_onDragEnd"),a}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.refs.element&&(this._element=this.refs.element)},e.prototype._onDragStart=function(t){if(!this.props.disabled){t.preventDefault(),t.stopPropagation(),this._initialMousePosition=s.u.getEventPosition(t),document.addEventListener("mousemove",this._onDragMove),document.addEventListener("touchmove",this._onDragMove),document.addEventListener("mouseup",this._onDragEnd),document.addEventListener("touchend",this._onDragEnd);var e=this._element.getBoundingClientRect(),n=new s.v(e.left,e.top);this._lastMousePosition=this._initialMousePosition.clone();var o=this._initialMousePosition.clone().subtract(n);this.props.onStart&&this.props.onStart(o,this._initialMousePosition.clone(),t)}},e.prototype._onDragMove=function(t){t.preventDefault(),t.stopPropagation();var e=s.u.getEventPosition(t);if(e){var n=e.clone().subtract(this._initialMousePosition),o=e.clone().subtract(this._lastMousePosition);this._lastMousePosition=e.clone(),this.props.onDrag&&this.props.onDrag(n,e,o,t)}},e.prototype._onDragEnd=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this._onDragMove(t),document.removeEventListener("mousemove",this._onDragMove),document.removeEventListener("touchmove",this._onDragMove),document.removeEventListener("mouseup",this._onDragEnd),document.removeEventListener("touchend",this._onDragEnd),this.props.onStop&&this.props.onStop(t)},e.prototype.render=function(){var t=this;if(!this.props.children||this.props.children instanceof Array)throw new Error("DraggableComponent expects exactly one child.");var e={onMouseDown:this._onDragStart,onTouchStart:this._onDragStart,onClick:function(e){if(t.props.disabled){var n=t.props.children.props.onClick;return void(n&&n(e))}e.stopPropagation()}};if("string"==typeof this.props.children.type)e.ref="element";else{var n=this.props.children.props.innerRef;e.innerRef=function(e){t._element=e,n&&n(e)}}return s.l.cloneElement(this.props.children,e)},e}(s.b);a.contextTypes=s.b.contextTypes,a.propTypes={onStart:s.k.func,onDrag:s.k.func,onStop:s.k.func,disabled:s.k.bool},e.a=a},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var o=function(){function t(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.a={load:function(t){var e=this;return function(){if(t.substr(0,5),!0)return Promise.resolve([t,t])}().then(function(t){var n=o(t,2),i=n[0],r=n[1];return e._createAndLoadImage(i,r)})},_createAndLoadImage:function(t,e){return new Promise(function(t,n){var o=new window.Image;o.addEventListener("load",function(){t(o)}),o.addEventListener("error",function(){n(new Error("Failed to load image at "+e))}),o.crossOrigin="Anonymous",o.src=e})},loadXHR:function(t,e){return new Promise(function(n,o){var i=void 0;window.XDomainRequest?(i=new window.XDomainRequest,e&&i.overrideMimeType(e),i.onload=function(){n(i)},i.onerror=function(t){o(t)}):window.XMLHttpRequest&&(i=new window.XMLHttpRequest,e&&i.overrideMimeType(e),i.onreadystatechange=function(t){4===i.readyState&&(200===i.status?n(i):o(new Error("HTTP Status "+i.status)))}),i.open("GET",t,!0),i.send()})}}},function(t,n){t.exports=e},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(t){function e(n,r,a){var l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o(this,e);var c=i(this,t.call(this));return c.id=s.q.getUUID(),c.type=n,c.title=r,c.text=a,c.overlay=l,c.visible=!0,c.data=null,c}return r(e,t),e.prototype.setData=function(t){this.data=t,this.emit("update")},e.prototype.close=function(){this.visible=!1,this.emit("close")},e.prototype.remove=function(){this.emit("remove")},e}(s.e),c=function(t){function e(){o(this,e);var n=i(this,t.call(this));return n._modals=[],n}return r(e,t),e.prototype.displayLoading=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new l("loading",t,null,e);return this.addModal(n),n},e.prototype.displayProgress=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new l("progress",null,t);return n.setData({progress:e}),this.addModal(n),n},e.prototype.displayWarning=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["OK"],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new l("warning",t,e,o);return i.setData({buttons:n}),this.addModal(i),i},e.prototype.displayError=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=new l("error",t,e,n);return this.addModal(o),o},e.prototype.addModal=function(t){var e=this;this._modals.push(t),t.on("close",function(){e.emit("update")}),t.on("remove",function(){e.removeModal(t)}),t.on("update",function(){e.emit("update")}),this.emit("update")},e.prototype.removeModal=function(t){var e=this._modals.indexOf(t);this._modals.splice(e,1),this.emit("update")},e.prototype.getModals=function(){return this._modals},a(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(s.e);e.a=c},function(t,e,n){t.exports=n(60)()},function(t,e,n){"use strict";(function(t){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(68),r=n(71),s=n.n(r),a="undefined"!=typeof window?window:t,l=function(){function t(e){o(this,t),this._url=e,this._parsedUrl=s.a.parse(this._url,!0)}return t.prototype._isJSONPRequest=function(){var t=this._parsedUrl.query;for(var e in t){if("?"===t[e])return!0}return!1},t.prototype.load=function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()},t.prototype._loadJSON=function(){var t=this;return new i.a(function(e,n){var o=void 0;a.XDomainRequest?(o=new a.XDomainRequest,o.onload=function(){var t=JSON.parse(o.responseText);e(t)},o.onerror=function(t){n(t)},o.open("GET",t._url,!0),o.send()):a.XMLHttpRequest&&(o=new XMLHttpRequest,o.onreadystatechange=function(t){if(4===o.readyState)if(200===o.status){var i=JSON.parse(o.responseText);e(i)}else n(new Error("HTTP Status "+o.status))},o.open("GET",t._url,!0),o.send())})},t.prototype._loadJSONP=function(){var t=this,e=!1,n=!1,o="pesdk"+Math.round(99999999999999*Math.random());return new i.a(function(i,r){var s=t._createJSONPNode(o);a[o]=function(o){t._removeJSONPNode(s),e||(n=!0,i(o))},a.setTimeout(function(){n||(t._removeJSONPNode(s),e=!0,r(new Error("Timeout of 5 seconds exceeded.")))},5e3)})},t.prototype._createJSONPNode=function(t){var e=this._buildJSONPUrl(t),n=document.querySelector("head"),o=document.createElement("script");return o.src=e,n.appendChild(o),o},t.prototype._removeJSONPNode=function(t){t.parentNode.removeChild(t)},t.prototype._buildJSONPUrl=function(t){var e=this._parsedUrl.query,n=null;for(var o in e)if("?"===e[o]){n=o;break}return delete this._parsedUrl.search,e[n]=t,s.a.format(this._parsedUrl)},t}();e.a=l}).call(e,n(5))},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=function(t){function e(){i(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=r(this,t.call.apply(t,[this].concat(o)));return a._buttons=[],a.state={visible:!1},a}return s(e,t),e.prototype.componentDidMount=function(){for(var e,n=this,o=arguments.length,i=Array(o),r=0;r<o;r++)i[r]=arguments[r];(e=t.prototype.componentDidMount).call.apply(e,[this].concat(i));var s=this.props.modal;s.on("close",function(){n.setState({visible:!1}),setTimeout(function(){s.remove()},1e3*n.context.theme.transitionDuration)}),Object(a.z)(function(){n.setState({visible:!0})})},e.prototype._onButtonClick=function(t){},e.prototype._renderButtons=function(){var t=this;return this._buttons.map(function(e,n){return a.l.createElement(d,{key:n,onClick:t._onButtonClick.bind(t,n)},e)})},e.prototype.render=function(){var t=this.props.modal,e=o({},t.type,!0),n=this._buttons.length?a.l.createElement(f,null,this._renderButtons()):null;return a.l.createElement(c,{visible:this.state.visible},a.l.createElement(u,e,a.l.createElement(p,null,a.l.createElement(m,{src:this._getAssetPath("shared/modals/icon.png",!0)})),a.l.createElement(h,null,a.l.createElement(_,null,t.title),a.l.createElement(g,null,t.text))),n,a.l.createElement(y,{visible:!this.state.visible}))},e}(a.b);l.propTypes={modal:a.k.object},l.contextTypes=a.b.contextTypes,e.a=l;var c=a.w.div("1jkivgb",{visible:"7bce9v"},"Modal"),u=a.w.div("1udylfs",{error:"120drhm",warning:"120drhm",loading:"120drhm"},"Top"),p=a.w.div("z6arf2","IconContainer"),h=a.w.div("245la5","TextContainer"),f=a.w.div("1943606","Buttons"),d=a.w.div("1kylmay","Button"),m=a.w.img("jsue2c","Icon"),_=a.w.div("1fx19is","Title"),g=a.w.div("1id6172","Text"),y=a.w.div("mv80g2",{visible:"2jlos"},"BlockingOverlay")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(7),a=n.n(s),l=n(9),c=n.n(l),u=n(3),p=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._timeout=null,a.state={enter:!1,appear:!1,leave:!1},a.props.active&&(a.state.enter=!0,a.state.appear=!0),a}return r(e,t),e.prototype.componentWillReceiveProps=function(t){this.props.active&&!t.active?this._leave():!this.props.active&&t.active&&(this._enter(),this._appear())},e.prototype._cancelTimeout=function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)},e.prototype._enter=function(){this.setState({enter:!0})},e.prototype._leave=function(){var t=this;this._timeout&&this._cancelTimeout(),this.setState({appear:!1,leave:!0}),this._timeout=window.setTimeout(function(){t._cancelTimeout(),t.setState({enter:!1})},this.props.leaveDuration)},e.prototype._appear=function(){var t=this;this._timeout&&this._cancelTimeout(),Object(u.b)(function(){t.setState({appear:!0,leave:!1}),t._timeout=window.setTimeout(function(){t._cancelTimeout()},t.props.appearDuration)})},e.prototype._buildStateProps=function(){var t=this.props,e=t.enterProp,n=t.appearProp,o=t.leaveProp,i={};return e&&(i[e]=this.state.enter),n&&(i[n]=this.state.appear),o&&(i[o]=this.state.leave),i},e.prototype.render=function(){if(!this.props.children)return null;var t=this._buildStateProps();return a.a.cloneElement(this.props.children,t)},e}(s.Component);p.propTypes={active:c.a.bool,enterProp:c.a.string,enterDuration:c.a.number,appearProp:c.a.string,appearDuration:c.a.number,leaveProp:c.a.string,leaveDuration:c.a.number},p.defaultProps={active:!0,enterProp:"rendered",enterDuration:300,appearProp:"visible",appearDuration:300,leaveDuration:300},e.a=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=n(31),s=n(10),a=function(){function t(e,n){o(this,t),this._ui=e,this._options=n,this._categoriesById={},this._categories=[],this._stickersById={},this._addCategories(r.a.DEFAULTS.STICKER_CATEGORIES);var i=this._options,s=i.categories,a=i.replaceCategories;this._options.categories?this._addCategories(s,a):(this._updateCategoriesMap(),this._updateAllCategory())}return t.prototype.loadExternal=function(t){var e=this;return new s.a(t).load().then(function(t){e._addCategories(t.categories,e._options.replaceCategories)})},t.prototype._addCategories=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=e?t.slice(0):i.u.mergeCategories(this._categories,t,"stickers"),this._updateCategoriesMap(),this._updateAllCategory()},t.prototype._updateCategoriesMap=function(){var t=this;this._categoriesById={},this._categories.forEach(function(e){t._categoriesById[e.identifier]=e}),this._categories.forEach(function(e){e.stickers.forEach(function(e){t._stickersById[e.identifier]=e})}),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach(function(e){e.stickers=e.stickers.filter(function(e){return-1!==t._options.availableStickers.indexOf(e.identifier)})}),this._categories=this._categories.filter(function(t){return t.stickers.length>0})),this._updateAllCategory()},t.prototype._updateAllCategory=function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(function(t){return t.stickers}).reduce(function(t,e){return t.concat(e)},[])},this._categoriesById.all=this._allCategory},t.prototype.getStickersForCategory=function(t){if(!this._categoriesById[t])throw new Error("Unknown sticker category '"+t+"'");return this._categoriesById[t].stickers},t.prototype.getStickerByIdentifier=function(t){return this._stickersById[t]},t.prototype.getCategories=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?[this._allCategory].concat(this._categories):this._categories},t.prototype.getCategory=function(t){return this._categoriesById[t]},t.getURLForSticker=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",n=t.images,o="base"===e?n.mediaBase||n.mediaThumb:n.mediaThumb,r=o.uris||[o.uri];if(void 0===i.u.Browser||i.u.Browser.getIEVersion()){var s=r.filter(function(t){return!/\.svg$/i.test(t)});return s.length?s[0]:r[0]}var a=r.filter(function(t){return/\.svg$/i.test(t)});return a.length?a[0]:r[0]},t}();e.a=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onSharedStateUpdate"),a}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.context.sharedState&&this.context.sharedState.on("update",this._onSharedStateUpdate)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.context.sharedState&&this.context.sharedState.off("update",this._onSharedStateUpdate)},e.prototype._onSharedStateUpdate=function(t,e){this.shouldSharedComponentUpdate(t,e)?(this.sharedComponentWillUpdate(t,e),this.forceUpdate(),this.sharedStateDidChange(t,e)):this.sharedStateDidChange(t,e)},e.prototype.sharedComponentWillUpdate=function(t,e){},e.prototype.shouldSharedComponentUpdate=function(t,e){return!0},e.prototype.sharedStateDidChange=function(t,e){},e.prototype.sharedStateWillChange=function(t,e){},e.prototype.setSharedState=function(t,e){this.context.sharedState.set(t,e)},e.prototype.getSharedState=function(t){return this.context.sharedState.get(t)},e.prototype.forceSharedUpdate=function(){this.context.sharedState.broadcastUpdate()},a(e,[{key:"sharedState",get:function(){return this.context.sharedState.state}}]),e}(s.b);l.contextTypes={editor:s.k.object,ui:s.k.object,options:s.k.object,mediator:s.k.object,sharedState:s.k.object,theme:s.k.object,screen:s.k.object,appComponent:s.k.object},l.propTypes={sharedState:s.k.any},e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(23),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onKeyDown","_onInputBlur","_onInputChange"),a.state={},a}return r(e,t),e.prototype.shouldComponentUpdate=function(t,e){return this.props.value!==t.value||this.props.disabled!==t.disabled},e.prototype._onInputChange=function(t){this.props.onLiveChange&&this.props.onLiveChange(t)},e.prototype._onInputBlur=function(t){this.props.onChange&&this.props.onChange(t)},e.prototype._onKeyDown=function(t){13!==t.keyCode&&27!==t.keyCode||this._input.blur(),this.props.onKeyDown&&this.props.onKeyDown()},e.prototype.focus=function(){this._input.focus()},e.prototype._getInputStyle=function(){return{}},e.prototype.render=function(){var t=this,e=this.constructor.RootElement;return s.l.createElement(e,{value:this.props.value,onChange:this._onInputChange,onBlur:this._onInputBlur,innerRef:function(e){t._input=e},onKeyDown:this._onKeyDown,name:this.props.name,styles:this.props.styles,className:this.props.className,style:this._getInputStyle(),disabled:this.props.disabled})},e}(s.b);l.contextTypes=s.b.contextTypes,e.a=l,l.RootElement=Object(s.w)(a.a).input("120drhm","NumericInputComponent")},function(t,e,n){"use strict";(function(t){var n="warn",o=[{type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{type:"info",background:"#BDE5F8",color:"#00529B"},{type:"warn",background:"#FEEFB3",color:"#9F6000"},{type:"error",background:"#FFBABA",color:"#D8000C"},{type:"log",background:"#EEEEEE",color:"#1f4f6b"}],i=o.map(function(t){return t.type}),r={};r.setLevel=function(t){n=t},r.canLog=function(t){return null!==n&&!(i.indexOf(t)<i.indexOf(n))},r.hasColorfulOutput=function(){return(!t||t&&t.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},r.printError=function(t){t.stack.split("\n").forEach(function(t){r.error("Error",t)})},o.forEach(function(t){var e=t.type,n=t.background,o=t.color;r[e]=function(t){if("undefined"!=typeof console&&r.canLog(e)){for(var i=arguments.length,s=Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];var l=s.map(function(t){return"string"==typeof t?t:t.toString()}).join(" ");if(!r.hasColorfulOutput())return console.log("PhotoEditorSDK | "+t+" | "+l);console.log("%c  %c PhotoEditorSDK %c  %c "+t+" %c  "+l+"  %c  ","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+n+"; color: "+o+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0")}}}),e.a=r}).call(e,n(17))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(t){if(p===clearTimeout)return clearTimeout(t);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?d=f.concat(d):_=-1,d.length&&a())}function a(){if(!m){var t=i(s);m=!0;for(var e=d.length;e;){for(f=d,d=[];++_<e;)f&&f[_].run();_=-1,e=d.length}f=null,m=!1,r(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,p,h=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(t){p=o}}();var f,d=[],m=!1,_=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new l(t,e)),1!==d.length||m||i(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(102),r=n(105),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(e,n){o(this,t),this._ui=e,this._fonts=n,this._loadedFonts=[]}return t.prototype.setFonts=function(t){this._fonts=t},t.prototype.needsToLoad=function(){for(var t=this,e=0;e<this._fonts.length;e++){var n=function(e){var n=void 0;return t._fonts[e].getVariations().forEach(function(t){n=n||t.getProvider()}),n?{v:!0}:"continue"}(e);switch(n){case"continue":continue;default:if("object"===(void 0===n?"undefined":s(n)))return n.v}}},t.prototype.fontLoaded=function(t){var e=t.getFontFamily();return-1!==this._loadedFonts.indexOf(e)},t.prototype.setFontLoaded=function(t){if(!this.fontLoaded(t)){var e=t.getFontFamily();this._loadedFonts.push(e)}},t.prototype.load=function(){var t=this,e=this._fonts,n={google:new i.a(this._ui),file:new r.a(this._ui)},o=function(){for(var t in n){n[t].dispose()}};e.filter(function(e){return!t.fontLoaded(e)}).forEach(function(t){t.getVariations().forEach(function(t){var e=t.getProvider();if(e){n[e].add(t)}})});var s=[];for(var a in n)s.push(n[a].load());return Promise.all(s).then(function(){o(),e.forEach(function(e){t.setFontLoaded(e)})}).catch(function(t){throw o(),t})},t}();e.a=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(41),a=n(43),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._serializeSticker=function(e,n){var o=e.getInputDimensions(!1),i=t.prototype._serializeSticker.call(this,e,n);return"none"!==n.getTintMode()&&(i.options.tintColor=n.serializeOption("tintColor",!0)),i.options.dimensions=n.getDimensions().clone().divide(o.min()).toObject(),i.options.identifier=i.options.name,delete i.options.name,i},e.prototype._serializePath=function(e){var n=t.prototype._serializePath.call(this,e),o=e.getBrush();return o.hasOption("hardness")&&(n.hardness=o.getOption("hardness")),n},e.prototype._serializeOperation=function(e,n){return"frame"===e.constructor.identifier?(this._serializeFrameOperation(e,n),null):"overlay"===e.constructor.identifier?(this._serializeOverlayOperation(e,n),null):t.prototype._serializeOperation.call(this,e,n)},e.prototype._serializeFrameOperation=function(t,e){var n=e.filter(function(t){return"sprite"===t.type}),o=void 0;n.length?o=n.pop():(o={type:"sprite",options:{sprites:[]}},e.push(o)),o.options.sprites.push({type:"frame",options:this._getFrameOptions(t)})},e.prototype._serializeOverlayOperation=function(t,e){if(t.getIdentifier()){var n=e.filter(function(t){return"sprite"===t.type}),o=void 0;n.length?o=n.pop():(o={type:"sprite",options:{sprites:[]}},e.push(o)),o.options.sprites.push({type:"overlay",options:{identifier:t.getIdentifier(),intensity:t.getAlpha(),blendMode:a.a[t.getBlendMode()]}})}},e.prototype._getFrameOptions=function(t){return{identifier:t.getFrame().identifier}},e.prototype._serializeOrientationOperation=function(e){var n=t.prototype._serializeOrientationOperation.call(this,e);return 90!==n.options.rotation&&270!==n.options.rotation||(n.options.flipHorizontally=!n.options.flipHorizontally,n.options.flipVertically=!n.options.flipVertically),n},e.prototype._serializeTransformOperation=function(e){var n=this._editor.operations;if(n.exists("orientation")){e=e.clone();var o=n.get("orientation");e.rotate(-o.getRotation()),o.getFlipVertically()&&(e.flip("vertical"),e.setRotation(-1*e.getRotation())),o.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation()))}var i=t.prototype._serializeTransformOperation.call(this,e);return i.type="transform",i},e.prototype._serializeText=function(e,n){var o=t.prototype._serializeText.call(this,e,n),i=e.getInputDimensions(!1);return o.options.fontIdentifier=n.getFontIdentifier(),o.options.maxWidth=o.options.maxWidth*i.x/i.min(),delete o.options.fontFamily,o},e.prototype._serializeFilterOperation=function(e){var n=t.prototype._serializeFilterOperation.call(this,e);return n?(n.options.identifier=n.options.name,delete n.options.name,n):null},e.prototype._serializeRadialFocusOperation=function(e){var n=t.prototype._serializeRadialFocusOperation.call(this,e),o=n.options.options;return o.start=o.position,delete o.position,o.end={x:o.start.x+o.radius,y:o.start.y},delete o.radius,n},e}(s.a);e.a=l,l.version="2.0.0"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(42),l=n(44),c=n(45),u=n(13),p=n(46),h=n(18),f=n(6),d=n(43),m=s.q.flipObject(d.a),_=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));a._frameManager=new l.a(a._ui,a._getOptions("frame"));var u=a._getOptions("overlay");return u&&(a._overlayManager=new c.a(a._ui,u)),a}return r(e,t),e.prototype._deserializeSprite=function(e,n){return"frame"===n.type?this._deserializeFrame(e,n):"overlay"===n.type?this._deserializeOverlay(e,n):t.prototype._deserializeSprite.call(this,e,n)},e.prototype._deserializeOperation=function(e){return"transform"===e.type?this._deserializeTransformOperation(e):t.prototype._deserializeOperation.call(this,e)},e.prototype._deserializeOrientationOperation=function(e){return 90!==e.options.rotation&&270!==e.options.rotation||(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),t.prototype._deserializeOrientationOperation.call(this,e)},e.prototype._deserializeTransformOperation=function(e){var n=this;return t.prototype._deserializeCropOperation.call(this,e).then(function(t){if(t){var e=n._data.operations.orientation;if(e){var o=e.options;t.rotate(o.rotation),o.flipHorizontally&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),o.flipVertically&&(t.flip("vertical"),t.setRotation(-1*t.getRotation()))}return t}})},e.prototype._deserializeFrame=function(t,e){var n=this,o=e.options.identifier,i=this._frameManager.getFrameByIdentifier(o);if(!i)return s.h.warn("Deserializer","Unknown frame `"+o+"`. Skipping frame."),Promise.resolve();var r=new p.a(this._ui,i);return r.load().then(function(){n._editor.operations.getOrCreate("frame",{frame:r.getFrame()})})},e.prototype._deserializeOverlay=function(t,e){var n=this,o=e.options,i=o.blendMode,r=o.intensity,a=o.identifier,l=this._overlayManager.getOverlayByIdentifier(a);if(!l)return s.h.warn("Deserializer","Unknown overlay `"+a+"`. Skipping overlay."),Promise.resolve();var c=this._editor.getUI().getAssetPath(l.image);return f.a.load(c).then(function(t){n._editor.operations.getOrCreate("overlay",{alpha:r,identifier:a,blendMode:parseInt(m[i||l.blendMode],10),image:t})})},e.prototype._createBrushForPath=function(e){var n=t.prototype._createBrushForPath.call(this,e);return void 0!==e.hardness&&n.hasOption("hardness")&&n.setHardness(e.hardness),n},e.prototype._deserializeSticker=function(t,e){var n=this,o=s.p.Operations.SpriteOperation,i=e.options,r=this._stickerManager.getStickerByIdentifier(i.identifier),a=u.a.getURLForSticker(r,"base");if(!r)return s.h.warn("Deserializer","Unknown sticker `"+i.identifier+"`. Skipping sprite."),Promise.resolve();var l=t.getInputDimensions(!1);return new Promise(function(e,c){var u=new window.Image;u.addEventListener("load",function(){var n=o.StickerSprite.prototype.availableOptions.adjustments.structure,a=i.rotation,c=i.flipHorizontally,p=i.flipVertically,h={identifier:i.identifier,image:u,position:s.v.fromObject(i.position),dimensions:s.v.fromObject(i.dimensions).multiply(l.min()),rotation:a,flipHorizontally:c,flipVertically:p,adjustments:{}};void 0!==i.adjustments&&["brightness","contrast","saturation"].forEach(function(t){void 0!==i.adjustments[t]&&(h.adjustments[t]=i.adjustments[t]+n[t].default)}),void 0!==i.tintColor&&void 0!==r.tintMode&&(h.tintColor=s.c.fromArray(i.tintColor),h.tintMode=r.tintMode),e(t.createSticker(h))}),u.crossOrigin="Anonymous",u.src=n._editor.getUI().getAssetPath(a)})},e.prototype._deserializeFilterOperation=function(t){var e=this,n=t.options;return this._filterManager.getFilterByIdentifier(n.identifier)?this._filterManager.instantiateFilterWithIdentifier(n.identifier).then(function(t){var o=e._editor.operations.getOrCreate("filter");if(o)return o.set({identifier:n.identifier,filter:t,intensity:n.intensity}),o}):(s.h.warn("Deserializer","Unknown filter `"+n.identifier+"`"),Promise.resolve())},e.prototype._deserializeFocusOperation=function(e){var n=e.options,o=n.options;if("radial"!==n.type)return t.prototype._deserializeFocusOperation.call(this,e);var i=o.start,r=o.end,a=o.gradientRadius,l=o.blurRadius,c=s.v.fromObject(r).subtract(s.v.fromObject(i)).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:s.v.fromObject(i),radius:c,gradientRadius:a,blurRadius:l}))},e.prototype._deserializeText=function(t,e){var n=e.options,o=n.fontSize,i=n.lineHeight,r=n.fontIdentifier,a=n.alignment,l=n.rotation,c=n.maxWidth,u=n.color,p=n.backgroundColor,f=new h.a(this._ui),d=this._fontManager.getVariationByIdentifier(r);return d?f.setFonts([d.getFont()]):d=this._fontManager.getDefaultFont(),f.load().then(function(){var e=t.getInputDimensions(!1),r=c*e.min()/e.x;return t.createText({fontSize:o,lineHeight:i,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),alignment:a,rotation:l,maxWidth:r,text:n.text,color:s.c.fromArray(u),backgroundColor:s.c.fromArray(p),position:s.v.fromObject(n.position)})})},e}(a.a);e.a=_,_.version="2.0.0"},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=n(14),c=n(117),u=n(4),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),h=function(t){function e(){var n;i(this,e);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=r(this,t.call.apply(t,[this].concat(l)));return u._needsStyleFixes=!0,u._bindAll("_onZoom","_onZoomDone","_onCanvasDrag","_onCanvasDragStart","_onCanvasDragStop","_onCanvasClick","_onCanvasClickDisabled","_onCanvasClickEnabled"),u._initialRerender=!0,u._events=(n={},o(n,a.d.EVENTS.ZOOM,u._onZoom),o(n,a.d.EVENTS.ZOOM_DONE,u._onZoomDone),n),u.state={canvasClickDisabled:!1,displayHeader:!0},u}return s(e,t),e.prototype.setSharedState=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.prototype.setSharedState.call(this,e,n),o&&this.props.controls.updateSharedState()},e.prototype.fixStyles=function(){if(a.u.Browser.isIElte(11)){var t=this._outerContainer.offsetHeight;this._container.style.height=t+"px"}},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._initialRerender&&this.forceUpdate()},e.prototype._performHitTest=function(t){var e=this.context.appComponent.getBounds(),n=t.subtract(e.left,e.top),o=this.context.editor,i=o.controls.getAvailable();if(this.props.controls){var r=this.props.controls.constructor.clickAtPosition(t,o);if(r)return this.setSharedState(r),!0}for(var s in i){var a=i[s],l=a.clickAtPosition(n,o);if(l)return l.selectedSprite===this.getSharedState("selectedSprite")||(this.context.screen.switchToControls(s,l),!0)}return!1},e.prototype._onCanvasClickDisabled=function(){this.setState({canvasClickDisabled:!0})},e.prototype._onCanvasClickEnabled=function(){var t=this;Object(a.z)(function(){t.setState({canvasClickDisabled:!1})})},e.prototype._onCanvasClick=function(t){var e=a.u.getEventPosition(t);this._performHitTest(e)},e.prototype._onZoom=function(){this.forceUpdate()},e.prototype._onZoomDone=function(){this.forceUpdate()},e.prototype._onCanvasDragStart=function(){var t=this.context.editor;this._initialOffset=t.offset.clone()},e.prototype._onCanvasDrag=function(t){var e=this.context.editor,n=e.offset;e.offset=n.copy(this._initialOffset).add(t),e.render()},e.prototype._onCanvasDragStop=function(){this.forceUpdate()},e.prototype.getImageBoundingRect=function(){var t=this.context.editor,e=t.getSDK(),n=e.getContainer(),o=e.getSprite(),i=n.getPosition(),r=o.getTexture(),s=e.getTextureScale();if(!r)return new a.n;var l=r.getDimensions().clone().divide(s).multiply(t.zoom.level),c=this._outerContainer.getBoundingClientRect(),u=this.context.appComponent.getBounds();return new a.n(Math.floor(i.x-l.x/2-(c.left-u.left)),Math.floor(i.y-l.y/2-(c.top-u.top)),Math.ceil(l.x),Math.ceil(l.y))},e.prototype.getContainerOffset=function(){var t=this._outerContainer.getBoundingClientRect();return new a.v(t.left,t.top)},e.prototype._getContainerStyle=function(){var t=this.getImageBoundingRect();return{left:t.x,top:t.y,width:t.width,height:t.height}},e.prototype._renderControls=function(){var t=this,e=this._imageContainer&&this._getContainerStyle();return a.l.createElement(f,{innerRef:function(e){t._imageContainer=e},style:e,onClick:this._onCanvasClick})},e.prototype.render=function(){var t=this,e=this.context.editor;return a.l.createElement(d,{draggable:!e.isShallow&&e.isDraggable,className:void 0,innerRef:function(e){t._outerContainer=e}},a.l.createElement(u.a,{disabled:e.isShallow||!e.isDraggable,onStart:this._onCanvasDragStart,onDrag:this._onCanvasDrag,onStop:this._onCanvasDragStop},a.l.createElement("div",null,a.l.createElement(m,{innerRef:function(e){t._container=e}},this.state.displayHeader&&a.l.createElement(c.a,null),this._renderControls()))))},p(e,[{key:"container",get:function(){return this._container}}]),e}(l.a);h.contextTypes=l.a.contextTypes,h.propTypes={options:a.k.object},e.a=h;var f=a.w.div("55byom","Container"),d=a.w.div("1ebx3lr",{draggable:"ovipzq"},"CanvasControls"),m=a.w.div("1h6ank1","CanvasControlsContainer")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(4),l=function(t){function e(){o(this,e);var n=i(this,t.call(this));return n.constructor.NATIVE_SCROLLBAR_WIDTH||(n.constructor.NATIVE_SCROLLBAR_WIDTH=s.u.getScrollbarWidth()),n._isDragging=!1,n._bindAll("_onButtonDragStart","_onButtonDrag","_onButtonDragStop","_onBarDragStart","_onBarDrag","_onBarDragStop","_onListScroll"),n.state={buttonSize:0,buttonPosition:0,buttonVisible:!1},n}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.update()},e.prototype._onListScroll=function(){if(!this._isDragging){var t=this._getDirection(),n=void 0,o=void 0,i=void 0;t===e.HORIZONTAL?(n=this._list.scrollWidth-this._list.offsetWidth,o=this._list.scrollLeft,i=this._root.offsetWidth-this.state.buttonSize):t===e.VERTICAL&&(n=this._list.scrollHeight-this._list.offsetHeight,o=this._list.scrollTop,i=this._root.offsetHeight-this.state.buttonSize);var r=o/n;this.setState({buttonPosition:i*r}),this.props.onScroll&&this.props.onScroll(o)}},e.prototype._onButtonDragStart=function(t){this._isDragging=!0,this._initialButtonPosition=this.state.buttonPosition||0},e.prototype._onButtonDrag=function(t){var n=this._getDirection(),o=void 0;n===e.HORIZONTAL?o=this._initialButtonPosition+t.x:n===e.VERTICAL&&(o=this._initialButtonPosition+t.y),this._setButtonPosition(o)},e.prototype._onButtonDragStop=function(){this._isDragging=!1},e.prototype._onBarDragStart=function(t){var n=s.u.getEventPosition(t);this._initialPosition=n.clone();var o=this._root.getBoundingClientRect(),i=new s.v(o.left,o.top),r=n.clone().subtract(i),a=this._getDirection();a===e.HORIZONTAL?this._setButtonPosition(r.x-this.state.buttonSize/2):a===e.VERTICAL&&this._setButtonPosition(r.y-this.state.buttonSize/2),document.addEventListener("mousemove",this._onBarDrag),document.addEventListener("touchmove",this._onBarDrag),document.addEventListener("mouseup",this._onBarDragStop),document.addEventListener("touchend",this._onBarDragStop)},e.prototype._onBarDrag=function(t){var n=s.u.getEventPosition(t),o=this._root.getBoundingClientRect(),i=new s.v(o.left,o.top),r=n.clone().subtract(i),a=this._getDirection();a===e.HORIZONTAL?this._setButtonPosition(r.x-this.state.buttonSize/2):a===e.VERTICAL&&this._setButtonPosition(r.y-this.state.buttonSize/2)},e.prototype._onBarDragStop=function(){document.removeEventListener("mousemove",this._onBarDrag),document.removeEventListener("touchmove",this._onBarDrag),document.removeEventListener("mouseup",this._onBarDragStop),document.removeEventListener("touchend",this._onBarDragStop)},e.prototype._setButtonPosition=function(t){var n=this._getDirection(),o=void 0,i=void 0;n===e.HORIZONTAL?(o=this._root.offsetWidth-this.state.buttonSize,i=this._list.scrollWidth-this._list.offsetWidth):n===e.VERTICAL&&(o=this._root.offsetHeight-this.state.buttonSize,i=this._list.scrollHeight-this._list.offsetHeight),t=Math.max(0,t),t=Math.min(t,o),this.setState({buttonPosition:t});var r=t/o,s=i*r;n===e.HORIZONTAL?this._list.scrollLeft=s:n===e.VERTICAL&&(this._list.scrollTop=s),this.props.onScroll&&this.props.onScroll(s)},e.prototype._updateButtonSize=function(t){var n=0,o=!1,i=void 0,r=void 0,s=this._getDirection();s===e.HORIZONTAL?(i=this._list.clientWidth,r=this._list.scrollWidth):s===e.VERTICAL&&(i=this._list.offsetHeight,r=this._list.scrollHeight),n=i/r*i,o=r>i,this.setState({buttonSize:n,buttonVisible:o},t)},e.prototype._updateListSize=function(){if(this._list){var t=this._getDirection();if(t===e.HORIZONTAL){this._list.style.height="";var n=this._getFullListDimensions();this._listSize=n.y}else if(t===e.VERTICAL){this._list.style.width="";var o=this._getFullListDimensions();this._listSize=o.x}}},e.prototype._getFullListDimensions=function(){var t=this._list.getBoundingClientRect();return new s.v(t.width,t.height)},e.prototype.update=function(){var t=this;if(!s.u.isMobile()){if(s.u.Browser.isIElte(11)){var n=this._container.offsetHeight;this._list.style.height=n+"px"}var o=this._getDirection();this._updateButtonSize(function(){t._listSize||t._updateListSize();var n=t._listSize;t.state.buttonVisible&&(n+=t.constructor.NATIVE_SCROLLBAR_WIDTH),o===e.HORIZONTAL?(t._root.style.top=t._listSize-12+"px",t._root.style.width=t._list.offsetWidth+"px"):o===e.VERTICAL&&(t._list.style.width=n+"px",t._root.style.left=t._listSize-12+"px",t._root.style.height=t._list.offsetHeight+"px")}),this._list.addEventListener("scroll",this._onListScroll)}},e.prototype._getDirection=function(){return this.props.direction||"horizontal"},e.prototype._getGradientOpacity=function(){if(!this._list)return!1;var t=this._getDirection(),n=void 0;return n=t===e.HORIZONTAL?this._list.scrollWidth-this._list.offsetWidth-this._list.scrollLeft:this._list.scrollHeight-this._list.offsetHeight-this._list.scrollTop,Math.min(Math.max(n/15,0),1)},e.prototype._getButtonStyle=function(){return"horizontal"===this._getDirection()?{left:this.state.buttonPosition,width:this.state.buttonSize}:{top:this.state.buttonPosition,height:this.state.buttonSize}},e.prototype.getList=function(){return this.refs.list},e.prototype.getRoot=function(){return this.refs.root},e.prototype._renderChild=function(t){var e=this;return s.l.cloneElement(t,{innerRef:function(n){t.props.innerRef&&t.props.innerRef(n),e._list=n}})},e.prototype.render=function(){var t=this;if(s.u.isMobile())return this.props.children;var n=this._getButtonStyle(),o=this._renderChild(this.props.children),i=this._getDirection(),r=this._getGradientOpacity();return s.l.createElement(c,{innerRef:function(e){t._container=e},styles:this.props.styles},o,this.props.noGradient||0===r?null:s.l.createElement(h,{style:{opacity:r},horizontal:i===e.HORIZONTAL,vertical:i===e.VERTICAL}),s.l.createElement(u,{innerRef:function(e){t._root=e},onMouseDown:this._onBarDragStart,onTouchStart:this._onBarDragStart,vertical:"vertical"===this.props.direction,horizontal:"horizontal"===this.props.direction},s.l.createElement(a.a,{onStart:this._onButtonDragStart,onDrag:this._onButtonDrag,onStop:this._onButtonDragStop},s.l.createElement(p,{style:n,visible:this.state.buttonVisible,onMouseDown:this._onButtonDown,vertical:"vertical"===this.props.direction,horizontal:"horizontal"===this.props.direction}))))},e}(s.b);l.HORIZONTAL="horizontal",l.VERTICAL="vertical",l.contextTypes=s.b.contextTypes,e.a=l;var c=s.w.div("120drhm","ScrollbarContainer");l.RootElement=c;var u=s.w.div("1s3c4f0",{vertical:"1dvqwqc",horizontal:"1hu63yp"},"Scrollbar"),p=s.w.div("zxujnb",{vertical:"gma9v3",horizontal:"1h5ccdj",visible:"2jlos"},"ScrollbarButton"),h=s.w.div("pc5361",{horizontal:"felmtl",vertical:"1enskgl"},"Gradient")},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=n(0),i=o.w.css("nsck4j","Input")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(14),l=n(15),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onInputLiveChange","_onInputChange"),a.state={value:a.props.value},a}return r(e,t),e.prototype.componentWillReceiveProps=function(t){t.value!==this.state.value&&this.setState({value:t.value})},e.prototype._onInputLiveChange=function(t){this.setState({value:t.target.value})},e.prototype._onInputChange=function(t){var e=parseFloat(t.target.value);if(Number.isNaN(e))return this.setState({value:this.props.value});var n=this.props,o=n.minValue,i=n.maxValue;e=s.u.toFixed(Math.max(o,Math.min(e,i)),1),this.props.onValueChange&&this.props.onValueChange(e),this.setState({value:e})},e.prototype._renderRightPart=function(){var t=this;return s.l.createElement(d,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:void 0,innerRef:function(e){t._input=e},disabled:this.props.disabled})},e.prototype.render=function(){var t=this.props,e=t.label,n=t.inputLabel,o=t.className,i=t.disabled,r=t.styles,a="function"==typeof this._renderLeftPart;return s.l.createElement(u,{styles:r,className:o,disabled:i},s.l.createElement(p,null,a&&s.l.createElement(h,null,e&&s.l.createElement(f,{left:!0},e),this._renderLeftPart()),s.l.createElement(h,null,n&&s.l.createElement(f,null,n||" "),this._renderRightPart())))},e}(a.a);c.contextTypes=a.a.contextTypes,e.a=c;var u=s.w.div("12okzzb",{disabled:"1voy7lm"},"ValueSelection");c.RootElement=u;var p=s.w.div("15u7gri","Row"),h=s.w.div("1hy9z1m",{bottomAligned:"17xdalt"},"Column"),f=s.w.div("ts1901",{left:"1ff3rj6"},"Title"),d=Object(s.w)(l.a)("myl4ow",{disabled:"18if3pn"},"InputField")},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return s});var o=n(0),i=o.w.css("1ht9t4w","CircleSlider"),r=o.w.css("1ldv9bx","CircleSliderBackground"),s=o.w.css("7g0rty","CircleSliderKnob")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),n(173)),u=n(174),p=n(175),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},f=a.Math.Vector2,d=function(t){function e(){var n;i(this,e);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];var p=r(this,t.call.apply(t,[this].concat(c)));return p._bindAll("_onZoomDone","_onWindowResize","_onHistoryChange","_onAfterTransform"),p._events=(n={},o(n,l.Constants.EVENTS.ZOOM_DONE,p._onZoomDone),o(n,l.Constants.EVENTS.WINDOW_RESIZE,p._onWindowResize),o(n,l.Constants.EVENTS.HISTORY_UNDO,p._onHistoryChange),o(n,l.Constants.EVENTS.HISTORY_REDO,p._onHistoryChange),n),p.state=a.Utils.extend(p.state,{visible:!1,canvasClickDisabled:!1}),p}return s(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.forceUpdate()},e.prototype._onAfterTransform=function(t){var e="sprite-transform-"+t.getId();this.props.controls.addLocalHistorySnapshot(e,!0)},e.prototype._onHistoryChange=function(){var t=this.getSharedState("operation");if(t){var e=this.getSharedState("selectedSprite");-1===t.getSprites().indexOf(e)&&this._selectNextSprite()}},e.prototype._onWindowResize=function(){var t=this;this.context.editor.once("rendered",function(){t.forceUpdate()})},e.prototype._onZoomDone=function(){this.context.editor.render(),this.setState({visible:!0})},e.prototype._onItemBlur=function(){},e.prototype._onCanvasClick=function(t){if(!this.state.canvasClickDisabled){this._performHitTest(l.Utils.getEventPosition(t))||(this.getSharedState("selectedSprite")&&this._onItemBlur(),this.context.screen.switchToControls("default"))}},e.prototype._onSpriteDelete=function(t){this.getSharedState("operation").removeSprite(t),t.dispose(),this._selectNextSprite(),this.props.controls.addLocalHistorySnapshot("sprite-deletion",!1),this.context.editor.render()},e.prototype._onSpriteTakeToFront=function(t){this.getSharedState("operation").takeSpriteToFront(t),this.props.controls.addLocalHistorySnapshot("sprite-order",!1),this.forceUpdate(),this.context.editor.render()},e.prototype._onSpriteFlipHorizontally=function(t,e){e.stopPropagation(),t.setFlipHorizontally(!t.getFlipHorizontally()),this.props.controls.addLocalHistorySnapshot("sprite-flip-horizontally",!1),this.forceUpdate(),this.context.editor.render()},e.prototype._onSpriteDuplicate=function(t,e){e.stopPropagation();var n=this.getSharedState("operation"),o=t.serializeOptions();delete o.id,delete o.type,t.hasOption("image")&&(o.image=t.getImage());var i=n.getInputDimensions();o.position.add(new f(10,10).divide(i));var r=this._createSprite(o);this.setSharedState({selectedSprite:r}),n.addSprite(r),this.props.controls.addLocalHistorySnapshot("sprite-creation",!1),this.context.editor.render()},e.prototype._selectNextSprite=function(){var t=this.getSharedState("operation"),e=t.getSprites(),n=e[e.length-1];n?this.setSharedState({selectedSprite:n}):(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default"))},e.prototype._getComponentTypeForSprite=function(t){var e=a.Operations.SpriteOperation;switch(t.constructor){case e.StickerSprite:return c.a;case e.TextSprite:return u.a;case e.BrushSprite:return p.a}},e.prototype._getPropsForSprite=function(t){var e={};return e.hideContent=!0,e},e.prototype._renderSpriteItems=function(t){var e=this,n=this.getSharedState("selectedSprite");return t.map(function(t){var o=e._getComponentTypeForSprite(t),i=e._getPropsForSprite(t),r=n===t;return l.React.createElement(o,h({sprite:t,selected:r,onClick:e._onCanvasClick,onAfterChange:e._onAfterTransform.bind(e,t),onCanvasClickDisabled:e._onCanvasClickDisabled,onCanvasClickEnabled:e._onCanvasClickEnabled,onDelete:e._onSpriteDelete.bind(e,t),onTakeToFront:e._onSpriteTakeToFront.bind(e,t),onFlipHorizontally:e._onSpriteFlipHorizontally.bind(e,t),onDuplicate:e._onSpriteDuplicate.bind(e,t),snapRotation:e.props.options.snapRotation,snapRotationTolerance:e.props.options.snapRotationTolerance,canvasControls:e,key:t.getId()},i))})},e.prototype._renderOverlayControls=function(){return null},e.prototype._renderControls=function(){var t=this;if(this.state.visible){var e=this.getSharedState("operation"),n=e.getSprites(),o=this._container&&this._getContainerStyle();return l.React.createElement(m,{className:void 0},l.React.createElement(_,{innerRef:function(e){t._innerContainer=e},style:o,className:void 0},!this.state.canvasClickDisabled&&l.React.createElement(g,{onClick:this._onCanvasClick}),l.React.createElement("div",null,this._renderSpriteItems(n),this._renderOverlayControls())))}},e}(l.CanvasControlsComponent);d.contextTypes=l.CanvasControlsComponent.contextTypes,e.a=d;var m=l.adonis.div("120drhm","CanvasControls"),_=l.adonis.div("1anj0of","Container"),g=l.adonis.div("o35414","ClickHandlerForInternetExplorer")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}),u=a.Math.Vector2,p=void 0;a.Operations.SpriteOperation&&(p=a.Operations.SpriteOperation.TextSprite);var h=function(t){function e(){i(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=r(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onDragStart","_onDrag","_onDragStop","_onRotateDragStart","_onRotateDrag","_onRotateDragStop","_onCornerDrag","_onCornerDragStop","_onSpriteUpdate","_onTakeToFront","_onFlipHorizontally","_onDuplicate","_onDelete"),a}return s(e,t),e.prototype.componentDidMount=function(){this.props.sprite.on("update",this._onSpriteUpdate)},e.prototype.componentWillUnmount=function(){this.props.sprite.off("update",this._onSpriteUpdate)},e.prototype.componentWillReceiveProps=function(t){this.props.sprite.off("update",this._onSpriteUpdate),t.sprite.on("update",this._onSpriteUpdate)},e.prototype._onSpriteUpdate=function(){this.forceUpdate()},e.prototype._onTakeToFront=function(t){t.stopPropagation(),this.props.onTakeToFront&&this.props.onTakeToFront(t)},e.prototype._onFlipHorizontally=function(t){t.stopPropagation(),this.props.onFlipHorizontally&&this.props.onFlipHorizontally(t)},e.prototype._onDelete=function(t){t.stopPropagation(),this.props.onDelete&&this.props.onDelete(t)},e.prototype._onDuplicate=function(t){t.stopPropagation(),this.props.onDuplicate&&this.props.onDuplicate(t)},e.prototype._onBeforeScale=function(){},e.prototype._onScale=function(t){},e.prototype._onRotateDragStart=function(){this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()},e.prototype._onRotateDrag=function(t,e){var n=this.context.editor,o=this.props.sprite,i=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),r=i.clone(),s=e.clone().subtract(this._containerOffset).subtract(r),a=Math.atan2(s.y,s.x)-Math.PI/2,l=this.props,c=l.snapRotation,u=l.snapRotationTolerance,p=Math.round(180*a/Math.PI),h=Math.round(p/c)*c,f=p-h;Math.abs(f)<u&&(a=h*Math.PI/180),o.setRotation(a),n.render(),this.forceUpdate()},e.prototype._onRotateDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()},e.prototype._onCornerDragStart=function(t,e,n,o){var i=this.context.editor,r=this.props.sprite,s=r.getDimensions(i.getSDK(),i.getOutputDimensions()),a=s.x;this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset();var l=r.getPivot(),c=r.getAnchor(),p=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),h=r.getDimensions(i.getSDK(),i.getOutputDimensions()),f=new u(h.width,h.height),d=p.clone().subtract(f.clone().multiply(c)).add(f.clone().multiply(l)).round(),m=o.clone().subtract(this._containerOffset).subtract(d);this._initialScaleSettings={width:a,mouseDistanceFromPivot:m},this._onBeforeScale(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()},e.prototype._onCornerDrag=function(t){var e=this.context.editor,n=this.props.sprite,o=n.getRotation(),i=this._initialScaleSettings,r=i.width,s=i.mouseDistanceFromPivot,a=s.clone().add(t),l=Math.cos(o),c=Math.sin(o),u=Math.max(Math.abs(2*(a.x*l+a.y*c)),this.constructor.MIN_WIDTH),p=u/r;e.render(),this._onScale(p)},e.prototype._onCornerDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()},e.prototype._isDraggingDisabled=function(){return!this.props.selected},e.prototype._onDragStart=function(){var t=this.props.sprite;this._initialPosition=t.getPosition(),this.props.onBeforeChange&&this.props.onBeforeChange()},e.prototype._onDrag=function(t){var e=this.props.sprite,n=this.context.editor,o=n.getOutputDimensions(),i=this._initialPosition.clone().add(t.divide(o));e.setPosition(i),n.render(),this.forceUpdate()},e.prototype._onDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange()},e.prototype._getAbsoluteSpritePosition=function(){var t=this.context.editor,e=t.getOutputDimensions();return this.props.sprite.getPosition().clone().multiply(e)},e.prototype._getContainerStyle=function(){return{}},e.prototype._renderKnobs=function(){var t=this,e=[];return["top","bottom"].forEach(function(n){["left","right"].forEach(function(i){var r=n+"-"+i,s=o({},r,!0);e.push(l.React.createElement(l.DraggableComponent,{key:r,onStart:t._onCornerDragStart.bind(t,n,i),onDrag:t._onCornerDrag,onStop:t._onCornerDragStop},l.React.createElement(b,s)))})}),e},e.prototype._getSpriteDimensions=function(){var t=this.context.editor,e=this.props.sprite,n=t.getOutputDimensions();return e.getDimensions(t.getSDK(),n)},e.prototype._getOverlayPosition=function(){var t=this.context.editor,e=this.props.sprite,n=t.getOutputDimensions(),o=this._getSpriteDimensions(),i=e.getPosition().clone().multiply(n),r=e.getRotation(),s=Math.sin(r),a=Math.cos(r),l=new u(Math.abs(o.x*a)+Math.abs(o.y*s),Math.abs(o.x*s)+Math.abs(o.y*a));return new u(i.x,i.y-l.y/2-70).clamp(new u(80,20),n.clone().subtract(80,70))},e.prototype._renderOverlayControls=function(){if(this.props.selected)return l.React.createElement(l.CanvasOverlayControlsComponent,{takeToFront:!0,flipHorizontally:!(this.props.sprite instanceof p),duplicate:!0,delete:!0,position:this._getOverlayPosition(),onTakeToFront:this._onTakeToFront,onFlipHorizontally:this._onFlipHorizontally,onDuplicate:this._onDuplicate,onDelete:this._onDelete})},e.prototype._getItemControlsProps=function(){return{}},e.prototype.render=function(){var t=this,e=this.props,n=e.selected,o=e.sprite,i=this.state.editing,r=!i,s=[this._renderKnobs(),l.React.createElement(g,{key:"rotateControls"},l.React.createElement(l.DraggableComponent,{onStart:this._onRotateDragStart,onDrag:this._onRotateDrag,onStop:this._onRotateDragStop},l.React.createElement(v,null)))],a=this._getItemControlsProps(),u=l.React.createElement(m,c({style:this._getContainerStyle()},a),s);return l.React.createElement(l.DraggableComponent,{onStart:this._onDragStart,onStop:this._onDragStop,onDrag:this._onDrag,disabled:this._isDraggingDisabled()},l.React.createElement(f,{onClick:this.props.onClick,"data-type":o.constructor.type,"data-selected":n,className:void 0},this._renderOverlayControls(),l.React.createElement(d,{style:this._getContainerStyle(),editing:n&&i,innerRef:function(e){t._container=e},className:void 0},l.React.createElement(_,null,this._renderContent()),n&&!r&&s),n&&r&&u))},e}(l.BaseComponent);h.contextTypes=l.BaseComponent.contextTypes,h.MIN_WIDTH=1,h.defaultProps={snapRotation:90,snapRotationTolerance:5},e.a=h;var f=l.adonis.div("120drhm","OuterContainer"),d=l.adonis.div("bkf7u8",{editing:"64zghi"},"Container"),m=l.adonis.div("36haff","ItemControls"),_=l.adonis.div("120drhm","Content"),g=l.adonis.div("77tiy3","RotateControl"),y=l.adonis.div("mznefm","Knob"),v=Object(l.adonis)(y)("1en5760","RotateKnob"),b=Object(l.adonis)(y)("bdmepn",{"top-left":"1dtvxe8","top-right":"1tu191k","bottom-left":"1we5ut6","bottom-right":"f2wva1"},"CornerKnob")},function(t,e,n){"use strict";var o=n(2),i=(n.n(o),o.Engine.Filters.OverlayFilter);e.a={normal:i.BLEND_MODES.NORMAL,overlay:i.BLEND_MODES.OVERLAY,hardLight:i.BLEND_MODES.HARD_LIGHT,softLight:i.BLEND_MODES.SOFT_LIGHT,multiply:i.BLEND_MODES.MULTIPLY,darken:i.BLEND_MODES.DARKEN,lighten:i.BLEND_MODES.LIGHTEN,screen:i.BLEND_MODES.SCREEN,colorBurn:i.BLEND_MODES.COLOR_BURN}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var o=n(64),i=n.n(o),r=i.a;i.a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(7),a=n.n(s),l=n(9),c=n.n(l),u=n(2),p=(n.n(u),function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._events={},a._needsStyleFixes=!1,a._bindAll("fixStyles"),a}return r(e,t),e.prototype.fixStyles=function(){return Promise.resolve()},e.prototype.componentDidMount=function(){this._bindEvents(),this._needsStyleFixes&&(this.fixStyles(),this.context.options.responsive&&window.addEventListener("resize",this.fixStyles))},e.prototype.componentWillUnmount=function(){this._unbindEvents(),(this.context&&this.context.options||this.props.options).responsive&&this._needsStyleFixes&&window.removeEventListener("resize",this.fixStyles)},e.prototype._bindAll=function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach(function(e){if("function"!=typeof t[e])throw new Error("_bindAll: `"+t.constructor.name+"."+e+"` is not a function.");t[e]=t[e].bind(t)})},e.prototype._t=function(t,e){return this.context.ui.translate(t,e)},e.prototype._getAssetPath=function(){var t;return(t=this.context.ui).getAssetPath.apply(t,arguments)},e.prototype._bindEvents=function(){for(var t in this._events){var e=this._events[t];this.context.mediator.on(t,e)}},e.prototype._unbindEvents=function(){for(var t in this._events){var e=this._events[t];this.context.mediator.off(t,e)}},e.prototype._emitEvent=function(t){for(var e,n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(e=this.context.mediator).emit.apply(e,[t].concat(o))},e.prototype.render=function(){return a.a.createElement("div",null)},e}(a.a.Component));p.contextTypes={appComponent:c.a.object,editor:c.a.object,ui:c.a.object,options:c.a.object,mediator:c.a.object,screen:c.a.object,theme:c.a.object},e.a=p},function(t,e,n){"use strict";e.a={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_analog",defaultName:"Analog",filters:[{identifier:"imgly_lut_cool",defaultName:"Cool",lutImage:"filters/imgly_lut_cool_5_5_128.png"},{identifier:"imgly_lut_blues",defaultName:"Blues",lutImage:"filters/imgly_lut_blues_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Blue Shadows",lutImage:"filters/imgly_lut_blueshadows_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"KDynamic",lutImage:"filters/imgly_lut_kdynamic_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"}]},{identifier:"imgly_filters_bw",defaultName:"Black & White",filters:[{identifier:"imgly_lut_sin",defaultName:"Sin",lutImage:"filters/imgly_lut_sin_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"B & W",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Plate",lutImage:"filters/imgly_lut_plate_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"X400",lutImage:"filters/imgly_lut_x400_5_5_128.png"}]},{identifier:"imgly_filters_retro",defaultName:"Retro",filters:[{identifier:"imgly_lut_celsius",defaultName:"Celsius",lutImage:"filters/imgly_lut_celsius_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_k2",defaultName:"K2",lutImage:"filters/imgly_lut_k2_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia High",lutImage:"filters/imgly_lut_sepiahigh_5_5_128.png"},{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Eighties",lutImage:"filters/imgly_lut_eighties_5_5_128.png"},{identifier:"imgly_lut_elder",defaultName:"Elder",lutImage:"filters/imgly_lut_elder_5_5_128.png"},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Orchid",lutImage:"filters/imgly_lut_orchid_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"}]},{identifier:"imgly_filters_special",defaultName:"Special",filters:[{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Cotton Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"High Contrast",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_nogreen",defaultName:"No Green",lutImage:"filters/imgly_lut_nogreen_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Pola 669",lutImage:"filters/imgly_lut_pola669_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"}]},{identifier:"imgly_filters_summer",defaultName:"Summer",filters:[{identifier:"imgly_lut_texas",defaultName:"Texas",lutImage:"filters/imgly_lut_texas_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_chest",defaultName:"Chest",lutImage:"filters/imgly_lut_chest_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Evening",lutImage:"filters/imgly_lut_evening_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Fall",lutImage:"filters/imgly_lut_fall_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Front",lutImage:"filters/imgly_lut_front_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_sunset",defaultName:"Sunset",lutImage:"filters/imgly_lut_sunset_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"}]},{identifier:"imgly_filters_winter",defaultName:"Winter",filters:[{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_bleached",defaultName:"Bleached",lutImage:"filters/imgly_lut_bleached_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Bleached Blue",lutImage:"filters/imgly_lut_bleachedblue_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Breeze",lutImage:"filters/imgly_lut_breeze_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lenin",lutImage:"filters/imgly_lut_lenin_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_winter",defaultName:"Winter",lutImage:"filters/imgly_lut_winter_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"],width:62,height:64}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"],width:62,height:59}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"],width:60,height:63}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"],width:63,height:55}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"],width:62,height:61}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"],width:64,height:60}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"],width:64,height:60}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"],width:64,height:64}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"],width:64,height:62}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"],width:62,height:54}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"],width:64,height:58}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"],width:63,height:41}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"],width:65,height:47}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"],width:62,height:64}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"],width:62,height:59}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"],width:64,height:64}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"],width:62,height:60}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},function(t,e,n){(function(e){(function(){var n,o,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},o=e.hrtime,n=function(){var t;return t=o(),1e9*t[0]+t[1]},i=n()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(e,n(17))},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(2),l=(n.n(a),n(91)),c=n(93),u=n(94),p=n(95),h=n(96),f=n(97),d=n(99),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_=function(t){function e(n,r,a){var l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o(this,e);var c=i(this,t.call(this));if(c._ui=n,c._options=r,c._mediator=a,c._ready=!1,c._padding=[0,0,0,0],c._offset=new s.v(0,0),c._shallow=l,l||(c._initSDK(),c._onZoom=c._onZoom.bind(c),c._onUndo=c._onUndo.bind(c),c._onRedo=c._onRedo.bind(c),c.history=new d.a(c,c._sdk,c._mediator),c.history.on("undo",c._onUndo),c.history.on("redo",c._onRedo),c.zoom=new f.a(c,c._sdk,c._mediator),c.zoom.on("set",c._onZoom),c._initSerializers()),c.operations=new u.a(c,c._sdk,c._mediator),c.controls=new p.a(c,c._sdk,c._mediator),c.features=new h.a(c,c._sdk,c._mediator),c._sdk){var m=[];for(var _ in c._operations)m.push(c._operations[_]);c._sdk.registerOperations(m)}return c._running=!1,c._renderRequested=!0,c._renderCallbacks=[],c._animationFrameRequest=null,c.render=c.render.bind(c),c._tick=c._tick.bind(c),c}return r(e,t),e.prototype.setImage=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=this._sdk.getRenderer(),i=new s.v(e.naturalWidth,e.naturalHeight),r=1e6*this.getMaxMegapixels(),a=o.getMaxDimensions();n&&this.reset();var l=new c.a(e,r,a),u=null,p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,o=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],void 0),r=void 0;t._sdk.getImage()&&(o=t.getInputDimensions(),r=n.clone().divide(o)),t._setImage(e,u,n),r&&t.broadcastScale(r),t._initWatermark(),t._ready=!0,t.emit("ready")};l.needsResize()?(this.emit("resize"),u=this._sdk.parseExif(e),l.resize().then(function(e){var n=e.canvas,o=e.dimensions,i=e.reason;n.src="data:image/jpeg;base64,",t.emit("resized",{dimensions:o,reason:i}),p(n,o,i)})):p(e)},e.prototype._initWatermark=function(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))},e.prototype._initSDK=function(){var t=this._options,e=t.logLevel,n=t.displayWelcomeMessage,o=t.debug,i=t.license,r=this._options.editor,a=r.smoothDownscaling,l=r.smoothUpscaling,c=r.preferredRenderer,u=r.pixelRatio,p={logLevel:e,debug:o,displayWelcomeMessage:n,pixelRatio:u,smoothDownscaling:a,smoothUpscaling:l,transparent:!0,license:i};this._sdk=new s.p(c,p)},e.prototype._onZoom=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.fixOffset(),this.render(function(){e&&e()})},e.prototype.fixOffset=function(){this._offset=this._clampOffset(this._offset)},e.prototype._onUndo=function(){this.render()},e.prototype._onRedo=function(){this.render()},e.prototype.getRotation=function(){return this._sdk.getRotation()},e.prototype.setRotation=function(t){this._sdk.setRotation(t)},e.prototype.getSpriteScale=function(){return this._sdk.getSpriteScale()},e.prototype.setSpriteScale=function(t){this._sdk.setSpriteScale(t)},e.prototype.isToolAllowed=function(t){return!!this._shallow||this._sdk._l.isToolAllowed(t)},e.prototype.isToolEnabled=function(t){return-1!==this._options.editor.tools.indexOf(t)},e.prototype.getMaxMegapixels=function(){var t=this._options.editor.maxMegaPixels;return s.u.isMobile()?t.mobile:t.desktop},e.prototype.getOutputDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(t)},e.prototype.getOutputTextureDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(t)},e.prototype.getFinalDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getFinalDimensions(t)},e.prototype.getCanvasDimensions=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this._sdk.getCanvas(),n=new s.v(e.offsetWidth,e.offsetHeight);return t&&n.subtract(this._padding[1]+this._padding[3],this._padding[0]+this._padding[2]),n},e.prototype._setImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=t,this._sdk.setImage(t,e,n),this.zoom.auto(!0,!0),this.emit("new-image")},e.prototype.export=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty();var n=this._options.editor.export;return new l.a(this._sdk,n,e).export().then(function(e){return t.emit("export",e),t._mediator.emit(s.d.EVENTS.EXPORT,e,t),t._watermarkOperation&&(t._watermarkOperation.setEnabled(!0),t._sdk.render()),t._sdk.setAllOperationsToDirty(),e})},e.prototype._initSerializers=function(){this._serializers={"1.0.0":n(100).default,"1.0.1":n(106).default,"2.0.0":n(107).default,"2.0.1":n(108).default,"3.0.0":n(111).default}},e.prototype.serialize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.0.0",n=this._serializers[e];return n?new n(this).serialize(t):s.j.reject(new Error("No serializer for version "+e+" found."))},e.prototype.deserialize=function(t){var e=this,n=this._serializers[t.version];return n?new n(this).deserialize(t).then(function(){e.zoom.auto(!0,!0)}):s.j.reject(new Error("No serializer for version "+t.version+" found."))},e.prototype._applyOffset=function(){var t=this._offset.clone();t.x-=this._padding[1]/2,t.x+=this._padding[3]/2,t.y-=this._padding[2]/2,t.y+=this._padding[0]/2,this._sdk.setOffset(t)},e.prototype.start=function(){this._animationFrameRequest=Object(s.z)(this._tick)},e.prototype.stop=function(){this._running=!1,this._animationFrameRequest&&(Object(s.x)(this._animationFrameRequest),this._renderCallbacks=[])},e.prototype.render=function(t){this._renderRequested=!0,t&&this._renderCallbacks.push(t)},e.prototype._tick=function(){var t=this;if(this.zoom.tick(),this._renderRequested){var e=this._renderCallbacks.slice(0);this._renderCallbacks=[],this._render().then(function(){e.forEach(function(t){return t()}),t._animationFrameRequest=Object(s.z)(t._tick)}),this._renderRequested=!1}else this._animationFrameRequest=Object(s.z)(this._tick)},e.prototype._render=function(){var t=this;return this._ready?(this._applyOffset(),this._sdk.render().then(function(){t._lastOutputBounds=t._sdk.getSprite().getBounds(),t.emit("rendered")}).catch(function(e){s.h.error(t.constructor.name,"An error occurred while rendering: "+e.message),s.h.printError(e),t.emit("render-error",e)})):s.j.resolve()},e.prototype.reset=function(){this._sdk.reset(),this.history.reset(),this.operations.reset(),this.features.reset(),this.emit("reset")},e.prototype.dispose=function(){this.stop(),this._sdk.dispose()},e.prototype.isReady=function(){return this._ready},e.prototype.getRenderer=function(){return this._sdk.getRenderer()},e.prototype.getSDK=function(){return this._sdk},e.prototype.getInputDimensions=function(){return this._sdk.getInputDimensions()},e.prototype.getPadding=function(){return this._padding},e.prototype.setPadding=function(t){this._padding=t||[0,0,0,0]},e.prototype.getImage=function(){return this._options.editor.image},e.prototype.getOptions=function(){return this._options},e.prototype.getUI=function(){return this._ui},e.prototype.broadcastScale=function(t){var e=this;["sprite"].forEach(function(n){var o=e.operations.get(n);o&&o.scale(t)})},e.prototype.broadcastTransform=function(t,e){var n=this,o=new s.p.Operations.TransformOperation.TransformChange(t,e);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach(function(t){var e=n.operations.get(t);e&&e.transform(o)})},e.prototype.broadcastFlip=function(t){var e=this;["mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(n){var o=e.operations.get(n);o&&o.flip(t)})},e.prototype.broadcastRotate=function(t){var e=this;["transform","mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(n){var o=e.operations.get(n);o&&o.rotate(t)})},e.prototype._clampOffset=function(t){var e=this.getCanvasDimensions(),n=this._sdk.getOutputDimensions(!1),o=e.clone().subtract(n).divide(2).clamp(null,new s.v(0,0)),i=n.clone().subtract(e).divide(2).clamp(new s.v(0,0),null);return t.clone().clamp(o,i).round()},e.prototype.getSnapshot=function(){return{operations:this.operations.getSnapshot(),zoom:this.zoom.getSnapshot(),canvasDimensions:this.getCanvasDimensions()}},e.prototype.restoreSnapshot=function(t){this.operations.restoreSnapshot(t.operations),this.zoom.restoreSnapshot(t.zoom),t.canvasDimensions.equals(this.getCanvasDimensions())||this.zoom.auto(!0,!0)},e.prototype.getMediator=function(){return this._mediator},e.prototype.addSticker=function(t,e){var n=this._options.editor,o=a.Utils.getDeepProperty(n,["controlsOptions","sticker","categories"]);if(!o)return!1;var i=a.Utils.getDeepProperty(o,[function(e){return e.filter(function(e){return e.identifier===t})[0]},"stickers"]);return!!i&&(i.push(e),this._mediator.emit(s.d.EVENTS.ADDED_STICKER,o),!0)},m(e,[{key:"offset",get:function(){return this._offset},set:function(t){this._offset=this._clampOffset(t)}},{key:"isDraggable",get:function(){var t=this.zoom.targetLevel>this.zoom.defaultLevel;return this.features.isEnabled("drag")&&t}},{key:"isShallow",get:function(){return this._shallow}}]),e}(s.e);e.a=_},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=2*Math.PI,s=function(){function t(e){o(this,t),this._editor=e,this._serializeOperations=this._serializeOperations.bind(this)}return t.prototype.serialize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=i.q.defaults(t,{image:!0});var e={version:this.constructor.version};return this._serializeInputImage(e).then(this._serializeOperations)},t.prototype._serializeInputImage=function(t){var e=this._editor.getImage(),n=e.width,o=e.height;if(!this._options.image)return t.inputImage={width:n,height:o},Promise.resolve(t);var r=i.q.createCanvas();r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0);var s=r.toDataURL(i.f.PNG);return t.inputImage={type:i.f.PNG,data:s.replace(/^data:image\/(.*?);base64,/,""),width:n,height:o},Promise.resolve(t)},t.prototype._serializeOperations=function(t){var e=this,n=[];return this._editor.operations.getStack().forEach(function(t){var o=e._serializeOperation(t,n);o&&n.push(o)}),t.operations=n.filter(function(t){return t}),Promise.resolve(t)},t.prototype._serializeOperation=function(t,e){switch(t.constructor.identifier){case"transform":return this._serializeTransformOperation(t);case"orientation":return this._serializeOrientationOperation(t);case"filter":return this._serializeFilterOperation(t);case"adjustments":return this._serializeAdjustmentsOperation(t);case"sprite":return this._serializeSpriteOperation(t,e);case"radial-focus":return this._serializeRadialFocusOperation(t);case"mirrored-focus":return this._serializeLinearFocusOperation(t);default:i.h.warn("Unable to serialize operation of type "+t.constructor.identifier)}},t.prototype._serializeTransformOperation=function(t){var e=t.serializeOptions(["start","end","rotation"],!0);return e.rotation=(e.rotation+r)%r,{type:"crop",options:e}},t.prototype._serializeOrientationOperation=function(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}},t.prototype._serializeFilterOperation=function(t){return"identity"===t.getIdentifier()?null:{type:"filter",options:{intensity:t.getIntensity(),name:t.getIdentifier()}}},t.prototype._serializeAdjustmentsOperation=function(t){var e=t.availableOptions,n=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],o={};return n.forEach(function(n){var i=e[n],r=t.getOption(n),s=i.minValue,a=i.midValue,l=i.maxValue;o[n]=r<=a?(r-s)/(a-s)-1:(r-a)/(l-a)}),{type:"adjustments",options:o}},t.prototype._serializeSpriteOperation=function(t,e){var n=this,o=e.filter(function(t){return"sprite"===t.type}),i=void 0,r=!0;if(o.length?(i=o.pop(),r=!1):i={type:"sprite",options:{sprites:[]}},t.getSprites().forEach(function(e){var o=null;e instanceof t.constructor.StickerSprite?o=n._serializeSticker(t,e):e instanceof t.constructor.TextSprite?o=n._serializeText(t,e):e instanceof t.constructor.BrushSprite&&(o=n._serializeBrush(t,e)),o&&i.options.sprites.push(o)}),r)return i},t.prototype._serializeSticker=function(t,e){var n=e.getAdjustments(),o=e.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);o.name=o.identifier,delete o.identifier,o.rotation=(o.rotation+r)%r;var i=n.availableOptions;return o.adjustments={brightness:n.getBrightness()-i.brightness.default,saturation:n.getSaturation()-i.saturation.default,contrast:n.getContrast()-i.contrast.default},{type:"sticker",options:o}},t.prototype._serializeText=function(t,e){var n=e.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return n.rotation=(n.rotation+r)%r,{type:"text",options:n}},t.prototype._serializeBrush=function(t,e){var n=this;return{type:"brush",options:{paths:e.getPaths().map(function(t){return n._serializePath(t)})}}},t.prototype._serializePath=function(t){var e=t.getBrush().serializeOptions(["color","size"],!0);return e.points=t.getControlPoints().map(function(t){return t.getPosition().toObject()}),e},t.prototype._serializeRadialFocusOperation=function(t){return{type:"focus",options:{type:"radial",options:t.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}},t.prototype._serializeLinearFocusOperation=function(t){return{type:"focus",options:{type:"linear",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}},t.prototype._getInputDimensionsForOperation=function(t){var e=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(o){o===t&&(e=!0),e||(n=o.getNewDimensions(n))}),n},t}();e.a=s,s.version="1.0.0"},function(t,e,n){"use strict";function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(0),a=n(36),l=n(13),c=n(37),u=n(38),p=n(18),h=void 0;void 0!==s.p.Operations.SpriteOperation&&(h=s.p.Operations.SpriteOperation.BrushSprite);var f=function(){function t(e,n){r(this,t),this._editor=e,this._ui=this._editor.getUI(),this._data=n,this._filterManager=new a.a(this._ui,this._getOptions("filter")),this._stickerManager=new l.a(this._ui,this._getOptions("sticker")),this._brushManager=new c.a(this._ui,this._getOptions("brush")),this._fontManager=new u.a(this._ui,this._getOptions("text"))}return t.prototype._getOptions=function(t){var e=this._editor.controls,n={};e&&e.get(t)&&(n=e.get(t).defaultOptions);var o=this._editor.getOptions();return s.q.deepDefaults({},o.editor.controlsOptions[t]||{},n)},t.prototype.deserialize=function(){var t=this;return this._validateVersion().then(function(){return t._deserializeInputImage()}).then(function(){return t._deserializeOperations()})},t.prototype._validateVersion=function(){return this._data.version!==this.constructor.version?Promise.reject(new Error("Invalid version "+this._data.version+", expected "+this.constructor.version)):Promise.resolve()},t.prototype._deserializeInputImage=function(){var t=this;return new Promise(function(e,n){var o=t._data.inputImage,i=o.data,r=o.type;if(i&&r){var s=new window.Image;s.addEventListener("load",function(){t._editor.setImage(s),e()}),s.src="data:"+r+";base64,"+i}else e()})},t.prototype._deserializeOperations=function(){var t=this,e=this._data.operations.map(function(e){return t._deserializeOperation(e).then(function(e){return e&&t._editor.getMediator().emit(s.d.EVENTS.OPERATION_UPDATED,e),e})});return Promise.all(e)},t.prototype._deserializeOperation=function(t){switch(t.type){case"crop":return this._deserializeCropOperation(t);case"orientation":return this._deserializeOrientationOperation(t);case"filter":return this._deserializeFilterOperation(t);case"adjustments":return this._deserializeAdjustmentsOperation(t);case"sprite":return this._deserializeSpriteOperation(t);case"focus":return this._deserializeFocusOperation(t)}},t.prototype._deserializeCropOperation=function(t){var e=t.options,n=e.rotation,o=s.v.fromObject(e.start),i=s.v.fromObject(e.end);n>Math.PI&&(n-=2*Math.PI);var r={start:o,end:i};void 0!==n&&(r.rotation=n);var a=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(a,r),a.set(r),Promise.resolve(a)},t.prototype._deserializeOrientationOperation=function(t){var e=t.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(e),Promise.resolve(n)):Promise.resolve()},t.prototype._deserializeFilterOperation=function(t){var e=this,n=t.options;return this._filterManager.getFilterByIdentifier(n.name)?this._filterManager.instantiateFilterWithIdentifier(n.name).then(function(t){var o=e._editor.operations.getOrCreate("filter");return o.set({identifier:n.name,filter:t,intensity:n.intensity}),o}):(s.h.warn("Deserializer","Unknown filter `"+n.name+"`"),Promise.resolve())},t.prototype._deserializeAdjustmentsOperation=function(t){var e=s.p.Operations.AdjustmentsOperation,n=t.options,o=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],i={};return o.forEach(function(t){if(void 0!==n[t]){var o=e.prototype.availableOptions[t],r=o.minValue,s=o.midValue,a=o.maxValue,l=n[t];l=l<0?s+(s-r)*l:s+(a-s)*l,i[t]=l}}),Promise.resolve(this._editor.operations.getOrCreate("adjustments",i))},t.prototype._deserializeSpriteOperation=function(t){var e=this,n=t.options,o=this._editor.operations.getOrCreate("sprite");if(!o)return Promise.resolve();var i=n.sprites.map(function(t){return e._deserializeSprite(o,t)}).filter(function(t){return t});return Promise.all(i).then(function(t){return o.setSprites(t.filter(function(t){return t})),o})},t.prototype._deserializeSprite=function(t,e){switch(e.type){case"sticker":return this._deserializeSticker(t,e);case"text":return this._deserializeText(t,e);case"brush":return this._deserializeBrush(t,e)}},t.prototype._deserializeSticker=function(t,e){var n=this,o=s.p.Operations.SpriteOperation,i=e.options,r=this._stickerManager.getStickerByIdentifier(i.name),a=this._stickerManager.getURLForSticker(r);return r?new Promise(function(e,r){var l=new window.Image;l.addEventListener("load",function(){var n=o.StickerSprite.prototype.availableOptions.adjustments.structure,r=i.rotation,a=i.flipHorizontally,c=i.flipVertically,u={identifier:i.name,image:l,position:s.v.fromObject(i.position),dimensions:s.v.fromObject(i.dimensions),rotation:r,flipHorizontally:a,flipVertically:c,adjustments:{}};void 0!==i.adjustments&&["brightness","contrast","saturation"].forEach(function(t){void 0!==i.adjustments[t]&&(u.adjustments[t]=i.adjustments[t]+n[t].default)}),e(t.createSticker(u))}),l.crossOrigin="Anonymous",l.src=n._editor.getUI().getAssetPath(a)}):(s.h.warn("Deserializer","Unknown sticker '"+i.name+"'. Skipping sprite."),Promise.resolve())},t.prototype._deserializeText=function(t,e){var n=e.options,o=n.fontSize,i=n.lineHeight,r=n.fontFamily,a=n.fontWeight,l=n.alignment,c=n.rotation,u=n.maxWidth,h=n.color,f=n.backgroundColor,d=new p.a(this._ui),m=this._fontManager.getFontByFontFamily(r);return m||(m=this._fontManager.getDefaultFont()),d.setFonts([m]),d.load().then(function(){return t.createText({fontSize:o,lineHeight:i,fontFamily:r,fontWeight:a,alignment:l,rotation:c,maxWidth:u,text:n.text,color:s.c.fromArray(h),backgroundColor:s.c.fromArray(f),position:s.v.fromObject(n.position)})})},t.prototype._deserializeBrush=function(t,e){var n=this,o=e.options,i=o.paths,r=t.createBrush();return i.forEach(function(t){n._deserializeBrushPath(r,t)}),Promise.resolve(r)},t.prototype._deserializeBrushPath=function(t,e){var n=e.points,o=this._createBrushForPath(e),i=t.createPath(o);i.setClosed(!0),n.forEach(function(t){i.addControlPoint(s.v.fromObject(t))})},t.prototype._createBrushForPath=function(t){var e=t.color,n=t.size,a=s.c.fromArray(e),l={color:a,size:n},c=this._brushManager.getFirstBrush();if(c.prototype&&c.prototype instanceof h){return new c(l)}var u=s.q.extend({},c);delete u.image;var p=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e}(h);return p.identifier=c.identifier,new p(s.q.extend({},u,l))},t.prototype._deserializeFocusOperation=function(t){var e=t.options.options;switch(t.options.type){case"radial":var n=e.position,o=e.radius,i=e.gradientRadius,r=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:s.v.fromObject(n),radius:o,gradientRadius:i,blurRadius:r}));case"linear":var a=e.start,l=e.end,c=e.size,u=e.gradientSize,p=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:s.v.fromObject(a),end:s.v.fromObject(l),size:c,gradientSize:u,blurRadius:p}))}},t.prototype._getInputDimensionsForOperation=function(t){var e=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(o){o===t&&(e=!0),e||(n=o.getNewDimensions(n))}),n},t}();e.a=f,f.version="1.0.0"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=function(){function t(e,n){o(this,t),this._ui=e,this._options=n,this._categoriesById={},this._filtersByIdentifier={identity:i.p.Operations.FilterOperation.Filters.IdentityFilter},this._categories=i.r.DEFAULTS.FILTERS.slice(0),this._initCategories()}return t.prototype.instantiateFilterWithIdentifier=function(t){var e=this,n=this.getFilterByIdentifier(t);if(!n)return Promise.reject(new Error("Unknown filter with identifier `"+t+"`!"));if(n.prototype instanceof i.p.Operations.FilterOperation.Filter)return Promise.resolve(new n);var o=n.lutImage,r=n.resolution,s=n.horizontalTileCount,a=n.verticalTileCount,l=void 0;this._ui.getPreloader&&(l=this._ui.getPreloader().getAsset(o));var c=void 0;return c=l?Promise.resolve(l):i.g.load(this._ui.getAssetPath(o)),c.then(function(t){return i.g.load(e._ui.getAssetPath(o)).then(function(t){return new i.p.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:t,resolution:r,horizontalTileCount:s,verticalTileCount:a})})})},t.prototype._initCategories=function(){var t=this;if(this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=i.u.mergeCategories(this._categories,this._options.categories,"filters")),this._options.availableFilters){var e=[];this._categories.forEach(function(n){var o=n.filters.filter(function(e){return-1!==t._options.availableFilters.indexOf(e.identifier)});o.length>0&&e.push({identifier:n.identifier,defaultName:n.defaultName,filters:o})}),this._categories=e}var n={identifier:"all",defaultName:"All",filters:this._categories.map(function(t){return t.filters}).reduce(function(t,e){return t.concat(e)})};this._categories.unshift(n),this._categoriesById.all=n,this._categories.forEach(function(e){t._categoriesById[e.identifier]=e}),n.filters.forEach(function(e){t._filtersByIdentifier[e.identifier]=e})},t.prototype.getFiltersForCategory=function(t){if(!this._categoriesById[t])throw new Error("Unknown filter category '"+t+"'");return this._categoriesById[t].filters},t.prototype.getFilterByIdentifier=function(t){return this._filtersByIdentifier[t]},t.prototype.getCategories=function(){return this._categories},t.prototype.getCategoryByIdentifier=function(t){return this._categoriesById[t]},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=function(){function t(e,n){o(this,t),this._ui=e,this._options=n,this._brushes=[],this._brushesById={},this._addBrushes(i.d.DEFAULTS.BRUSHES);var r=this._options,s=r.brushes,a=r.replaceBrushes,l=r.availableBrushes;this._options.brushes&&this._addBrushes(s,a),l&&(this._brushes=this._brushes.filter(function(t){return-1!==l.indexOf(t.identifier)}))}return t.prototype._addBrushes=function(t,e){var n=this;e&&(this._brushes=[],this._brushesById={}),t.forEach(function(t){n._brushes.push(t),n._brushesById[t.identifier]=t})},t.prototype.getBrushByIdentifier=function(t){return this._brushesById[t]},t.prototype.getBrushes=function(){return this._brushes},t.prototype.getFirstBrush=function(){return this._brushes[0]},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=n(101),s=n(16),a=n(39),l=function(){function t(e,n){o(this,t),this._ui=e,this._options=n,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}return t.prototype._initFonts=function(){var t=this,e=this._options,n=e.fonts,o=e.replaceFonts,l=e.availableVariations,c=i.d.DEFAULTS.FONTS;c=o?n:c.concat(n||[]);var u=void 0;c=c.map(function(e){var n=e.fontFamily,o=e.variations;if(l&&(o=o.filter(function(t){return-1!==l.indexOf(t.identifier)})),0===o.length)return null;var i=new r.a({fontFamily:n});return o=o.map(function(e){var o=new a.a(e);return o.setFontFamily(n),o.setFont(i),e.default&&!u&&(u=o),null==o.getTextMetrics()&&s.a.warn("Missing font metrics for "+o.getIdentifier()+". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details."),t._variationsByIdentifier[o.getIdentifier()]=o,o}),i.setVariations(o),t._fontsByFontFamily[n]=i,i}).filter(function(t){return t}),u||(u=c[0].getVariations()[0]),this._defaultVariation=u,this._fonts=c},t.prototype.getFonts=function(){return this._fonts},t.prototype.getFontByFontFamily=function(t){return this._fontsByFontFamily[t]},t.prototype.getVariationByIdentifier=function(t){return this._variationsByIdentifier[t]},t.prototype.getDefaultVariation=function(){return this._defaultVariation},t}();e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),{100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"}),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.getLabel=function(){var t=a[this._options.fontWeight];switch(this._options.fontStyle){case"italic":t+=" Italic"}return t},e}(s.Configurable);e.a=l,l.prototype.availableOptions={identifier:{type:s.OptionType.STRING,required:!0},fontFamily:{type:s.OptionType.STRING,required:!0},fontWeight:{type:s.OptionType.ALL,default:400},fontStyle:{type:s.OptionType.STRING,default:"normal"},textMetrics:{type:s.OptionType.OBJECT,default:null},provider:{type:s.OptionType.STRING,available:["google","file"]},filePath:{type:s.OptionType.STRING},default:{type:s.OptionType.BOOLEAN,default:!1},font:{type:s.OptionType.OBJECT}}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(103),r=n(2),s=(n.n(r),function(){function t(e){o(this,t),this._ui=e,this._fonts=[],this._observers=[]}return t.prototype.add=function(t){this._fonts.push(t)},t.prototype.load=function(){var t=this;return 0===this._fonts.length?Promise.resolve():(this._observers=[],this._fonts.forEach(function(e){t._observers.push(new i.a(e))}),r.Utils.executePromises(this._observers.map(function(t){return t.observe()})))},t.prototype.dispose=function(){this._observers.forEach(function(t){return t.dispose()})},t}());e.a=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(34),a=2*Math.PI,l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._serializeTransformOperation=function(t){var e=t.serializeOptions(["start","end","rotation","textureScale"],!0);return e.rotation=(e.rotation+a)%a,1!==e.textureScale&&(e.dimensions=t.getNewDimensions(t.getInputDimensions(!1))),delete e.textureScale,{type:"crop",options:e}},e}(s.a);e.a=l,l.version="1.0.1"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(35),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._deserializeOperation=function(e){return"selective-blur"===e.type?this._deserializeSelectiveBlurOperation(e):t.prototype._deserializeOperation.call(this,e)},e.prototype._deserializeCropOperation=function(t){var e=t.options,n=e.rotation,o=s.v.fromObject(e.start),i=s.v.fromObject(e.end),r=e.dimensions?s.v.fromObject(e.dimensions):null;n>Math.PI&&(n-=2*Math.PI);var a={start:o,end:i};void 0!==n&&(a.rotation=n);var l=this._editor.operations.getOrCreate("transform");if(!l)return Promise.resolve();if(this._editor.broadcastTransform(l,a),l.set(a),r){var c=i.clone().subtract(o),u=l.getInputDimensions(!1).multiply(c);l.setTextureScale(r.x/u.x)}return Promise.resolve(l)},e}(a.a);e.a=l,l.version="1.0.1"},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i,r=n(0),s=r.p.Engine.Filters.OverlayFilter;e.a=(i={},o(i,s.BLEND_MODES.NORMAL,"normal"),o(i,s.BLEND_MODES.OVERLAY,"overlay"),o(i,s.BLEND_MODES.HARD_LIGHT,"hard light"),o(i,s.BLEND_MODES.SOFT_LIGHT,"soft light"),o(i,s.BLEND_MODES.MULTIPLY,"multiply"),o(i,s.BLEND_MODES.DARKEN,"darken"),o(i,s.BLEND_MODES.LIGHTEN,"lighten"),o(i,s.BLEND_MODES.SCREEN,"screen"),o(i,s.BLEND_MODES.COLOR_BURN,"color burn"),i)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=function(){function t(e,n){o(this,t),this._ui=e,this._options=n,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(i.r.DEFAULTS.FRAME_CATEGORIES);var r=this._options,s=r.categories,a=r.replaceCategories;this._options.categories?this._addCategories(s,a):this._updateAllCategory()}return t.prototype._addCategories=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=n?t.slice(0):i.u.mergeCategories(this._categories,t,"frames"),this._categoriesById={},this._categories.forEach(function(t){e._categoriesById[t.identifier]=t});var o=this._options.availableFrames;o&&this._categories.forEach(function(t){t.frames=t.frames.filter(function(t){return-1!==o.indexOf(t.identifier)})}),this._categories.forEach(function(t){t.frames.forEach(function(t){e._framesById[t.identifier]=t})}),this._updateAllCategory()},t.prototype._updateAllCategory=function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(function(t){return t.frames}).reduce(function(t,e){return t.concat(e)},[])},this._categoriesById.all=this._allCategory},t.prototype.getFramesForCategory=function(t){if(!this._categoriesById[t])throw new Error("Unknown frame category '"+t+"'");return this._categoriesById[t].frames},t.prototype.getFrameByIdentifier=function(t){return this._framesById[t]},t.prototype.getCategories=function(){return this._categories},t.prototype.getCategory=function(t){return this._categoriesById[t]},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=function(){function t(e,n){var r=this;o(this,t),this._ui=e,this._options=n,this._overlays=i.r.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={},n.overlays&&(n.replaceOverlays?this._overlays=n.overlays:this._overlays=this._overlays.concat(n.overlays)),n.availableOverlays&&(this._overlays=this._overlays.filter(function(t){return-1!==n.availableOverlays.indexOf(t.identifier)})),this._overlays.forEach(function(t){r._overlaysByIdentifier[t.identifier]=t})}return t.prototype.getOverlays=function(){return this._overlays},t.prototype.getOverlayByIdentifier=function(t){return this._overlaysByIdentifier[t]},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=s.p.OptionType,l=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var a=i(this,t.call(this,r));return a._loaded=!1,a._loading=!1,a._ui=n,a._frame=s.p.Utils.deepClone(a._options),a}return r(e,t),e.prototype.load=function(){var t=this;if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var e=this._frame.imageGroups,n=[];return["top","left","right","bottom"].forEach(function(o){if(o in e){var i=e[o];["start","mid","end"].forEach(function(e){e in i&&n.push(t._loadPart(o,e))})}}),Promise.all(n).then(function(){t._loaded=!0,t._loading=!1}).catch(function(e){t._loaded=!1,t._loading=!1})},e.prototype._loadPart=function(t,e){var n=this;return new Promise(function(o,i){var r=n._frame.imageGroups,s=r[t][e],a=s;"string"!=typeof s&&"image"in s&&(a=s.image);var l=new window.Image;l.addEventListener("load",function(){"string"!=typeof s?n._frame.imageGroups[t][e].image=l:n._frame.imageGroups[t][e]=l,o(l)}),l.addEventListener("error",function(){i(new Error("Failed to load image at "+a))}),l.src=n._ui.getAssetPath(a)})},e.prototype.getFrame=function(){return this._frame},e}(s.p.Configurable);e.a=l,l.prototype.availableOptions={identifier:{type:a.STRING,required:!0},defaultName:{type:a.STRING},thumbnail:{type:a.STRING},tintable:{type:a.BOOLEAN,default:!1},layoutMode:{type:a.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:a.OBJECT,required:!0}}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=function(){function t(e){o(this,t),this._options=e,this._categoriesById={},this._categories=[],this._initCategories()}return t.prototype._initCategories=function(){var t=this,e=this._options,n=e.replaceCategories,o=e.categories,r=i.d.DEFAULTS.TRANSFORM_RATIO_CATEGORIES;this._categories=o?n?i.u.cloneCategories(o,"ratios"):i.u.mergeCategories(r,o,"ratios"):i.u.cloneCategories(r,"ratios"),this._categoriesById={},this._categories.forEach(function(e){t._categoriesById[e.name]=e})},t.prototype.getCategories=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._categories.slice(0);if(t){var n={name:"all",ratios:this._categories.map(function(t){return t.ratios}).reduce(function(t,e){return t.concat(e)})};e.unshift(n)}return e},t.prototype.getRatiosForCategory=function(t){var e=this._options.availableRatios;return e?t.ratios.filter(function(t){return-1!==e.indexOf(t.identifier)}):t.ratios},t.prototype.hasRatioValue=function(t){var e=this,n=!1;return this._categories.forEach(function(o){e.getRatiosForCategory(o).forEach(function(e){if(e.ratio)"*"===e.ratio?n=!0:e.ratio===t&&(n=!0);else if(e.dimension){var o=e.dimension.y/e.dimension.x;o===t&&(n=!0)}})}),n},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=n(14),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t){function e(){i(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=r(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onBackButtonClick"),a._needsStyleFixes=!0,a.state={backButton:!1},a}return s(e,t),e.prototype._onBackButtonClick=function(){},e.prototype.setSharedState=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.prototype.setSharedState.call(this,e,n),o&&this.props.controls.updateSharedState()},e.prototype.fixStyles=function(){var t=this;return a.u.Browser.isIElte(10)?(this._table&&(this._table.style.height="100%"),this._container&&(this._container.style.height="100%"),new Promise(function(e){Object(a.z)(function(){if(t._root){var n=t._root.offsetHeight;if(t._container&&t._header){var o=t._header.offsetHeight;t._container.style.height=n-o+"px"}t._table&&(t._table.style.height=n+"px"),t._scrollbar&&t._scrollbar.update(),e()}},1e3)})):(this._scrollbar&&this._scrollbar.update(),Promise.resolve())},e.prototype._getRootProps=function(){return{}},e.prototype._renderContent=function(){return a.l.createElement("div",null)},e.prototype.render=function(){var t=this,e=this.constructor.RootElement,n=this._getRootProps(),i=o(n,[]),r=this.context.screen.state.currentControl,s=null===r,l={backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/back.png",!0)+"')"};return a.l.createElement(h,{innerRef:function(e){i.innerRef&&i.innerRef(e),t._root=e}},a.l.createElement(f,{innerRef:function(e){t._table=e}},!s&&a.l.createElement(d,{innerRef:function(e){t._header=e}},this.state.backButton&&a.l.createElement(g,{style:l,onClick:this._onBackButtonClick}),a.l.createElement(_,null,this._t("editor.controls."+r+".title"))),a.l.createElement(m,null,a.l.createElement(e,c({},i,{innerRef:function(e){t._container=e},className:void 0}),this._renderContent()))))},u(e,[{key:"container",get:function(){return this._container}}]),e}(l.a);p.contextTypes=l.a.contextTypes,p.propTypes={options:a.k.object},e.a=p;var h=a.w.div("ku10ek","ControlsComponentRoot"),f=a.w.div("rfecls","ControlsComponentTable"),d=a.w.div("1tkmkv6","ControlsComponentHeader"),m=a.w.div("vkb8c9","RootElementContainer");p.RootElement=a.w.div("rfecls",{withBorderTop:"120drhm"},"ControlsComponent");var _=a.w.div("1ru8sfa","ControlsComponentTitle"),g=a.w.button("gyx1pn","BackButton")},function(t,e,n){"use strict";function o(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.render=function(){var t=this.constructor.RootElement,e=o(this.props,[]);return a.l.createElement(t,e)},e}(a.b);l.contextTypes=a.b.contextTypes,e.a=l,l.RootElement=a.w.li("11o197p",{disabled:"16s6vgr"},"CanvasHeaderButtonComponent")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(4),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onKnobDragStart","_onKnobDrag","_onKnobDragStop","_onBarDragStart","_onBarDrag","_onBarDragStop"),a.state={value:a.props.value||0,sliderPosition:0,foregroundLeft:0,foregroundWidth:0},a}return r(e,t),e.prototype.componentDidMount=function(){var t=this;Object(s.z)(function(){t._setValue(t.state.value,!1)})},e.prototype.componentWillReceiveProps=function(t){t.value!==this.state.value&&this._setValue(t.value,!1)},e.prototype._onKnobDragStart=function(t){this._previousValue=this.state.value,this._initialSliderPosition=this.state.sliderPosition,this._initialPosition=t},e.prototype._onKnobDrag=function(t){var e=this._bar.offsetWidth,n=this._initialSliderPosition+t.x;n=Math.max(0,Math.min(n,e));var o=n/e,i=this.props.minValue+(this.props.maxValue-this.props.minValue)*o;this._setValue(i)},e.prototype._onKnobDragStop=function(){this._setValue(this.state.value,!0,!0)},e.prototype._onBarDragStart=function(t){this._previousValue=this.state.value,this._initialPosition=t.clone();var e=this._bar.offsetWidth,n=t.x/e,o=this.props.minValue+(this.props.maxValue-this.props.minValue)*n;this._setValue(o)},e.prototype._onBarDrag=function(t){var e=this._initialPosition.clone().add(t),n=this._bar.offsetWidth,o=e.x/n,i=this.props.minValue+(this.props.maxValue-this.props.minValue)*o;i=Math.max(this.props.minValue,Math.min(this.props.maxValue,i)),this._setValue(i)},e.prototype._onBarDragStop=function(){this._setValue(this.state.value,!0,!0)},e.prototype._getKnobStyle=function(){return{left:this.state.sliderPosition}},e.prototype._getForegroundStyle=function(){return{left:this.state.foregroundLeft,width:this.state.foregroundWidth}},e.prototype._setValue=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.props,i=o.minValue,r=o.maxValue,s=(t-i)/(r-i),a=this._bar.offsetWidth,l=a*s,c=s*a,u=0;this.props.middleDot&&(c=Math.abs(s-.5)*a,u=s<.5?.5*a-c:"50%"),this.setState({value:t,sliderPosition:l,foregroundWidth:c,foregroundLeft:u}),e&&this.props.onChange&&this.props.onChange(t,this._previousValue,n)},e.prototype._buildValue=function(t){return t%1!=0&&(t=t.toFixed(2)),this.props.positiveValuePrefix&&t>=0&&(t=""+this.props.positiveValuePrefix+t),this.props.valueUnit&&(t+=this.props.valueUnit),t},e.prototype.render=function(){var t=this,e={style:this._getForegroundStyle()};return s.l.createElement(c,{disabled:this.props.disabled},s.l.createElement(a.a,{onStart:this._onBarDragStart,onDrag:this._onBarDrag,onStop:this._onBarDragStop,disabled:this.props.disabled},s.l.createElement(_,null,s.l.createElement(u,{ref:"foo",innerRef:function(e){t._bar=e}},s.l.createElement("div",null,s.l.createElement(h,{darkBackground:this.props.darkBackground}),s.l.createElement(f,e),s.l.createElement(a.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag,onStop:this._onKnobDragStop,disabled:this.props.disabled},s.l.createElement(m,{style:this._getKnobStyle(),className:void 0},s.l.createElement(d,{idle:0===this.state.value}))))))))},e}(s.b);l.propTypes={value:s.k.number.isRequired,minValue:s.k.number.isRequired,maxValue:s.k.number.isRequired,middleDot:s.k.bool,onChange:s.k.func,positiveValuePrefix:s.k.string,valueUnit:s.k.string,label:s.k.string},l.contextTypes=s.b.contextTypes,e.a=l;var c=s.w.div("jc3w8i",{disabled:"1voy7lm"},"Slider"),u=s.w.div("1pvw1zw","Bar"),p=s.w.div("8gacw5","BarSection"),h=Object(s.w)(p)("120drhm",{darkBackground:"120drhm"},"BarBackgroundSection"),f=Object(s.w)(p)("1apine2","BarForegroundSection"),d=s.w.div("8i3bvo",{idle:"6eg4rp"},"Knob"),m=s.w.div("xsaflu","KnobTouchTarget"),_=s.w.div("1ssoezr","BarContainer")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ControlGroupList",function(){return i}),n.d(e,"ControlGroup",function(){return r}),n.d(e,"ControlGroupTitle",function(){return s});var o=n(0),i=o.w.css("1f3fuxn","ControlGroupList"),r=o.w.css("1bxndxk","ControlGroup"),s=o.w.css("12fzsea","ControlGroupTitle")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(24),l=n(15),c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._renderRightPart=function(){var t=this,e=[];return this.props.inputClassName&&e.push(this.props.inputClassName),s.l.createElement(u,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:e.join(" "),innerRef:function(e){t._input=e},disabled:this.props.disabled})},e.prototype.render=function(){var t=this.props,e=t.inputLabel,n=t.className,o=t.disabled,i=t.styles;return s.l.createElement(p,{styles:i,className:n,disabled:o},s.l.createElement(h,null,s.l.createElement(f,null,e&&s.l.createElement(d,null,e||" "),this._renderRightPart())))},e}(a.a);c.contextTypes=a.a.contextTypes,e.a=c;var u=Object(s.w)(l.a)("12dz026","InputField"),p=Object(s.w)(a.a.RootElement)("9ngfap","ColorComponentInput"),h=s.w.div("15u7gri","Row"),f=s.w.div("1hy9z1m",{bottomAligned:"17xdalt"},"Column"),d=s.w.div("szltve","Title")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.PlainControlItem),l=s.ControlsStyles.PlainControlItemBackground,c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onWebcamClick","_onDropZoneClick","_onDropZoneDragEnter","_onDropZoneDragLeave","_onDropZoneDragOver","_onDropZoneDrop","_onImage"),a._dragCounter=0,a.state={dropZoneHovered:!1},a}return r(e,t),e.prototype._onWebcamClick=function(){this.props.onWebcamActivated&&this.props.onWebcamActivated()},e.prototype._onImage=function(t){this.props.onImage&&this.props.onImage(t)},e.prototype._onDropZoneClick=function(){this.refs.upload.open()},e.prototype._onDropZoneDragEnter=function(t){t.preventDefault(),this._dragCounter++,this.setState({dropZoneHovered:!0})},e.prototype._onDropZoneDragLeave=function(t){t.preventDefault(),0===--this._dragCounter&&this.setState({dropZoneHovered:!1})},e.prototype._onDropZoneDragOver=function(t){t.preventDefault()},e.prototype._onDropZoneDrop=function(t){var e=this;t.stopPropagation(),t.preventDefault(),t=t.nativeEvent,t.returnValue=!1,this.setState({dropZoneHovered:!1},function(){if(t.target||t.dataTransfer){var n=t.target.files||t.dataTransfer.files;if(n&&!(n.length<=0))return n[0].type.match(/^image\//i)?void e._handleFile(n[0]):s.ModalManager.instance.displayError(e._t("errors.title"),e._t("errors.invalidFileType.text",{fileType:n[0].type}))}})},e.prototype._handleFile=function(t){var e=this,n=new window.FileReader;n.onload=function(){return function(t){var n=t.target.result,o=new window.Image;o.addEventListener("load",function(){e._onImage(o)}),o.addEventListener("error",function(t){return s.ModalManager.instance.displayError(e._t("errors.title"),e._t("errors.imageLoadingError.text"))}),o.src=n}}(),n.readAsDataURL(t)},e.prototype.render=function(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return s.React.createElement(u,null,s.React.createElement(s.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onImage}),s.React.createElement(p,null,s.React.createElement(h,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone")),!this.state.dropZoneHovered&&this.props.webcamEnabled&&s.React.createElement(f,{style:t,className:void 0,onClick:this._onWebcamClick})))},e}(s.BaseComponent);e.a=c;var u=Object(s.adonis)(a).li("fujban","Container"),p=Object(s.adonis)(l).div("17hsmc4","Background"),h=s.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),f=s.adonis.div("1y2fyfw","WebcamButton")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(3),r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,t),this._queue=[],this._pendingPromises=0,this._maxConcurrency=e,this._maxQueueLength=n,this._minDelay=r,this._tick=this._tick.bind(this),this._lastPromiseDone=Date.now(),this._running=!0,this._animationFrameRequest=null,Object(i.b)(this._tick)}return t.prototype._tick=function(){if(this._running){Date.now()-this._lastPromiseDone>this._minDelay&&this._pendingPromises<this._maxConcurrency&&this._queue.length&&this._dequeue(),this._animationFrameRequest=Object(i.b)(this._tick)}},t.prototype.add=function(t){var e=this;return new Promise(function(n,o){if(e._queue.length>=e._maxQueueLength)return o(new Error("Max queue length reached"));e._queue.push({fn:t,resolve:n,reject:o})})},t.prototype._promisify=function(t){return void 0!==t&&"function"==typeof t.then?t:Promise.resolve(t)},t.prototype._dequeue=function(){var t=this,e=this._queue.shift(),n=Date.now();this._pendingPromises++;try{this._promisify(e.fn()).then(function(o){t._lastPromiseDone=n,t._pendingPromises--,e.resolve(o)}).catch(function(o){t._lastPromiseDone=n,t._pendingPromises--,e.reject(o)})}catch(t){this._lastPromiseDone=n,this._pendingPromises--,e.reject(t)}return!0},t.prototype.dispose=function(){this._running=!1,this._animationFrameRequest&&Object(i.a)(this._animationFrameRequest)},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=n.n(s),l=n(180),c=n(182),u=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.mapOperationsToSharedState=function(t){var n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],e.FOCUS_OPERATIONS.map(function(e){return t.get(e)}).reduce(function(t,e){return t||e})),o=n&&n.getInputDimensions(!1),i=n?n.constructor.identifier:null,r=e.getItemByOperationIdentifier(i),s=r?r.identifier:"none";return{operation:n||null,inputDimensions:o,operationIdentifier:i,selectedFocus:s,selectedFocusItem:r,blurRadius:n?n.getBlurRadius():0,linearFocus:"linear-focus"===i?{controlPoint1:n.getControlPoint1(),controlPoint2:n.getControlPoint2()}:null,mirroredFocus:"mirrored-focus"===i?{start:n.getStart(),end:n.getEnd(),size:n.getSize(),gradientSize:n.getGradientSize()}:null,radialFocus:"radial-focus"===i?{position:n.getPosition(),radius:n.getRadius(),gradientRadius:n.getGradientRadius()}:null,setSelectedFocus:function(e){e.operationIdentifier!==i&&(i&&t.remove(i),e.operationIdentifier&&t.getOrCreate(e.operationIdentifier))},setBlurRadius:function(t){n&&n.setBlurRadius(t)},setControlPoint1:function(t){"linear-focus"===i&&n.setControlPoint1(t)},setControlPoint2:function(t){"linear-focus"===i&&n.setControlPoint2(t)},setStart:function(t){"mirrored-focus"===i&&n.setStart(t)},setEnd:function(t){"mirrored-focus"===i&&n.setEnd(t)},setPosition:function(t){"radial-focus"===i&&n.setPosition(t)},setRadius:function(t){"radial-focus"===i&&n.setRadius(t)},setOperationOptions:function(t){n&&n.set(t)}}},e.prototype._onEnter=function(){var t=this.context.editor;t.zoom.auto(!0,!1,function(){t.features.disable("zoom","drag")},!1)},e.prototype._onLeave=function(){this.context.editor.features.enable("zoom","drag")},e.getPreloadAssets=function(t){var e=[];return this.ITEMS.forEach(function(t){e.push(t.backgroundImagePath),e.push(t.activeBackgroundImagePath)}),e},e.isEnabled=function(t){return t.isToolAllowed("focus")&&t.isToolEnabled("focus")},e.getItemByIdentifier=function(t){return e.ITEMS.filter(function(e){return e.identifier===t})[0]},e.getItemByOperationIdentifier=function(t){return e.ITEMS.filter(function(e){return e.operationIdentifier===t})[0]},e}(s.BaseControls);u.clickAtPosition=s.BaseControls.clickAtPosition,u.ITEMS=[{identifier:"none",operationIdentifier:null,backgroundImagePath:"editor/controls/focus/none.png",activeBackgroundImagePath:"editor/controls/focus/none-active.png"},{identifier:"radial",operationIdentifier:"radial-focus",backgroundImagePath:"editor/controls/focus/radial.png",activeBackgroundImagePath:"editor/controls/focus/radial-active.png"},{identifier:"mirrored",operationIdentifier:"mirrored-focus",backgroundImagePath:"editor/controls/focus/mirrored.png",activeBackgroundImagePath:"editor/controls/focus/mirrored-active.png"},{identifier:"linear",operationIdentifier:"linear-focus",backgroundImagePath:"editor/controls/focus/linear.png",activeBackgroundImagePath:"editor/controls/focus/linear-active.png"},{identifier:"gaussian",operationIdentifier:"blur",backgroundImagePath:"editor/controls/focus/gaussian.png",activeBackgroundImagePath:"editor/controls/focus/gaussian-active.png"}],u.FOCUS_OPERATIONS=u.ITEMS.map(function(t){return t.operationIdentifier}).filter(function(t){return t}),u.identifier="focus",u.controlsComponent=l.a,u.canvasControlsComponent=c.a,u.iconPath="editor/controls/focus/icon.png",u.activeIconPath="editor/controls/focus/icon-active.png",u.defaultOptions={availableModes:null},u.requiredOperations=u.ITEMS.map(function(t){return t.operationIdentifier}).filter(function(t){return t}),u.updatableOperations=u.ITEMS.map(function(t){return t.operationIdentifier}).filter(function(t){return t}),u.switchToDefaultControlsOnRemoval=!1,a.a.Controls.FocusControls=u,e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.PlainControlItem),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._onStickerClick=function(t){this.props.onStickerClick&&this.props.onStickerClick(t)},e.prototype._renderListItems=function(){var t=this,e=this.props.stickers,n=void 0,o=this.sharedState.selectedSprite;return o&&(n=o.getIdentifier()),e.map(function(e){var o=s.StickerManager.getURLForSticker(e,"thumb"),i=t._getAssetPath(o),r={background:"url('"+i+"') no-repeat center center",backgroundSize:"contain"};return s.React.createElement(u,{selected:e.identifier===n,key:e.identifier,onClick:t._onStickerClick.bind(t,e),className:void 0,threeColumns:!0},s.React.createElement(p,{style:r}))})},e.prototype.render=function(){return s.React.createElement(c,null,this._renderListItems())},e}(s.SharedStateComponent);l.contextTypes=s.SharedStateComponent.contextTypes,e.a=l;var c=s.adonis.ul("18qztam","StickerList"),u=Object(s.adonis)(a).li("m4lnou","StickerListItem"),p=s.adonis.div("7r0ke8","StickerImage")},function(t,e,n){/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
var o=n(2),i=n(1);n(154),o.UI.DesktopUI=i,t.exports=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(84),l=n(22),c=n(10),u=n(50),p=n(29),h=n(122),f=n(123),d=n(18),m=n(124),_=n(125),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),y=function(t){return s.q.byteArrayToString(s.a.decode(t))};Object(h.a)(s.w,".pesdk-desktop-editor"),Object(f.a)(s.w);var v=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r._mediator=new s.e,r._fontLoader=new d.a(r),r._options=n,r._initOptions(),r._initLanguage(),r._initEvents(),r._disposed=!1,r._preloader=new m.a(r,r._options,r._mediator),s.h.setLevel(r._options.logLevel),r._v()&&r.run(),r}return r(e,t),e.prototype.run=function(){this._theme=this._options.theme,this._injectWebFonts(),this._options.container.style.position="relative",this._options.container.className+=" pesdk-desktop-editor",this._render()},e.prototype._render=function(){var t=s.l.createElement(a.a,{ui:this,mediator:this._mediator,options:this._options});if(this._options.renderReturnsComponent)return t;this._component=s.m.render(t,this._options.container)},e.prototype.export=function(){var t;return(t=this._component).export.apply(t,arguments)},e.prototype.serialize=function(){var t;return(t=this.getEditor()).serialize.apply(t,arguments)},e.prototype.deserialize=function(t){return this.getEditor().deserialize(t)},e.prototype.getEditor=function(){return this._component.getEditor()},e.prototype._initOptions=function(){this._options=s.q.defaults(this._options,{language:"en",logLevel:"warn",editor:{},assets:{},responsive:!1,preloader:!0,theme:p.a}),this._options.editor=s.q.defaults(this._options.editor||{},{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,preferredRenderer:"webgl",displayResizeMessage:!0,maxMegaPixels:{},enableDrag:!0,enableZoom:!0,displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,tools:["transform","filter","adjustments","focus","text","sticker","brush","frame","overlay","library"],controlsOrder:[["library"],["transform","filter","adjustments","focus"],["text","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],controlsOptions:{}}),this._options.editor.maxMegaPixels=s.q.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=s.q.defaults(this._options.editor.export||{},{format:"image/png",type:s.o.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.extensions=s.q.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=s.q.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null})},e.prototype._injectWebFonts=function(){var t=[];for(var e in this._theme.fonts){var n=this._theme.fonts[e],o=this.getAssetPath(n.src,!0,!0);t.push('\n        @font-face {\n          font-family: "'+n.fontFamily+"\";\n          src: url('"+o+"') format('woff');\n          font-weight: "+n.fontWeight+";\n          font-style: "+n.fontStyle+";\n        }\n      ")}var i="\n      /* Injected by PhotoEditorSDK */\n      "+t.join("\n")+"\n    ";s.w.global(i,!0)},e.prototype._v=function(){return!!this[y("X29wdGlvbnM=")][y("bGljZW5zZQ==")]||(s.h.error(y("TGljZW5zaW5n"),y("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),s.h.error(y("TGljZW5zaW5n"),y("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)},e.prototype._initEvents=function(){this._mediator.pipeEvents(this)},e.prototype._disposeEvents=function(){this._mediator.unpipeEvents(this)},e.prototype._initLanguage=function(){this._languages=s.q.deepDefaults(this._options.extensions.languages,{de:n(152),en:n(153)}),this._language=this._languages[this._options.language],this._language||s.h.error(this.constructor.name,"Language `"+this._options.language+"` not found!")},e.prototype.translate=function(t,e){return s.u.translate(this._language,t,e)},e.prototype.setImage=function(t){this._component&&this._component.setImage(t)},e.prototype.getAssetPath=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this._options.assets,i=o.baseUrl,r=o.resolver,s=i+"/"+t;if(t.match(/(ftp|http|https):\/\//)&&(s=t),e){if(!n){if(("undefined"!=typeof window&&window.devicePixelRatio||1)>1){var a=/\.[\w?=]+$/;t=t.replace(a,function(t){return"@2x"+t})}}s=i+"/ui/desktop/"+t}return void 0!==r&&null!==r&&(s=r(s)),s},e.prototype.getTheme=function(){return this._theme},e.prototype.getFontLoader=function(){return this._fontLoader},e.prototype.getPreloader=function(){return this._preloader},e.prototype.dispose=function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,s.m.unmountComponentAtNode(this._options.container),this._disposeEvents()},e}(s.e);v.prototype.identifier="react",v.BaseComponent=s.b,v.React=s.l,v.adonis=s.w,v.SharedState=s.s,v.Constants=s.d,v.Utils=s.u,v.ScrollbarComponent=l.a,v.JSONLoader=c.a,v.SliderComponent=u.a;var b=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.componentDidMount=function(){this._ui=new v(s.q.extend({},this.props,{container:this.refs.container}))},e.prototype.render=function(){var t=s.q.extend({},this.props.style||{});return s.l.createElement("div",{style:t,ref:"container"})},g(e,[{key:"ui",get:function(){return this._ui}}]),e}(s.l.Component);v.ReactComponent=b,v.Controls={};for(var w in _)v[w]=_[w];s.p.UI=s.p.UI||{},s.p.UI.DesktopUI=v,e.default=v},function(t,e){t.exports=n},function(t,e,n){"use strict";var o=n(61),i=n(62),r=n(63);t.exports=function(){function t(t,e,n,o,s,a){a!==r&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=o,n.PropTypes=n,n}},function(t,e,n){"use strict";function o(t){return function(){return t}}var i=function(){};i.thatReturns=o,i.thatReturnsFalse=o(!1),i.thatReturnsTrue=o(!0),i.thatReturnsNull=o(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";function o(t,e,n,o,r,s,a,l){if(i(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,r,s,a,l],p=0;c=new Error(e.replace(/%s/g,function(){return u[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(t){};t.exports=o},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){var n={firasansmedium:{fontFamily:"firasansmedium",fontWeight:"500",fontStyle:"normal",src:"fonts/FiraSans-Medium.woff"},firasansregular:{fontFamily:"firasansregular",fontWeight:"400",fontStyle:"normal",src:"fonts/FiraSans-Regular.woff"},sourcesansprobold:{fontFamily:"sourcesansprobold",fontWeight:"bolder",fontStyle:"normal",src:"fonts/SourceSansPro-Bold.woff"},sourcesansprosemibold:{fontFamily:"sourcesansprosemibold",fontWeight:"bold",fontStyle:"normal",src:"fonts/SourceSansPro-Semibold.woff"}};t.exports={primaryColor:"#2D7BFF",primaryColorRGB:"45, 123, 255",backgroundColor:"#141415",backgroundColorRGB:"20, 20, 21",controlsKnobColor:"white",controlsBackgroundColor:"#232326",controlsBackgroundColorRGB:"35, 35, 38",controlsLightBackgroundColor:"#2a2a2e",controlsOutlineColor:"rgba(255, 255, 255, 0.6)",controlsSeparatorColor:"#1b1b1d",navigationBackgroundColor:"#202022",navigationBackgroundColorRGB:"32, 32, 34",textColor:"#FFFFFF",dimmedTextColor:"#888888",dimmedTextColorRGB:"136, 136, 136",filterItemBackgroundColor:"#4b4b4c",secondaryControlsBackgroundColor:"#2a2a2e",secondaryControlsBackgroundColorRGB:"42, 42, 46",focusItemBackgroundColor:"#343437",sliderBackgroundColor:"rgba(255,255,255,0.24)",darkSliderBackgroundColor:"#1B1B1E",sliderKnobColor:"#b5b5be",sliderCircleKnobColor:"#c8c8d2",highlightColor:"#2675F8",highlightColorRGB:"38, 117, 253",darkHighlightColorRGB:"15, 47, 101",buttonBorderColor:"#303034",defaultShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.60)",modalErrorColor:"#C23A3A",modalWarningColor:"#C18226",modalLoadingColor:"#2D7BFF",zIndex:function(t){return 5*["background","controls","controlsOverlays","overlays","navigation"].indexOf(t)},transitionDuration:.3,listItemSlideInDelay:100,scrollbarGradientSize:64,uppercaseBoldFontFamily:"sourcesansprobold",uppercaseSemiBoldFontFamily:"sourcesansprosemibold",regularFontFamily:"firasansregular",mediumFontFamily:"firasansmedium",fonts:n}},function(t,e,n){!function(e,o){t.exports=o(n(7))}(0,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeProvider=e.withTheme=void 0;var i=n(1),r=o(i),s=n(27),a=o(s),l=n(28),c=o(l),u=n(29),p=o(u),h=n(30),f=o(h);e.default=function(t){var e=new r.default(t),n=function(t){if(t instanceof c.default){var n=t,o={};return a.default.forEach(function(t){o[t]=function(o,i,r){return"string"==typeof i&&(r=i,i=void 0),e.createComponent(t,{styles:o,variations:i,name:r,baseStyles:n})}}),o}return function(n,o,i){return"string"==typeof o&&(i=o,o=void 0),e.createComponent(t,{styles:n,variations:o,name:i})}};return a.default.forEach(function(t){n[t]=function(n,o,i){return"string"==typeof o&&(i=o,o=void 0),e.createComponent(t,{styles:n,variations:o,name:i})}}),n.global=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.getOptions(),i=o.injection,r=o.theme;if(i||n){"function"==typeof t&&(t=t(r));var s=e.getStylesBuffer();s.bufferCSS(t),s.flushToStyleTag(n)}},n.css=function(t,n,o){return"string"==typeof n&&(o=n,n=void 0),new c.default(e,{styles:t,variations:n,name:o||"baseStyles"})},["renderToStatic"].forEach(function(t){n[t]=e[t].bind(e)}),n},e.withTheme=p.default,e.ThemeProvider=f.default},function(t,e,n){(function(t){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(3),a=o(s),l=n(5),c=o(l),u=n(4),p=void 0!==t&&"production"===t.env.NODE_ENV,h=function(){function t(e){i(this,t),this._options=(0,u.defaults)(e,{injection:!0,batchInjection:!0,minified:!1,autoPrefix:!0,cssSelectorPrefix:"",classNamePrefix:"",hashSeparator:"-",nameSeparator:"__",variationSeparator:"--",styleNode:null,injectionMode:p?"fast":"debug",hashedStyles:!1}),this._stylesBuffer=new a.default(this),this._componentFactory=new c.default(this,this._options)}return r(t,[{key:"createComponent",value:function(t,e){return this._componentFactory.createComponent(t,e)}},{key:"renderToStatic",value:function(t){this._stylesBuffer.disableInjection();var e=t(),n=this._stylesBuffer.flushToString(!0);return this._stylesBuffer.enableInjection(),{css:{content:n},html:e}}},{key:"getStylesBuffer",value:function(){return this._stylesBuffer}},{key:"getOptions",value:function(){return this._options}}]),t}();e.default=h}).call(e,n(2))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(t){if(p===clearTimeout)return clearTimeout(t);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?d=f.concat(d):_=-1,d.length&&a())}function a(){if(!m){var t=i(s);m=!0;for(var e=d.length;e;){for(f=d,d=[];++_<e;)f&&f[_].run();_=-1,e=d.length}f=null,m=!1,r(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,p,h=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(t){p=o}}();var f,d=[],m=!1,_=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new l(t,e)),1!==d.length||m||i(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(4),a=function(){function t(e){o(this,t),this._adonis=e,this._injectionEnabled=!0,this._bufferedSelectors={},this._buffer=[],this._styleNode=this._findStyleNode(),this._sheet=this._findSheet()}return r(t,[{key:"_findSheet",value:function(){if(this._styleNode){if(this._styleNode.sheet)return this._styleNode.sheet;for(var t=document,e=t.styleSheets,n=0;n<e.length;n++){var o=e[n];if(o.ownerNode===this._styleNode)return o}}}},{key:"_findStyleNode",value:function(){var t=this._adonis.getOptions(),e=t.styleNode;return e||("undefined"==typeof document?null:(e=document.createElement("style"),e.setAttribute("data-adonis",!0),document.head.appendChild(e),e))}},{key:"bufferCSS",value:function(t){this._buffer.push(t)}},{key:"bufferRulesets",value:function(t){var e=this;t.forEach(function(t){var n=i(t,2),o=n[0];n[1];e._bufferedSelectors[o]=!0}),Array.prototype.push.apply(this._buffer,t.map(function(t){return i(t,2)[1]}))}},{key:"isSelectorBuffered",value:function(t){return this._bufferedSelectors[t]}},{key:"disableInjection",value:function(){this._injectionEnabled=!1}},{key:"enableInjection",value:function(){this._injectionEnabled=!0}},{key:"flushToString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._adonis.getOptions(),n=e.minified,o=this._buffer.join(n?"":"\n\n");return this._buffer=[],t&&(this._bufferedSelectors={}),o}},{key:"_injectFast",value:function(){var t=this;this._buffer.forEach(function(e){t._sheet.insertRule(e,t._sheet.cssRules.length)})}},{key:"_injectDebug",value:function(){var t=this.flushToString();if(t){var e=this._adonis.getOptions(),n=e.minified,o=this._styleNode.innerHTML.length>0;this._styleNode.appendChild(document.createTextNode((n||!o?"":"\n\n")+t))}}},{key:"_flushToStyleTag",value:function(){var t=this._adonis.getOptions(),e=t.injectionMode;if("fast"===e&&this._sheet.insertRule)this._injectFast();else{if("debug"!==e)throw new Error("Unknown CSS injection mode: `"+e+"`");this._injectDebug()}this._buffer=[]}},{key:"flushToStyleTag",value:function(){var t=this;if(this._injectionEnabled){var e=this._adonis.getOptions(),n=e.batchInjection;!this._nextTick&&n?this._nextTick=(0,s.requestAnimationFrame)(function(){t._nextTick=null,t._flushToStyleTag()}):n||this._flushToStyleTag()}}}]),t}();e.default=a},function(t,e){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=(e.defaults=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var i={};for(var r in t)i[r]=t[r];for(var s=0;s<n.length;s++){var a=n[s];for(var l in a)void 0===i[l]&&(i[l]=a[l])}return i},e.hashObject=function(t){for(var e=JSON.stringify(t),n=e.length,o=n,i=0,r=void 0;n>=4;)r=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),r^=r>>>24,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^r,n-=4,++i;switch(n){case 3:o^=(255&e.charCodeAt(i+2))<<16;case 2:o^=(255&e.charCodeAt(i+1))<<8;case 1:o^=255&e.charCodeAt(i),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)}return o^=o>>>13,o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16),o^=o>>>15,(o>>>0).toString(36)},e.flatten=function t(e){return e.reduce(function(e,n){return e.concat(Array.isArray(n)?t(n):n)},[])},e.toStaticStyles=function t(e){var o={};for(var i in e){var r=e[i];"object"===(void 0===r?"undefined":n(r))?o[i]=t(r):"function"!=typeof r&&(o[i]=r)}return o},e.deepMerge=function t(e,o){var i={};for(var r in e)i[r]=e[r];for(var s in o)"object"===n(o[s])&&e[s]?i[s]=t(e[s],o[s]):i[s]=o[s];return i});e.deepMergeAll=function(t){return t.reduce(function(t,e){return o(t,e)},{})},e.resolveStylesObject=function t(e,o){var i={};for(var r in e){var s=e[r];if("object"===(void 0===s?"undefined":n(s)))i[r]=t(s,o);else if("function"==typeof s){if(!o)throw new Error("Trying to resolve a dynamic property without a `theme` given.");i[r]=s(o)}else i[r]=s}return i},e.findAllCombinations=function(t){return function t(e,n){var o=e[0];if(void 0===o)return n;for(var i=0,r=n.length;i<r;++i)n.push(n[i].concat(o));return t(e.slice(1),n)}(t,[[]]).slice(1)},e.requestAnimationFrame=function(){for(var e=0,n=void 0===t?window:t,o=n.requestAnimationFrame,i=["ms","moz","webkit","o"],r=0;r<i.length&&!o;++r)o=n[i[r]+"RequestAnimationFrame"];return!o&&void 0!==n&&n.setImmediate&&(o=n.setImmediate),o&&(o=o.bind(n)),o||(o=function(t){var n=(new Date).getTime(),o=Math.max(0,16-(n-e)),i=setTimeout(function(){t(n+o)},o);return e=n+o,i}),o}()}).call(e,function(){return this}())},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(6),c=o(l),u=n(4),p=n(7),h=o(p),f=n(16),d=o(f),m=n(17),_=o(m),g=n(26),y=o(g),v=function(){function t(e,n){s(this,t),this._adonis=e,this._options=n}return a(t,[{key:"_getName",value:function(t){return"string"==typeof t?t:t.name?t.name:"adonis"}},{key:"_getTargetStyles",value:function(t,e){var n=[t.adonisBaseStyles,t.adonisStyles];return t.adonisTarget&&n.unshift(this._getTargetStyles(t.adonisTarget)),t.RootElement&&n.unshift(this._getTargetStyles(t.RootElement)),(0,u.flatten)(n).filter(function(t){return t})}},{key:"createComponent",value:function(t,e){var n=this._adonis,o=e.name;o||(o=this._getName(t));var p="string"==typeof t,f=t.prototype instanceof h.default,m=!f&&t.prototype instanceof l.Component,g=e.styles,v=e.variations,b=e.baseStyles;v=v||{};var w=new d.default(n,{styles:g,variations:v,name:o}),k=n.getOptions(),C=k.injection,S=k.theme,O=k.hashedStyles;if("pre"===C&&!O){var E=this._getTargetStyles(t,o),T=void 0,x=void 0;T=E.concat([b,w]).filter(function(t){return t}),x=new y.default(n,T,S),x.bufferRulesets();n.getStylesBuffer().flushToStyleTag()}var R=function(l){function h(){var t;s(this,h);for(var e=arguments.length,o=Array(e),r=0;r<e;r++)o[r]=arguments[r];var a=i(this,(t=h.__proto__||Object.getPrototypeOf(h)).call.apply(t,[this].concat(o)));return a._updateStylesManager(),a._adonis=n,a}return r(h,l),a(h,[{key:"_updateStylesManager",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this._allStyles=[b,w].concat(t.styles||[]).filter(function(t){return t});var e=this._getActiveVariationsFromProps(t);this._stylesManager=new _.default(n,this._allStyles,e,this.context.theme)}},{key:"componentWillReceiveProps",value:function(t){var e=this,n=t.styles!==this.props.styles,o=!1;(0,u.flatten)(this._allStyles.map(function(t){return t.getVariations()})).forEach(function(n){t[n]!==e.props[n]&&(o=!0)}),(n||o)&&this._updateStylesManager(t)}},{key:"_cloneProps",value:function(){var t=this,e={};return Object.keys(this.props).forEach(function(n){e[n]=t.props[n]}),e}},{key:"_getActiveVariationsFromProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e={};return this._allStyles.forEach(function(t){return t.getVariations().forEach(function(t){return e[t]=!0})}),Object.keys(e).filter(function(e){return!0===t[e]}).sort()}},{key:"_buildClassName",value:function(){var t=this.props.className,e=[];e.push(t);var n=this._stylesManager.getClassName();return e.push(n),{className:e.filter(function(t){return t}).join(" ")}}},{key:"_shouldInjectCSS",value:function(){return!(!C||O)&&(p||m&&!f)}},{key:"render",value:function(){var n=this._cloneProps(),o=this._buildClassName(),i=o.className,r=this._adonis.getStylesBuffer();if(this._shouldInjectCSS()&&(this._stylesManager.bufferRulesets(),!0!==C||O||r.flushToStyleTag()),p){var s=e.variations;s&&Object.keys(s).forEach(function(t){delete n[t]}),this.props._activeParentVariations&&this.props._activeParentVariations.forEach(function(t){delete n[t]}),b&&b.getVariations().forEach(function(t){delete n[t]})}p?n.className=i:(n.styles=(0,u.flatten)([w].concat(this.props.styles||[])),n._activeParentVariations=Object.keys(v||{}).concat(this.props._activeParentVariations||[]));var a=this.props,l=a.children,h=a.innerRef;return h&&(m||p?n.ref=h:f&&(n.innerRef=h)),p&&(delete n.styles,delete n.innerRef,delete n._activeParentVariations),c.default.createElement(t,n,l)}}],[{key:"name",get:function(){return o}}]),h}(h.default);return R.contextTypes=h.default.contextTypes,R.adonisTarget=t,R.adonisStyles=w,R.adonisBaseStyles=b,R}}]),t}();e.default=v},function(e,n){e.exports=t},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(6),a=n(8),l=function(t){return t&&t.__esModule?t:{default:t}}(a),c=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(s.Component);e.default=c,c.contextTypes={theme:l.default.object}},function(t,e,n){(function(e){if("production"!==e.env.NODE_ENV){var o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,i=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===o};t.exports=n(9)(i,!0)}else t.exports=n(15)()}).call(e,n(2))},function(t,e,n){(function(e){"use strict";var o=n(10),i=n(11),r=n(12),s=n(13),a=n(14);t.exports=function(t,n){function l(t){var e=t&&(O&&t[O]||t[E]);if("function"==typeof e)return e}function c(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e}function u(t){this.message=t,this.stack=""}function p(t){function o(o,c,p,h,f,d,m){if(h=h||T,d=d||p,m!==s)if(n)i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==e.env.NODE_ENV&&"undefined"!=typeof console){var _=h+":"+p;!a[_]&&l<3&&(r(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",d,h),a[_]=!0,l++)}return null==c[p]?o?new u(null===c[p]?"The "+f+" `"+d+"` is marked as required in `"+h+"`, but its value is `null`.":"The "+f+" `"+d+"` is marked as required in `"+h+"`, but its value is `undefined`."):null:t(c,p,h,f,d)}if("production"!==e.env.NODE_ENV)var a={},l=0;var c=o.bind(null,!1);return c.isRequired=o.bind(null,!0),c}function h(t){function e(e,n,o,i,r,s){var a=e[n];if(w(a)!==t)return new u("Invalid "+i+" `"+r+"` of type `"+k(a)+"` supplied to `"+o+"`, expected `"+t+"`.");return null}return p(e)}function f(t){function e(e,n,o,i,r){if("function"!=typeof t)return new u("Property `"+r+"` of component `"+o+"` has invalid PropType notation inside arrayOf.");var a=e[n];if(!Array.isArray(a)){return new u("Invalid "+i+" `"+r+"` of type `"+w(a)+"` supplied to `"+o+"`, expected an array.")}for(var l=0;l<a.length;l++){var c=t(a,l,o,i,r+"["+l+"]",s);if(c instanceof Error)return c}return null}return p(e)}function d(t){function e(e,n,o,i,r){if(!(e[n]instanceof t)){var s=t.name||T;return new u("Invalid "+i+" `"+r+"` of type `"+S(e[n])+"` supplied to `"+o+"`, expected instance of `"+s+"`.")}return null}return p(e)}function m(t){function n(e,n,o,i,r){for(var s=e[n],a=0;a<t.length;a++)if(c(s,t[a]))return null;return new u("Invalid "+i+" `"+r+"` of value `"+s+"` supplied to `"+o+"`, expected one of "+JSON.stringify(t)+".")}return Array.isArray(t)?p(n):("production"!==e.env.NODE_ENV&&r(!1,"Invalid argument supplied to oneOf, expected an instance of array."),o.thatReturnsNull)}function _(t){function e(e,n,o,i,r){if("function"!=typeof t)return new u("Property `"+r+"` of component `"+o+"` has invalid PropType notation inside objectOf.");var a=e[n],l=w(a);if("object"!==l)return new u("Invalid "+i+" `"+r+"` of type `"+l+"` supplied to `"+o+"`, expected an object.");for(var c in a)if(a.hasOwnProperty(c)){var p=t(a,c,o,i,r+"."+c,s);if(p instanceof Error)return p}return null}return p(e)}function g(t){function n(e,n,o,i,r){for(var a=0;a<t.length;a++){if(null==(0,t[a])(e,n,o,i,r,s))return null}return new u("Invalid "+i+" `"+r+"` supplied to `"+o+"`.")}if(!Array.isArray(t))return"production"!==e.env.NODE_ENV&&r(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),o.thatReturnsNull;for(var i=0;i<t.length;i++){var a=t[i];if("function"!=typeof a)return r(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",C(a),i),o.thatReturnsNull}return p(n)}function y(t){function e(e,n,o,i,r){var a=e[n],l=w(a);if("object"!==l)return new u("Invalid "+i+" `"+r+"` of type `"+l+"` supplied to `"+o+"`, expected `object`.");for(var c in t){var p=t[c];if(p){var h=p(a,c,o,i,r+"."+c,s);if(h)return h}}return null}return p(e)}function v(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(v);if(null===e||t(e))return!0;var n=l(e);if(!n)return!1;var o,i=n.call(e);if(n!==e.entries){for(;!(o=i.next()).done;)if(!v(o.value))return!1}else for(;!(o=i.next()).done;){var r=o.value;if(r&&!v(r[1]))return!1}return!0;default:return!1}}function b(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function w(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":b(e,t)?"symbol":e}function k(t){if(void 0===t||null===t)return""+t;var e=w(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function C(t){var e=k(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}function S(t){return t.constructor&&t.constructor.name?t.constructor.name:T}var O="function"==typeof Symbol&&Symbol.iterator,E="@@iterator",T="<<anonymous>>",x={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),string:h("string"),symbol:h("symbol"),any:function(){return p(o.thatReturnsNull)}(),arrayOf:f,element:function(){function e(e,n,o,i,r){var s=e[n];if(!t(s)){return new u("Invalid "+i+" `"+r+"` of type `"+w(s)+"` supplied to `"+o+"`, expected a single ReactElement.")}return null}return p(e)}(),instanceOf:d,node:function(){function t(t,e,n,o,i){return v(t[e])?null:new u("Invalid "+o+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return p(t)}(),objectOf:_,oneOf:m,oneOfType:g,shape:y};return u.prototype=Error.prototype,x.checkPropTypes=a,x.PropTypes=x,x}}).call(e,n(2))},function(t,e){"use strict";function n(t){return function(){return t}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(t){return t},t.exports=o},function(t,e,n){(function(e){"use strict";function n(t,e,n,i,r,s,a,l){if(o(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,s,a,l],p=0;c=new Error(e.replace(/%s/g,function(){return u[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var o=function(t){};"production"!==e.env.NODE_ENV&&(o=function(t){if(void 0===t)throw new Error("invariant requires an error message argument")}),t.exports=n}).call(e,n(2))},function(t,e,n){(function(e){"use strict";var o=n(10),i=o;"production"!==e.env.NODE_ENV&&function(){var t=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var i=0,r="Warning: "+t.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(r);try{throw new Error(r)}catch(t){}};i=function(e,n){if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==n.indexOf("Failed Composite propType: ")&&!e){for(var o=arguments.length,i=Array(o>2?o-2:0),r=2;r<o;r++)i[r-2]=arguments[r];t.apply(void 0,[n].concat(i))}}}(),t.exports=i}).call(e,n(2))},function(t,e){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){(function(e){"use strict";function o(t,n,o,l,c){if("production"!==e.env.NODE_ENV)for(var u in t)if(t.hasOwnProperty(u)){var p;try{i("function"==typeof t[u],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",l||"React class",o,u),p=t[u](n,u,l,o,null,s)}catch(t){p=t}if(r(!p||p instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",l||"React class",o,u,typeof p),p instanceof Error&&!(p.message in a)){a[p.message]=!0;var h=c?c():"";r(!1,"Failed %s type: %s%s",o,p.message,null!=h?h:"")}}}if("production"!==e.env.NODE_ENV)var i=n(11),r=n(12),s=n(13),a={};t.exports=o}).call(e,n(2))},function(t,e,n){"use strict";var o=n(10),i=n(11),r=n(13);t.exports=function(){function t(t,e,n,o,s,a){a!==r&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e};return n.checkPropTypes=o,n.PropTypes=n,n}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(4),s=function(){function t(e,n){o(this,t),this._adonis=e,this._options=(0,r.defaults)(n,{variations:[],styles:{},name:"Unnamed"});var i=this._adonis.getOptions(),s=i.hashedStyles;if(s&&"string"!=typeof this._options.styles)throw new Error("Passing style objects with `hashedStyles` set to true is invalid.");this._hash=s?this._options.styles:(0,r.hashObject)(this._options.styles),this._variationHashes=this._hashVariations()}return i(t,[{key:"_hashVariations",value:function(){var t={},e=this._adonis.getOptions(),n=e.hashedStyles,o=this._options.variations;for(var i in o){var s=o[i];t[i]=n?s:(0,r.hashObject)(s)}return t}},{key:"getIdentifierForVariations",value:function(t){var e=this,n=this._options.name,o=this._adonis.getOptions(),i=o.hashSeparator,r=o.variationSeparator,s=""+n+i+this._hash;return t.sort().forEach(function(t){var n=e._variationHashes[t];n&&(s+=""+r+t+i+n)}),s}},{key:"getStyles",value:function(){return this._options.styles}},{key:"getVariationStyles",value:function(t){var e=this._options.variations;return t?t.map(function(t){return e[t]}).filter(function(t){return t}):e}},{key:"getVariations",value:function(){return Object.keys(this._options.variations||{})}}]),t}();e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(4),s=n(18),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(){function t(e,n,i,r){o(this,t),this._adonis=e,this._styles=n,this._theme=r,this._activeVariations=i,this._className=this._generateClassName(this._activeVariations),this._baseSelector="."+this._className,this._rulesets=this._generateRulesets()}return i(t,[{key:"generateCSS",value:function(){return this._rulesets.map(function(t){return t.toCSS()}).filter(function(t){return t})}},{key:"bufferRulesets",value:function(){var t=this._adonis.getStylesBuffer(),e=this._rulesets.filter(function(e){return!t.isSelectorBuffered(e.getSelector())&&e.hasDeclarations()}).map(function(t){return[t.getSelector(),t.toCSS()]});t.bufferRulesets(e)}},{key:"_getCombinedStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=(0,r.flatten)(this._styles.map(function(e){return[e.getStyles(),e.getVariationStyles(t)]}));return(0,r.deepMergeAll)(e)}},{key:"_generateClassName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this._adonis.getOptions(),n=e.nameSeparator;return e.classNamePrefix+this._styles.map(function(e){return e.getIdentifierForVariations(t)}).join(n)}},{key:"_generateRulesets",value:function(){var t=new a.default(this._adonis,this._baseSelector,this._getCombinedStyles(this._activeVariations),{theme:this._theme});return(0,r.flatten)([t,t.getSubRulesets()])}},{key:"getClassName",value:function(){return this._className}}]),t}();e.default=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(4),a=n(19),l=o(a),c=n(21),u=o(c),p=function(){function t(e,n,o,r){i(this,t),this._options=r,this._adonis=e,this._selector=n,this._styles=o,this._resolvedStyles=(0,s.resolveStylesObject)(this._styles,this._options.theme);var a=this._adonis.getOptions(),l=a.hashedStyles;this._hash=l?this._styles:(0,s.hashObject)(this._styles);var c=this._parseStyles(),u=c.subRulesets,p=c.declarations;this._subRulesets=u,this._declarations=p}return r(t,[{key:"_getSubRuleset",value:function(e,n){for(var o=this,i=this._adonis.getOptions(),r=i.minified,a=null,l=function(e,i){var r=(0,s.deepMerge)(o._options,{parentSelector:i});a=new t(o._adonis,e,n,r)},c=0;c<u.default.length;c++){if((0,u.default[c])(e,this._selector,l,r),a)return a}}},{key:"_parseStyles",value:function(){var t=[],e=[];for(var n in this._resolvedStyles){var o=this._resolvedStyles[n],i=this._getSubRuleset(n,o);i?t.push(i,i.getSubRulesets()):e.push(new l.default(this._adonis,n,o))}return{subRulesets:t,declarations:e}}},{key:"toCSS",value:function(){var t=this._options.parentSelector,e=this._adonis.getOptions(),n=e.minified,o=e.cssSelectorPrefix;if(0===this._declarations.length)return null;var i=t&&t.match(/^@/),r="",s="";t?(o&&!i&&(r+=o),r+=t+(n?"{":" {\n"),s="  "):r+=o;var a="";return o&&i&&(a+=o),a+=this._selector,r+=s+a+(n?"{":" {\n"),this._declarations.forEach(function(t){r+=s+t.toCSS()+(n?"":"\n")}),r+=s+"}",t&&(r+=n?"}":"\n}"),r}},{key:"getSubRulesets",value:function(){return this._subRulesets}},{key:"hasDeclarations",value:function(){return 0!==this._declarations.length}},{key:"getSelector",value:function(){return this._selector}}]),t}();e.default=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(20),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(){function t(e,n,i){o(this,t),this._adonis=e,this.key=n,this.value=i,this.cssKey=this.key.replace(/([A-Z])/g,function(t){return"-"+t[0].toLowerCase()})}return r(t,[{key:"_getAutoPrefixedKeyPairs",value:function(){var t=this,e=a.default[this.key],n=[];return e&&e.forEach(function(e){n.push(["-"+e+"-"+t.cssKey,t.value])}),n}},{key:"toCSS",value:function(){var t=this._adonis.getOptions(),e=t.minified,n=t.autoPrefix,o=[[this.cssKey,this.value]];return n&&(o=o.concat(this._getAutoPrefixedKeyPairs())),o.map(function(t){var n=i(t,2),o=n[0],r=n[1];return(e?"":"  ")+o+":"+(e?"":" ")+r+";"}).join(e?"":"\n")}}]),t}();e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="webkit",o="moz",i="ms";e.default={appearance:[n,o],userSelect:[n,o,i],textEmphasisPosition:[n],textEmphasis:[n],textEmphasisStyle:[n],textEmphasisColor:[n],boxDecorationBreak:[n],clipPath:[n],maskImage:[n],maskMode:[n],maskRepeat:[n],maskPosition:[n],maskClip:[n],maskOrigin:[n],maskSize:[n],maskComposite:[n],mask:[n],maskBorderSource:[n],maskBorderMode:[n],maskBorderSlice:[n],maskBorderWidth:[n],maskBorderOutset:[n],maskBorderRepeat:[n],maskBorder:[n],maskType:[n],textDecorationStyle:[n],textDecorationSkip:[n],textDecorationLine:[n],textDecorationColor:[n],filter:[n],fontFeatureSettings:[n],breakAfter:[n,o,i],breakBefore:[n,o,i],breakInside:[n,o,i],columnCount:[n,o],columnFill:[n,o],columnGap:[n,o],columnRule:[n,o],columnRuleColor:[n,o],columnRuleStyle:[n,o],columnRuleWidth:[n,o],columns:[n,o],columnSpan:[n,o],columnWidth:[n,o],flex:[n],flexBasis:[n],flexDirection:[n],flexGrow:[n],flexFlow:[n],flexShrink:[n],flexWrap:[n],alignContent:[n],alignItems:[n],alignSelf:[n],justifyContent:[n],order:[n],transform:[n],transformOrigin:[n],transformOriginX:[n],transformOriginY:[n],backfaceVisibility:[n],perspective:[n],perspectiveOrigin:[n],transformStyle:[n],transformOriginZ:[n],animation:[n],animationDelay:[n],animationDirection:[n],animationFillMode:[n],animationDuration:[n],animationIterationCount:[n],animationName:[n],animationPlayState:[n],animationTimingFunction:[n],backdropFilter:[n],fontKerning:[n],scrollSnapType:[n,i],scrollSnapPointsX:[n,i],scrollSnapPointsY:[n,i],scrollSnapDestination:[n,i],scrollSnapCoordinate:[n,i],shapeImageThreshold:[n],shapeImageMargin:[n],shapeImageOutside:[n],hyphens:[n,o,i],flowInto:[n,i],flowFrom:[n,i],regionFragment:[n,i],textAlignLast:[o],tabSize:[o],wrapFlow:[i],wrapThrough:[i],wrapMargin:[i],gridTemplateColumns:[i],gridTemplateRows:[i],gridTemplateAreas:[i],gridTemplate:[i],gridAutoColumns:[i],gridAutoRows:[i],gridAutoFlow:[i],grid:[i],gridRowStart:[i],gridColumnStart:[i],gridRowEnd:[i],gridRow:[i],gridColumn:[i],gridColumnEnd:[i],gridColumnGap:[i],gridRowGap:[i],gridArea:[i],gridGap:[i],textSizeAdjust:[n,i],transitionDelay:[n],transitionDuration:[n],transitionProperty:[n],transitionTimingFunction:[n]}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(22),r=o(i),s=n(23),a=o(s),l=n(24),c=o(l),u=n(25),p=o(u);e.default=[r.default,a.default,c.default,p.default]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,o){if(t=t.trim(),">"!==t[0])return null;t=t.slice(1).trim();var i=e;return o||(i+=" "),i+=">",o||(i+=" "),i+=t,n(i)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,o){if(t=t.trim(),"&"!==t[0])return null;var i=!t.match(/^&\s+/);return t=t.replace(/^&/,""),n(t.split(",").map(function(t){return t.trim()}).map(function(t,n){return e+(0===n&&i?"":" ")+t}).join(", "))}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,o){return t=t.trim(),":"!==t[0]?null:n(e+t)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,o){return t=t.trim(),"@"!==t[0]?null:n(e,t)}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(4),c=n(18),u=o(c),p=n(17),h=o(p),f=function(t){function e(t,n,o){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,[],o))}return s(e,t),a(e,[{key:"_generateVariationRulesets",value:function(){var t=this,e=(0,l.flatten)(this._styles.map(function(t){return t.getVariations()}));return(0,l.findAllCombinations)(e).map(function(e){var n=t._generateClassName(e),o="."+n,i=new u.default(t._adonis,o,t._getCombinedStyles(e),{theme:t._theme});return[i,i.getSubRulesets()]})}},{key:"_generateRulesets",value:function(){var t=new u.default(this._adonis,this._baseSelector,this._getCombinedStyles(),{theme:this._theme}),e=[t,t.getSubRulesets()];return e.push(this._generateVariationRulesets()),(0,l.flatten)(e)}}]),e}(h.default);e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(16),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(a.default);e.default=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(6),c=o(l),u=n(8),p=o(u);e.default=function(t){var e=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,e),a(n,[{key:"_cloneProps",value:function(){var t=this,e={};return Object.keys(this.props).forEach(function(n){e[n]=t.props[n]}),e}},{key:"render",value:function(){var e=this._cloneProps(),n=e.innerRef;return n&&(e.ref=n),delete e.innerRef,c.default.createElement(t,e)}}]),n}(c.default.Component);return e.contextTypes={theme:p.default.object},e}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(6),c=o(l),u=n(8),p=o(u),h=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),a(e,[{key:"getChildContext",value:function(){var t={};for(var e in this.context)t[e]=this.context;return t.theme=this.props.theme,t}},{key:"render",value:function(){return this.props.children?c.default.Children.only(this.props.children):null}}]),e}(l.Component);e.default=h,h.childContextTypes={theme:p.default.object.isRequired},h.contextTypes={theme:p.default.object}}])})},function(t,e,n){"use strict";var o=n(2),i=n.n(o),r=n(16),s=n(67),a=n(10),l=i.a.Utils,c=i.a.Math.Vector2,u={getInnerDimensionsForElement:function(t){var e=new c(t.offsetWidth,t.offsetHeight),n=window.getComputedStyle(t,null);return e.x-=parseInt(n.getPropertyValue("padding-left"),10),e.x-=parseInt(n.getPropertyValue("padding-right"),10),e.y-=parseInt(n.getPropertyValue("padding-top"),10),e.y-=parseInt(n.getPropertyValue("padding-bottom"),10),e},getEventPosition:function(t){var e=t.clientX,n=t.clientY;if(-1!==t.type.indexOf("touch")){if(!t.touches.length)return;e=t.touches[0].clientX,n=t.touches[0].clientY}return new c(e,n)},createTransparentPatternCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=10,t.height=10,e.fillStyle="white",e.fillRect(0,0,t.width,t.height),e.fillStyle="#cccccc",e.fillRect(0,0,t.width/2,t.height/2),e.fillRect(t.width/2,t.height/2,t.width,t.height),t},supportsMSBlob:function(){return void 0!==document.createElement("canvas").msToBlob},translate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.fetch(t,e);if(!o)return r.a.info("Utils#translate","Unable to translate `"+e+"`"),null;for(var i in n)o=o.replace("${"+i+"}",n[i]);return o},fetch:function(t,e,n){e=e.replace(/\[(\w+)]/g,".$1"),e=e.replace(/^\./,"");for(var o=e.split("."),i=0;i<o.length;i++){if(!(t=t[o[i]]))break}return void 0!==t&&t},isMobile:function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},select:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=function(t){return t});var o=[];return e.forEach(function(e){t.forEach(function(t){n(t)===e&&o.push(t)})}),o},getJSONP:function(t){return new a.a(t).load()},cloneCategories:function(t,e){return t.map(function(t){return t=l.clone(t),t[e]=t[e].slice(0),t})},mergeCategories:function(t,e,n){t=this.cloneCategories(t,n);var o=null;return e.forEach(function(e){t.forEach(function(t){e.identifier===t.identifier&&(o=t)}),o?o[n]=o[n].concat(e[n]):t.push(e)}),t},getStyleObject:function(t){var e=window.getComputedStyle(t),n={};for(var o in e){var i=e.getPropertyValue(o),r=o.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()});""!==i&&(n[r]=i)}return n},styleElement:function(t,e){for(var n in e)t.style[n]=e[n]},debounce:function(t,e,n){var o;return function(){var i=this,r=arguments,s=function(){o=null,n||t.apply(i,r)},a=n&&!o;clearTimeout(o),o=setTimeout(s,e),a&&t.apply(this,r)}},getScrollbarWidth:function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var o=n.offsetWidth;return t.parentNode.removeChild(t),e-o},findIntegerFraction:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=Number.MAX_VALUE,o=0,i=0,r=1,s=1,a=0;a<e;a++){var l=r/s-t;if(l<0)r++;else{if(!(l>0))return new c(r,s);s++}var u=Math.abs(r/s-t);u<n&&(n=u,o=r,i=s)}return new c(o,i)},toFixed:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toFixed(e);return parseFloat(n)},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},flipObject:function(t){var e={};for(var n in t)e[t[n]]=n;return e},Browser:s.a};e.a=u},function(t,e,n){"use strict";e.a={getIEVersion:function(){var t=navigator,e=t.userAgent,n=t.appVersion;return-1!==n.indexOf("MSIE")?n.match(/MSIE\s+?([0-9]+)/i)[1]:-1!==e.indexOf("Trident")&&e.match(/rv:([0-9]+)/i)[1]},isIE10:function(){var t=this.getIEVersion();return!1!==t&&10===t},isIE11:function(){var t=this.getIEVersion();return!1!==t&&11===t},isIElte:function(t){var e=this.getIEVersion();return!1!==e&&e<=t}}},function(t,e,n){"use strict";(function(t,n){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=void 0===n?window:n,r="undefined"!=typeof Promise?Promise:function(){function e(t,e){d.add(t,e),f||(f=_(d.drain))}function n(t){var e,n=void 0===t?"undefined":o(t);return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e&&e}function i(){for(var t=0;t<this.chain.length;t++)r(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function r(t,e,o){var i,r;try{!1===e?o.reject(t.msg):(i=!0===e?t.msg:e.call(void 0,t.msg),i===o.promise?o.reject(TypeError("Promise-chain cycle")):(r=n(i))?r.call(i,o.resolve,o.reject):o.resolve(i))}catch(t){o.reject(t)}}function s(t){var o,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(o=n(t))?e(function(){var e=new c(r);try{o.call(t,function(){s.apply(e,arguments)},function(){a.apply(e,arguments)})}catch(t){a.call(e,t)}}):(r.msg=t,r.state=1,r.chain.length>0&&e(i,r))}catch(t){a.call(new c(r),t)}}}function a(t){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=t,n.state=2,n.chain.length>0&&e(i,n))}function l(t,e,n,o){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then(function(t){n(i,t)},o)}(i)}function c(t){this.def=t,this.triggered=!1}function u(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new u(this);this.then=function(t,o){var r={success:"function"!=typeof t||t,failure:"function"==typeof o&&o};return r.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");r.resolve=t,r.reject=e}),n.chain.push(r),0!==n.state&&e(i,n),r.promise},this.catch=function(t){return this.then(void 0,t)};try{t.call(void 0,function(t){s.call(n,t)},function(t){a.call(n,t)})}catch(t){a.call(n,t)}}var h,f,d,m=Object.prototype.toString,_=void 0!==t?function(e){return t(e)}:setTimeout;try{Object.defineProperty({},"x",{}),h=function(t,e,n,o){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:!1!==o})}}catch(t){h=function(t,e,n){return t[e]=n,t}}d=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,o;return{add:function(i,r){o=new t(i,r),n?n.next=o:e=o,n=o,o=void 0},drain:function(){var t=e;for(e=n=f=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=h({},"constructor",p,!1);return p.prototype=g,h(g,"__NPO__",0,!1),h(p,"resolve",function(t){var e=this;return t&&"object"==(void 0===t?"undefined":o(t))&&1===t.__NPO__?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),h(p,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),h(p,"all",function(t){var e=this;return"[object Array]"!=m.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,o){if("function"!=typeof n||"function"!=typeof o)throw TypeError("Not a function");var i=t.length,r=Array(i),s=0;l(e,t,function(t,e){r[t]=e,++s===i&&n(r)},o)})}),h(p,"race",function(t){var e=this;return"[object Array]"!=m.call(t)?e.reject(TypeError("Not an array")):new e(function(n,o){if("function"!=typeof n||"function"!=typeof o)throw TypeError("Not a function");l(e,t,function(t,e){n(e)},o)})}),p}();i.Promise=i.Promise||r,e.a=r}).call(e,n(69).setImmediate,n(5))},function(t,e,n){function o(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new o(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(70),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";function o(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return c[l]=o,a(l),l++}function i(t){delete c[t]}function r(t){var e=t.callback,o=t.args;switch(o.length){case 0:e();break;case 1:e(o[0]);break;case 2:e(o[0],o[1]);break;case 3:e(o[0],o[1],o[2]);break;default:e.apply(n,o)}}function s(t){if(u)setTimeout(s,0,t);else{var e=c[t];if(e){u=!0;try{r(e)}finally{i(t),u=!1}}}}if(!t.setImmediate){var a,l=1,c={},u=!1,p=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&s(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},a=function(e){t.port2.postMessage(e)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var t=p.documentElement;a=function(e){var n=p.createElement("script");n.onreadystatechange=function(){s(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){a=function(t){setTimeout(s,0,t)}}(),h.setImmediate=o,h.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(5),n(17))},function(t,e,n){"use strict";function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&c.isObject(t)&&t instanceof o)return t;var i=new o;return i.parse(t,e,n),i}function r(t){return c.isString(t)&&(t=i(t)),t instanceof o?t.format():o.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}var l=n(72),c=n(74);e.parse=i,e.resolve=s,e.resolveObject=a,e.format=r,e.Url=o;var u=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(d),_=["%","/","?",";","#"].concat(m),g=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=n(75);o.prototype.parse=function(t,e,n){if(!c.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),i=-1!==o&&o<t.indexOf("#")?"?":"#",r=t.split(i),s=/\\/g;r[0]=r[0].replace(s,"/"),t=r.join(i);var a=t;if(a=a.trim(),!n&&1===t.split("#").length){var p=h.exec(a);if(p)return this.path=a,this.href=a,this.pathname=p[1],p[2]?(this.search=p[2],this.query=e?C.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=u.exec(a);if(f){f=f[0];var d=f.toLowerCase();this.protocol=d,a=a.substr(f.length)}if(n||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===a.substr(0,2);!S||f&&w[f]||(a=a.substr(2),this.slashes=!0)}if(!w[f]&&(S||f&&!k[f])){for(var O=-1,E=0;E<g.length;E++){var T=a.indexOf(g[E]);-1!==T&&(-1===O||T<O)&&(O=T)}var x,R;R=-1===O?a.lastIndexOf("@"):a.lastIndexOf("@",O),-1!==R&&(x=a.slice(0,R),a=a.slice(R+1),this.auth=decodeURIComponent(x)),O=-1;for(var E=0;E<_.length;E++){var T=a.indexOf(_[E]);-1!==T&&(-1===O||T<O)&&(O=T)}-1===O&&(O=a.length),this.host=a.slice(0,O),a=a.slice(O),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var j=this.hostname.split(/\./),E=0,D=j.length;E<D;E++){var I=j[E];if(I&&!I.match(y)){for(var B="",A=0,M=I.length;A<M;A++)I.charCodeAt(A)>127?B+="x":B+=I[A];if(!B.match(y)){var N=j.slice(0,E),F=j.slice(E+1),z=I.match(v);z&&(N.push(z[1]),F.unshift(z[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=l.toASCII(this.hostname));var L=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+L,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!b[d])for(var E=0,D=m.length;E<D;E++){var V=m[E];if(-1!==a.indexOf(V)){var W=encodeURIComponent(V);W===V&&(W=escape(V)),a=a.split(V).join(W)}}var H=a.indexOf("#");-1!==H&&(this.hash=a.substr(H),a=a.slice(0,H));var q=a.indexOf("?");if(-1!==q?(this.search=a.substr(q),this.query=a.substr(q+1),e&&(this.query=C.parse(this.query)),a=a.slice(0,q)):e&&(this.search="",this.query={}),a&&(this.pathname=a),k[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",G=this.search||"";this.path=L+G}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",o=this.hash||"",i=!1,r="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(r=C.stringify(this.query));var s=this.search||r&&"?"+r||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||k[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),o&&"#"!==o.charAt(0)&&(o="#"+o),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+n+s+o},o.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(c.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,i=Object.keys(this),r=0;r<i.length;r++){var s=i[r];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var u=a[l];"protocol"!==u&&(n[u]=t[u])}return k[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!k[t.protocol]){for(var p=Object.keys(t),h=0;h<p.length;h++){var f=p[h];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||w[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",_=n.search||"";n.path=m+_}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=y||g||n.host&&t.pathname,b=v,C=n.pathname&&n.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],S=n.protocol&&!k[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),v=v&&(""===d[0]||""===C[0])),y)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,C=d;else if(d.length)C||(C=[]),C.pop(),C=C.concat(d),n.search=t.search,n.query=t.query;else if(!c.isNullOrUndefined(t.search)){if(S){n.hostname=n.host=C.shift();var O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return n.search=t.search,n.query=t.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=C.slice(-1)[0],T=(n.host||t.host||C.length>1)&&("."===E||".."===E)||""===E,x=0,R=C.length;R>=0;R--)E=C[R],"."===E?C.splice(R,1):".."===E?(C.splice(R,1),x++):x&&(C.splice(R,1),x--);if(!v&&!b)for(;x--;x)C.unshift("..");!v||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),T&&"/"!==C.join("/").substr(-1)&&C.push("");var P=""===C[0]||C[0]&&"/"===C[0].charAt(0);if(S){n.hostname=n.host=P?"":C.length?C.shift():"";var O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return v=v||n.host&&C.length,v&&!P&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=p.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){(function(t,o){var i;!function(r){function s(t){throw new RangeError(D[t])}function a(t,e){for(var n=t.length,o=[];n--;)o[n]=e(t[n]);return o}function l(t,e){var n=t.split("@"),o="";return n.length>1&&(o=n[0]+"@",t=n[1]),t=t.replace(j,"."),o+a(t.split("."),e).join(".")}function c(t){for(var e,n,o=[],i=0,r=t.length;i<r;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<r?(n=t.charCodeAt(i++),56320==(64512&n)?o.push(((1023&e)<<10)+(1023&n)+65536):(o.push(e),i--)):o.push(e);return o}function u(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=A(t>>>10&1023|55296),t=56320|1023&t),e+=A(t)}).join("")}function p(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function h(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,n){var o=0;for(t=n?B(t/O):t>>1,t+=B(t/e);t>I*C>>1;o+=w)t=B(t/I);return B(o+(I+1)*t/(t+S))}function d(t){var e,n,o,i,r,a,l,c,h,d,m=[],_=t.length,g=0,y=T,v=E;for(n=t.lastIndexOf(x),n<0&&(n=0),o=0;o<n;++o)t.charCodeAt(o)>=128&&s("not-basic"),m.push(t.charCodeAt(o));for(i=n>0?n+1:0;i<_;){for(r=g,a=1,l=w;i>=_&&s("invalid-input"),c=p(t.charCodeAt(i++)),(c>=w||c>B((b-g)/a))&&s("overflow"),g+=c*a,h=l<=v?k:l>=v+C?C:l-v,!(c<h);l+=w)d=w-h,a>B(b/d)&&s("overflow"),a*=d;e=m.length+1,v=f(g-r,e,0==r),B(g/e)>b-y&&s("overflow"),y+=B(g/e),g%=e,m.splice(g++,0,y)}return u(m)}function m(t){var e,n,o,i,r,a,l,u,p,d,m,_,g,y,v,S=[];for(t=c(t),_=t.length,e=T,n=0,r=E,a=0;a<_;++a)(m=t[a])<128&&S.push(A(m));for(o=i=S.length,i&&S.push(x);o<_;){for(l=b,a=0;a<_;++a)(m=t[a])>=e&&m<l&&(l=m);for(g=o+1,l-e>B((b-n)/g)&&s("overflow"),n+=(l-e)*g,e=l,a=0;a<_;++a)if(m=t[a],m<e&&++n>b&&s("overflow"),m==e){for(u=n,p=w;d=p<=r?k:p>=r+C?C:p-r,!(u<d);p+=w)v=u-d,y=w-d,S.push(A(h(d+v%y,0))),u=B(v/y);S.push(A(h(u,0))),r=f(n,g,o==i),n=0,++o}++n,++e}return S.join("")}function _(t){return l(t,function(t){return R.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return l(t,function(t){return P.test(t)?"xn--"+m(t):t})}var y=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof o&&o);var v,b=2147483647,w=36,k=1,C=26,S=38,O=700,E=72,T=128,x="-",R=/^xn--/,P=/[^\x20-\x7E]/,j=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-k,B=Math.floor,A=String.fromCharCode;v={version:"1.4.1",ucs2:{decode:c,encode:u},decode:d,encode:m,toASCII:g,toUnicode:_},void 0!==(i=function(){return v}.call(e,n,e,t))&&(t.exports=i)}()}).call(e,n(73)(t),n(5))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(76),e.encode=e.stringify=n(77)},function(t,e,n){"use strict";function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,r){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;r&&"number"==typeof r.maxKeys&&(l=r.maxKeys);var c=t.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var p,h,f,d,m=t[u].replace(a,"%20"),_=m.indexOf(n);_>=0?(p=m.substr(0,_),h=m.substr(_+1)):(p=m,h=""),f=decodeURIComponent(p),d=decodeURIComponent(h),o(s,f)?i(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function o(t,e){if(t.map)return t.map(e);for(var n=[],o=0;o<t.length;o++)n.push(e(t[o],o));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(i(s))+n;return r(t[s])?o(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";var o=n(79),i=n(80);e.a={EVENTS:o.a,DEFAULTS:i.a}},function(t,e,n){"use strict";e.a={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",WINDOW_RESIZE:"window:resize",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:updated",HISTORY_BEFORE_UNDO:"history:before-undo",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_REAPPLY_RATIO:"transform:reapply-ratio",ADDED_STICKER:"sticker:added-sticker"}},function(t,e,n){"use strict";var o=n(2),i=n.n(o),r=n(81),s=n(82),a=[];void 0!==i.a.Operations.SpriteOperation&&a.push(i.a.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush),e.a={TRANSFORM_RATIO_CATEGORIES:s.a,FONTS:r.a,BRUSHES:a}},function(t,e,n){"use strict";e.a=[{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Bernier",variations:[{identifier:"imgly_font_bernier_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_bernier_regular.woff",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}}]},{fontFamily:"Cheque",variations:[{identifier:"imgly_font_cheque_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_cheque_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-495}}]},{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Hagin",variations:[{identifier:"imgly_font_hagin_caps_thin",fontWeight:200,provider:"file",filePath:"fonts/imgly_font_hagin_caps_thin.woff",textMetrics:{unitsPerEm:2048,ascender:1964,descender:-482}}]},{fontFamily:"Intro",variations:[{identifier:"imgly_font_intro_inline",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_intro_inline.woff",textMetrics:{unitsPerEm:2048,ascender:1944,descender:-548}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Nexa",variations:[{identifier:"imgly_font_nexa_script",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_nexa_script.woff",textMetrics:{unitsPerEm:2048,ascender:1835,descender:-663}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Panton",variations:[{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_blackitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-572}},{identifier:"imgly_font_panton_light_italic_caps",fontWeight:200,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_lightitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:1961,descender:-556}}]},{fontFamily:"Perfograma",variations:[{identifier:"imgly_font_perfograma",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_perfograma.woff",textMetrics:{unitsPerEm:2048,ascender:1982,descender:-842}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]}]},function(t,e,n){"use strict";var o=n(2),i=n.n(o);e.a=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",ratio:1},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:new i.a.Math.Vector2(1200,627)},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:new i.a.Math.Vector2(940,788)},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:new i.a.Math.Vector2(851,315)}]}]},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=n.n(s),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=a.a.EventEmitter,p=a.a.Log,h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=i(this,t.call(this));return r.setMaxListeners(50),r._canBroadcast=!0,r.state=n,r}return r(e,t),e.prototype.set=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"object"!==(void 0===t?"undefined":c(t))&&p.info("SharedState#set expects an object as first parameter");var n=l({},this.state,t),o=l({},this.state);this.state=n,e&&this.broadcastUpdate(o,n)},e.prototype.get=function(t){return this.state[t]},e.prototype.getState=function(){return this.state},e.prototype.broadcastUpdate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._canBroadcast&&this.emit("update",t,e)},e.prototype.enableBroadcast=function(){this._canBroadcast=!0},e.prototype.disableBroadcast=function(){this._canBroadcast=!1},e.prototype.clear=function(){var t=this.state;this.state={},this.broadcastUpdate(t,this.state)},e}(u);e.a=h},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(8),l=n(85),c=n(90),u=n(121),p=n(30),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},f={loading:u.a,editor:c.a},d=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));a._bindAll("_onLoadingDone","_onPreloaderDone","_onImageDone");var l=a.props,p=l.options,h=l.ui,f=p.editor.image;a._preloaderIsComplete=!p.preloader,p.preloader&&(a._preloader=h.getPreloader(),a._preloader.on("done",a._onPreloaderDone)),a._imageIsComplete=f.complete,f.addEventListener("load",a._onImageDone);var d=!a._preloaderIsComplete||!a._imageIsComplete,m=d?u.a:c.a;return a.state={theme:a.props.ui.getTheme(),screen:m,screenOptions:{}},a}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._preloader&&this._preloader.load()},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._preloader&&this._preloader.off("done",this._onPreloaderDone)},e.prototype._onImageDone=function(){this._imageIsComplete=!0,this._onLoadingDone()},e.prototype._onPreloaderDone=function(){this._preloaderIsComplete=!0,this._onLoadingDone()},e.prototype._onLoadingDone=function(){this._preloaderIsComplete&&this._imageIsComplete&&this.setState({screen:c.a,screenOptions:{}})},e.prototype.getChildContext=function(){return{ui:this.props.ui,options:this.props.options,mediator:this.props.mediator,appComponent:this}},e.prototype.switchToScreen=function(t){this.setState({screen:f[t],screenOptions:{}})},e.prototype.getEditor=function(){return this._currentScreen.getEditor()},e.prototype.export=function(){var t;return(t=this._currentScreen).export.apply(t,arguments)},e.prototype.serialize=function(){var t;return(t=this._currentScreen).serialize.apply(t,arguments)},e.prototype.deserialize=function(t){return this._currentScreen.deserialize(t)},e.prototype.getBounds=function(){return this._container.getBoundingClientRect()},e.prototype.setImage=function(t){this.getEditor().setImage(t)},e.prototype._renderCurrentScreen=function(){var t=this,e=this.state,n=e.screen,o=e.screenOptions;return s.l.createElement(n,h({},o,{innerRef:function(e){t._currentScreen=e}}))},e.prototype.render=function(){var t=this;return s.l.createElement(s.t,{theme:this.state.theme},s.l.createElement(m,{className:"photoeditorsdk-editor",innerRef:function(e){t._container=e}},s.l.createElement(l.a,{modalManager:a.a.instance}),this._renderCurrentScreen()))},e}(p.a);d.childContextTypes={ui:s.k.object.isRequired,mediator:s.k.object.isRequired,options:s.k.object.isRequired,appComponent:s.k.object.isRequired},d.propTypes={ui:s.k.object.isRequired,mediator:s.k.object.isRequired,options:s.k.object.isRequired},e.a=d;var m=s.w.div("wspo5c","AppContainer")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(86),l=n(87),c=n(88),u=n(89),p=n(12),h=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._modalManager=a.props.modalManager,a._bindAll("_onModalManagerUpdate"),a.state={overlayVisible:!1},a}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._modalManager.on("update",this._onModalManagerUpdate)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._modalManager.off("update",this._onModalManagerUpdate)},e.prototype._onModalManagerUpdate=function(){var t=this._modalManager.getModals(),e=t.filter(function(t){return t.visible}).filter(function(t){return!!t.overlay}).length>0;this.state.overlayVisible=e,this.forceUpdate()},e.prototype._onModalClosed=function(t){this._modalManager.removeModal(t)},e.prototype._renderModals=function(){var t=this;return this._modalManager.getModals().map(function(e){var n=void 0;switch(e.type){case"loading":n=a.a;break;case"warning":n=l.a;break;case"error":n=c.a;break;case"progress":n=u.a}return s.l.createElement(n,{modal:e,key:e.id,onClose:t._onModalClosed.bind(t,e)})})},e.prototype.render=function(){return s.l.createElement(d,null,s.l.createElement(p.a,{active:this.state.overlayVisible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},s.l.createElement(f,null)),s.l.createElement("div",null,this._renderModals()))},e}(s.b);h.contextTypes=s.b.contextTypes,e.a=h;var f=s.w.div("ovs9m3",{visible:"zgbg08",rendered:"2jlos"},"Overlay"),d=s.w.div("8gacw5","Container")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(11),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e}(a.a);l.contextTypes=s.b.contextTypes,e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(11),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._buttons=a.props.modal.data.buttons||["OK"],a}return r(e,t),e.prototype._onButtonClick=function(t){this.props.modal.emit("button",t),this.props.modal.close()},e}(a.a);l.contextTypes=s.b.contextTypes,e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(11),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._buttons=["Okay"],a}return r(e,t),e.prototype._onButtonClick=function(t){0===t&&this.props.modal.close()},e}(a.a);l.contextTypes=s.b.contextTypes,e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(11),a=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e}(s.a);a.contextTypes=s.a.contextTypes,e.a=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(33),l=n(114),c=n(116),u=n(8),p=n(47),h=n(48),f=n(21),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},m=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];var c=i(this,t.call.apply(t,[this].concat(r)));c._bindAll("_onRenderError","_onImageResize","_startEditor","_onEditorReset");var u=c.context,p=u.ui,h=u.options,f=u.mediator;return c._editor=new a.a(p,h,f),c._editor.on("ready",c._startEditor),c._editor.on("render-error",c._onRenderError),c._editor.on("resize",c._onImageResize),c._editor.on("reset",c._onEditorReset),c._onWindowResize=s.u.debounce(c._onWindowResize.bind(c),250),c._originalToolsOption=null,c._needsForceCrop=!1,c.state={sharedState:new s.s,controls:null,controlsOptions:{},currentControl:null},c}return r(e,t),e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this),this.context.options.responsive&&window.addEventListener("resize",this._onWindowResize),this._editor.isReady()?!this._hasSwitchedControls&&this.switchToInitialControls():this._editor.once("ready",function(){!e._hasSwitchedControls&&e.switchToInitialControls()})},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.context.options.responsive&&window.removeEventListener("resize",this._onWindowResize)},e.prototype._onEditorReset=function(){"library"!==this.state.currentControl&&this.switchToInitialControls()},e.prototype._onImageResize=function(){var t=this,e=u.a.instance.displayLoading(this._t("loading.resizing"));this._editor.once("resized",function(n){var o=n.dimensions,i=n.reason;e.close(),t.context.options.editor.displayResizeMessage&&u.a.instance.displayWarning(t._t("warnings.imageResized_"+i+".title"),t._t("warnings.imageResized_"+i+".text",{maxMegaPixels:t._editor.getMaxMegapixels(),width:o.x,height:o.y}))})},e.prototype._onRenderError=function(t){u.a.instance.displayError(this._t("errors.title"),this._t("errors.renderingError.text"),!0)},e.prototype._onWindowResize=function(){this._emitEvent(s.d.EVENTS.WINDOW_RESIZE);var t=new s.v(this._container.offsetWidth,this._container.offsetHeight);this._emitEvent(s.d.EVENTS.EDITOR_RESIZE,t)},e.prototype.switchToInitialControls=function(t){var e=this.context.options,n=!1;if(e.editor.forceCrop&&this._editor.controls.isEnabled("transform")&&!this._hasSwitchedControls){var o=this._editor.getInputDimensions(),i=new p.a(e.editor.controlsOptions.transform||{}),r=o.x/o.y;n=!i.hasRatioValue(r)}n?(this._needsForceCrop=!0,this.switchToForceCropControls(t)):(this._needsForceCrop=!1,this.switchToDefaultControls(t))},e.prototype.switchToDefaultControls=function(t){var e=this.context.options,n=e.editor.defaultControl;this._originalToolsOption&&(e.editor.tools=this._originalToolsOption,this._originalToolsOption=null),this._editor.controls.isEnabled(n)||(s.h.warn("Trying to switch to default control `"+n+"` which is not available. Falling back to first available control."),n=this._editor.controls.getFirstEnabledControlName()),this.switchToControls(n,null,null,t)},e.prototype.switchToForceCropControls=function(t){var e=this.context.options,n=e.editor.tools;this._originalToolsOption||(this._originalToolsOption=n,e.editor.tools=s.q.Array.remove(n,function(t){return"transform"!==t&&"library"!==t})),this.switchToControls("transform",null,null,t)},e.prototype.switchToControls=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,o=arguments[2],i=arguments[3];if(this.state.currentControl===t)return i&&i();this._hasSwitchedControls=!0;var r=this.state.sharedState;if("default"===t)return this.switchToDefaultControls(i);if(!this._editor.controls.isEnabled(t))return s.h.warn("Tried to open control `"+t+"` which is not available.");var a=this._editor.controls.getAvailable(),l=a[t];if(!l&&"overview"!==t)return s.h.error("Control `"+t+"` does not exist!");var c=Promise.resolve(!0);this.state.controls&&(c=this.state.controls.onLeave()),c.then(function(a){if(a){r.disableBroadcast(),r.disableBroadcast(),r.clear(),r.set(d({},e,{forceCrop:n._needsForceCrop}));var c=s.q.defaults(o||n.context.options.editor.controlsOptions[l.identifier],l.defaultOptions),u=new l(n.getChildContext(),n.state.sharedState,c);u.onEnter(),r.enableBroadcast(),n.setState({controls:u,controlsOptions:c,currentControl:t},i)}})},e.prototype._startEditor=function(){var t=this.context.options;this._editor.start(),t.editor.forceCrop&&(this._hasSwitchedControls=!1,this.switchToInitialControls())},e.prototype.getChildContext=function(){return{editor:this._editor,ui:this.context.ui,options:this.context.options,mediator:this.context.mediator,sharedState:this.state.sharedState,screen:this,appComponent:this.context.appComponent}},e.prototype.render=function(){var t=this,e=this.state,n=e.controls,o=e.controlsOptions,i=void 0,r=void 0;if(n){var a=n.constructor,u=a.controlsComponent,p=a.canvasControlsComponent;i=u?s.l.createElement(u,{options:o,controls:n}):s.l.createElement("div",null),r=p?s.l.createElement(p,{options:o,controls:n}):s.l.createElement("div",null)}else i=s.l.createElement(h.a,null),r=s.l.createElement(f.a,null);return s.l.createElement(_,{innerRef:function(e){e&&(t._container=e)},className:void 0},s.l.createElement(c.a,{ref:"canvas"}),s.l.createElement(g,{innerRef:function(e){t._tableContainer=e}},s.l.createElement(l.a,{onControlSwitch:this.switchToControls.bind(this),currentControl:this.state.currentControl}),i,r))},e.prototype.getEditor=function(){return this._editor},e.prototype.export=function(){var t;return(t=this._editor).export.apply(t,arguments)},e.prototype.serialize=function(){var t;return(t=this._editor).serialize.apply(t,arguments)},e.prototype.deserialize=function(t){return this._editor.deserialize(t)},e}(s.b);m.contextTypes=s.b.contextTypes,m.childContextTypes={ui:s.k.object.isRequired,editor:s.k.object.isRequired,mediator:s.k.object.isRequired,options:s.k.object.isRequired,sharedState:s.k.object.isRequired,screen:s.k.object.isRequired,appComponent:s.k.object.isRequired};var _=s.w.div("5x8wsv","Container"),g=s.w.div("1b28xzz","TableContainer");e.a=Object(s.A)(m)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=n(92),s=function(){function t(e,n,i){o(this,t),this._sdk=e,this._options=n,this._download=i}return t.prototype.export=function(){var t=this,e=this._getRenderType();return this._sdk.export(e,this._options.format,this._options.quality).then(function(n){return t._download&&t._downloadData(e,n),n})},t.prototype._downloadData=function(t,e){switch(t){case i.o.DATAURL:r.a.downloadDataURL(e,this._options.fileBasename);break;case i.o.MSBLOB:r.a.downloadMSBlob(e,this._options.fileBasename)}},t.prototype._getRenderType=function(){var t=this._options;return t.type===i.o.IMAGE&&this._download?i.u.supportsMSBlob()?i.o.MSBLOB:i.o.DATAURL:t.type},t}();e.a=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=function(){function t(){o(this,t)}return t.downloadDataURL=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",n=this.createBlobURLFromDataURL(t),o=this.getExtensionFromDataURL(t),i=document.createElement("a");i.download=e+"."+o,i.href=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)},t.downloadMSBlob=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob(t,e+".png")},t.getExtensionFromDataURL=function(t){return t.split(",")[0].split(":")[1].split(";")[0].split("/").pop()},t.createBlobURLFromDataURL=function(t){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return t;for(var e=i.a.decode(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(e.length),r=new Uint8Array(o),s=0;s<e.length;s++)r[s]=e[s];var a=new window.Blob([o],{type:n});return window.URL.createObjectURL(a)},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=function(){function t(e,n,i){o(this,t),this._image=e,this._maxPixels=n,this._maxDimensions=i}return t.prototype.needsResize=function(){var t=new i.v(this._image.width,this._image.height),e=t.x*t.y,n=e>this._maxPixels,o=null!==this._maxDimensions&&(t.x>this._maxDimensions||t.y>this._maxDimensions);return n||o},t.prototype.resize=function(){var t=this,e=null,n=null,o=this._maxDimensions;return new i.j(function(r,s){window.setTimeout(function(){var s=new i.v(t._image.width,t._image.height),a=s.clone();if(a.x*a.y>t._maxPixels&&(a.copy(t._getDimensionsByMaxPixels()),e="maxMegaPixels"),null!==o&&(a.x>o||a.y>o)){var l=Math.min(o/a.x,o/a.y);a.multiply(l),e="maxDimensions"}a.floor(),n=t._createResizedImageCanvas(a),r({canvas:n,dimensions:a,reason:e})},1e3)})},t.prototype._createResizedImageCanvas=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this._image,o=document.createElement("canvas");o.width=t.x,o.height=t.y;var i=t.clone().subtract(e).divide(2);return o.getContext("2d").drawImage(n,0,0,n.width,n.height,i.x,i.y,e.x,e.y),o},t.prototype._getDimensionsByMaxPixels=function(){var t=this._image,e=this._maxPixels,n=t.width/t.height,o=t.height/t.width;return new i.v(Math.sqrt(e*n),Math.sqrt(e*o)).floor()},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(2),r=n.n(i),s=n(0),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(e,n,i){o(this,t),this._editor=e,this._sdk=n,this._mediator=i,this._map={},this._stack=this._sdk&&this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._available={};var s=r.a.Operations;for(var a in s){var l=s[a];this._available[l.identifier]=l}var c=e.getOptions(),u=c.extensions.operations;for(var p in u){var h=u[p];this._available[h.identifier]=h}this._stack&&this._fixStack()}return t.prototype.exists=function(t){return!!this._map[t]},t.prototype.add=function(t){var e=this,n=t.constructor.identifier;t.on("update",function(){e._mediator.emit(s.d.EVENTS.OPERATION_UPDATED,t)});var o=this._preferredOrder.indexOf(n);if(-1===o)throw new Error("EditorOperations#add: `"+n+"` does not appear in `operationsOrder`");this._stack.set(o,t),this._map[n]=t,this._mediator.emit(s.d.EVENTS.OPERATION_CREATED,t)},t.prototype.remove=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="object"===(void 0===t?"undefined":a(t))?t.constructor.identifier:t,o=this._stack.getStack();t=this.get(n),delete this._map[n];var i=o.map(function(t){return t.constructor.identifier}).indexOf(n);if(-1!==i){this._stack.removeAt(i);for(var r=i+1;r<o.length;r++){var l=o[r];l&&l.setDirty(!0)}e&&this._mediator.emit(s.d.EVENTS.OPERATION_REMOVED,t)}},t.prototype.get=function(t){return this._map[t]},t.prototype.getOrCreate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[t]){var n=this._map[t];return n.set(e,!1),n}var o=this._available[t];if(void 0===o)return s.h.warn("Trying to create an operation of type `"+t+"` that is not available."),null;var i=new o(this._sdk,e);return this.add(i),i},t.prototype.getStack=function(){return this._stack},t.prototype.getSnapshot=function(){var t=this,e={};return Object.keys(this._map).forEach(function(n){var o=t._map[n];e[n]=o.serializeOptions()}),e},t.prototype.removeUnused=function(){var t=this;Object.keys(this._map).forEach(function(e){var n=t._map[e];n.hasChanges()||t.remove(n)})},t.prototype.hasChanges=function(t){var e=this,n=!1;return Object.keys(this._map).forEach(function(e){t[e]||(n=!0)}),!!n||(Object.keys(t).forEach(function(o){var i=e.get(o);if(!i)return void(n=!0);i.optionsEqual(t[o])||(n=!0)}),n)},t.prototype.restoreSnapshot=function(t){var e=this;Object.keys(t).forEach(function(n){var o=e.getOrCreate(n);o.optionsEqual(t[n])||(o.restoreSnapshot?o.restoreSnapshot(t[n]):o.set(t[n]))}),Object.keys(this._map).forEach(function(n){t[n]||e.remove(n)})},t.prototype.isAvailable=function(t){return!!this._available[t]},t.prototype.getAvailable=function(){return this._available},t.prototype.reset=function(){this._map={}},t.prototype._fixStack=function(){var t=this,e=this._stack.getStack().slice();this._stack.clear(),e.forEach(function(e){t.add(e)})},t}();e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(2),r=n.n(i),s=n(0),a=function(){function t(e,n,i){var s=this;o(this,t),this._editor=e,this._sdk=n,this._mediator=i,this._options=this._editor.getOptions(),this._invalidOperationsSeen=[],this._available={};var a=r.a.UI.DesktopUI.Controls;for(var l in a){var c=a[l];this._available[c.identifier]=c}(this._options.extensions.controls||[]).forEach(function(t){s._available[t.identifier]=t})}return t.prototype.getFirstEnabledControlName=function(){for(var t in this._available)if(this.isEnabled(t))return t;return null},t.prototype.isEnabled=function(t){var e=this,n=this.get(t);if(!n)return s.h.info("EditorControls#isEnabled: Unknown control: "+t),!1;var o=n.requiredOperations||[],i=[];return o.forEach(function(t){e._editor.operations.isAvailable(t)||i.push(t)}),i.length?(-1===this._invalidOperationsSeen.indexOf(t)&&(this._invalidOperationsSeen.push(t),s.h.error("Control `"+t+"` can not be used because "+(1===i.length?"operation is":"operations are")+" missing: "+i.map(function(t){return"`"+t+"`"}).join(", "))),!1):n.isEnabled(this._editor)},t.prototype.get=function(t){return this._available[t]},t.prototype.getAvailable=function(){return this._available},t}();e.a=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=function(){function t(e,n,i){o(this,t),this._editor=e,this._sdk=n,this._mediator=i,this._options=this._editor.getOptions(),this.reset()}return t.prototype.isEnabled=function(t){return this._features[t]&&this.isEnabledByOptions(t)},t.prototype.isEnabledByOptions=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1),n=this._options.editor["enable"+e];return void 0===n&&(n=!0),n},t.prototype.enable=function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach(function(e){t._features[e]=!0}),this._mediator.emit(i.d.EVENTS.FEATURES_ENABLED,n),this._mediator.emit(i.d.EVENTS.FEATURES_UPDATED,n)},t.prototype.disable=function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach(function(e){t._features[e]=!1}),this._mediator.emit(i.d.EVENTS.FEATURES_DISABLED,n),this._mediator.emit(i.d.EVENTS.FEATURES_UPDATED,n)},t.prototype.reset=function(){this._features={drag:this._options.editor.enableDrag,zoom:this._options.editor.enableZoom,export:!0,new:!0}},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(98),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(t){function e(n,r,s){o(this,e);var a=i(this,t.call(this));return a._editor=n,a._sdk=r,a._mediator=s,a._isDefaultZoom=!1,a._zoom=a._sdk.getZoom(),a._targetZoom=a._zoom,a._options=a._editor.getOptions(),a._zoomLevels=[1,2,3,4,5,6.25,8.33,12.5,16.66,25,33.33,50,66.66,100,200,300,400,500,600,700,800,1200,1600,3200].map(function(t){return t/100}),a._editor.on("ready",function(){a._defaultLevel=a._calculateDefaultZoomLevel()}),a}return r(e,t),e.prototype.auto=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];t&&(this._defaultLevel=this._calculateDefaultZoomLevel()),this.set(this._defaultLevel,e,n)},e.prototype.in=function(t){var e=this._getClosestZoomLevel(this._targetZoom+.001,1);e=this._clamp(e),this.set(e,t)},e.prototype.out=function(t){var e=this._getClosestZoomLevel(this._targetZoom-.001,-1);e=this._clamp(e),this.set(e,t)},e.prototype._clamp=function(t){var e=this._calculateDefaultZoomLevel(),n=Math.max(1,2*e),o=this.minimum;return Math.max(o,Math.min(n,t))},e.prototype.set=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments[2];this._targetZoom=t,this._mediator.emit(s.d.EVENTS.ZOOM,t),this._zoom===this._targetZoom&&(n=!0),this._transition&&(this._transition.stop(),this._transition=null);var i=function(t){e._set(t,function(){o&&o(),e._mediator.emit(s.d.EVENTS.ZOOM_DONE,e._zoom)}),e._transition=null,e._sdk.setTextureQuality(Math.min(e._zoom,1))};if(n)return i(t);this._transition=new a.a({zoom:this._zoom},{zoom:t},{duration:300,easing:"easeOutQuart",onUpdate:function(t){e._set(t.zoom)},onDone:function(t){i(t.zoom)}}),this._transition.start()},e.prototype.tick=function(){this._transition&&this._transition.update()},e.prototype._getClosestZoomLevel=function(t,e){var n=void 0;return-1===e?(n=this._zoomLevels.filter(function(e){return e<t}).pop())||(n=this._zoomLevels[this._zoomLevels.length-1]):1===e&&((n=this._zoomLevels.filter(function(e){return e>t})[0])||(n=this._zoomLevels[0])),n},e.prototype.undo=function(){this._previousZoom&&(this.set(this._previousZoom),this._previousZoom=null)},e.prototype._set=function(t,e){this._zoom=t,this._sdk.setZoom(this._zoom),this._mediator.emit(s.d.EVENTS.ZOOM_CHANGED,this._zoom),this.emit("set",this._zoom,e)},e.prototype._calculateDefaultZoomLevel=function(){var t=this._editor.getFinalDimensions(!1),e=this._editor.getCanvasDimensions();return s.q.resizeVectorToFit(t,e).divide(t).x},e.prototype.getSnapshot=function(){return{zoom:this._targetZoom}},e.prototype.restoreSnapshot=function(t){this.set(t.zoom,!0)},l(e,[{key:"minimum",get:function(){var t=this._editor.getFinalDimensions();return s.q.resizeVectorToFit(t,new s.v(300,300)).divide(t).x}},{key:"level",get:function(){return this._zoom}},{key:"defaultLevel",get:function(){return this._defaultLevel}},{key:"targetLevel",get:function(){return this._targetZoom}}]),e}(s.e);e.a=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(2),r=(n.n(i),{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}),s=function(){function t(e,n,r){o(this,t),this._obj=e,this._initialObj=i.Utils.clone(e),this._targetValues=n,this._options=i.Utils.defaults(r,{duration:1e3,easing:"easeOutQuad",onUpdate:function(){},onDone:function(){}}),this._startedAt=null,this._running=!1}return t.prototype.start=function(){this._startedAt=+new Date,this._running=!0},t.prototype.update=function(){if(this._running){var t=+new Date-this._startedAt,e=r[this._options.easing],n=Math.min(1,t/this._options.duration),o=e(n);for(var i in this._initialObj){var s=this._initialObj[i],a=this._targetValues[i];this._obj[i]=s+(a-s)*o}this._options.onUpdate(this._obj),n>=1&&(this._options.onDone(this._obj),this.stop())}},t.prototype.stop=function(){this._running=!1},t}();e.a=s},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(0)),c=function(t){function e(n,o,s){i(this,e);var a=r(this,t.call(this));return a._editor=n,a._sdk=o,a._mediator=s,a._undoItems=[],a._redoItems=[],a}return s(e,t),e.prototype.hasInitialState=function(){return a.Utils.flatten(this.getUndoItems()).length>0},e.prototype.isUndoAvailable=function(){return a.Utils.flatten(this.getUndoItems()).length>1},e.prototype.isRedoAvailable=function(){return a.Utils.flatten(this.getRedoItems()).length>0},e.prototype.addSnapshot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this._editor.getSnapshot(),s={snapshot:r,scope:t,identifier:n,controls:o,data:i},c=a.Utils.Array.last(this._undoItems);c&&e&&s.identifier===c.identifier&&this._undoItems.pop(),this._undoItems.push(s),this._mediator.emit(l.d.EVENTS.HISTORY_UPDATED,s.operation),this._redoItems=[]},e.prototype.undo=function(){var t=this._undoItems,e=t.pop(),n=a.Utils.Array.last(t);n&&e&&(this._editor.restoreSnapshot(n.snapshot),this._mediator.emit(l.d.EVENTS.HISTORY_UNDO,n,e),this._redoItems.push(e),this.emit("undo"))},e.prototype.redo=function(){var t=this._redoItems,e=t.pop();e&&(this._editor.restoreSnapshot(e.snapshot),this._mediator.emit(l.d.EVENTS.HISTORY_REDO,e),this._undoItems.push(e),this.emit("redo"))},e.prototype.remove=function(t){var e=t.scope,n=t.identifier,o=t.controls,i=function(t,i,r){return!(e&&e!==t.scope||n&&n!==t.identifier||o&&o!==t.controls)};this._undoItems=a.Utils.Array.remove(this._undoItems,i),this._redoItems=a.Utils.Array.remove(this._redoItems,i)},e.prototype.removeLocal=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.remove({scope:"local",identifier:t,controls:e})},e.prototype.removeGlobal=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.remove({scope:"global",identifier:t,controls:e})},e.prototype.removeControls=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.remove({scope:e,controls:t,identifier:n})},e.prototype.reset=function(){this._undoItems=[],this._redoItems=[]},e.prototype.getUndoItems=function(){return[].concat(o(this._undoItems))},e.prototype.getItems=function(){return this.getUndoItems()},e.prototype.getRedoItems=function(){return[].concat(o(this._redoItems))},e}(l.e);e.a=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(34),r=n(35),s=function(){function t(e){o(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new i.a(this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){return new r.a(this._editor,t).deserialize()},t}();e.default=s,s.version="1.0.0"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e}(s.Configurable));e.a=a,a.prototype.availableOptions={fontFamily:{type:s.OptionType.STRING,required:!0},variations:{type:s.OptionType.ARRAY,required:!0}}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(40),a={italic:"i"},l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.load=function(){return this._fonts.length&&this._addStylesheetTag(),t.prototype.load.call(this)},e.prototype._addStylesheetTag=function(){var t=this._getFamiliesString(),e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css?family="+t,document.getElementsByTagName("head")[0].appendChild(e)},e.prototype._getFamiliesString=function(){var t={};this._fonts.forEach(function(e){var n=e.getFontFamily(),o=e.getFontStyle(),i=e.getFontWeight();t[n]=t[n]||[],void 0!==i?t[n].push(""+i+(a[o]||"")):t[n].push(400)});var e=[];for(var n in t){var o=t[n],i=o.length?":"+o.join(","):"",r=n.replace(" ","+")+i;e.push(r)}return e.join("|")},e}(s.a);e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(104),r="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(32),s=function(){function t(e){o(this,t),this._fontVariation=e,this._defaultFontRuler=new i.a,this._customFontRuler=new i.a(this._fontVariation)}return t.prototype.observe=function(){var t=this,e=r();return new Promise(function(n,o){var i=window.setInterval(function(){if(t._defaultFontRuler.getWidth()!==t._customFontRuler.getWidth())return window.clearInterval(i),n();if(r()-e>=5e3){var s=new Error("Failed to load font "+t._fontVariation.getFontFamily()+".");return s.font=t._fontVariation,o(s)}},50)})},t.prototype.dispose=function(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()},t}();e.a=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(39),r=function(){function t(e){o(this,t),this._fontVariation=e||new i.a({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}return t.prototype._createRuler=function(){this._ruler=document.createElement("div"),this._ruler.innerText="abcdefghijklmnopqrstuvwxzy",document.body.appendChild(this._ruler),this._setRulerStyle()},t.prototype._setRulerStyle=function(){this._ruler.style.cssText="\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      opacity: 0;\n      display: inline-block;\n      font: "+this._fontVariation.getFontStyle()+" "+this._fontVariation.getFontWeight()+" 30px "+this._fontVariation.getFontFamily()+";\n    "},t.prototype.setFontVariation=function(t){this._fontVariation=t,this._setRulerStyle()},t.prototype.getWidth=function(){return this._ruler?this._ruler.offsetWidth:-1},t.prototype.dispose=function(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(40),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.load=function(){var e=this,n=[];return this._fonts.forEach(function(t){var o=e._ui.getAssetPath(t.getFilePath(),!1,!0);n.push('@font-face {\n        font-family: "'+t.getFontFamily()+"\";\n        src: url('"+o+"') format('woff');\n        font-weight: "+t.getFontWeight()+";\n        font-style: "+t.getFontStyle()+";\n      }")}),s.w.global(n.join("\n"),!0),t.prototype.load.call(this)},e}(a.a);e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(41),r=n(42),s=function(){function t(e){o(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new i.a(this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){return new r.a(this._editor,t).deserialize()},t}();e.default=s,s.version="1.0.1"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),r=n(20),s=function(){function t(e){o(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new i.a(this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){return new r.a(this._editor,t).deserialize()},t}();e.default=s,s.version="2.0.0"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(109),r=n(110),s=function(){function t(e){o(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new i.a(this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){return new r.a(this._editor,t).deserialize()},t}();e.default=s,s.version="2.0.1"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(19),a=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e}(s.a);e.a=a,a.version="2.0.0"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(20),a=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e}(s.a);e.a=a,a.version="2.0.1"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(112),r=n(113),s=function(){function t(e){o(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new i.a(this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){return new r.a(this._editor,t).deserialize()},t}();e.default=s,s.version="3.0.0"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(19),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.serialize=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.prototype.serialize.call(this,n).then(function(t){return t.meta={platform:"html5",version:e._editor.getSDK().version,createdAt:s.q.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t})},e.prototype._serializeSticker=function(e,n){var o=t.prototype._serializeSticker.call(this,e,n);return o.options.alpha=n.getAlpha(),o.options.tintColor&&(o.options.tintColor={rgba:o.options.tintColor}),o},e.prototype._serializeText=function(e,n){var o=t.prototype._serializeText.call(this,e,n);return o.options.color={rgba:o.options.color},o.options.backgroundColor={rgba:o.options.backgroundColor},o.options.flipHorizontally=!1,o.options.flipVertically=!1,delete o.options.fontWeight,o},e.prototype._serializePath=function(e){var n=t.prototype._serializePath.call(this,e);delete n.hardness,delete n.size,delete n.color;var o=e.getBrush();n.brush=o.serializeOptions(["identifier","size","color"],!0),void 0===n.brush.identifier&&delete n.brush.identifier,n.brush.color={rgba:n.brush.color};var i=o.getOption("hardness");return"undefined"!==i&&(n.brush.hardness=i),n},e.prototype._serializeFrameOperation=function(e,n){t.prototype._serializeFrameOperation.call(this,e,n);var o=n.filter(function(t){return"sprite"===t.type}),i=void 0;if(o.length){i=o.pop();var r=i.options.sprites.filter(function(t){return"frame"===t.type})[0];e.getTintColor().equals(new s.c(1,1,1,0))||(r.options.tintColor={rgba:e.serializeOption("tintColor",!0)});var a=e.serializeOptions(["scale","alpha"],!0);r.options=s.q.extend(r.options,a),r.options.size=r.options.scale,delete r.options.scale}},e.prototype._serializeTransformOperation=function(e){var n=t.prototype._serializeTransformOperation.call(this,e);return e._ratio&&(n.options.meta={identifier:e._ratio.identifier}),delete n.options.scale,n},e.prototype._serializeAdjustmentsOperation=function(e){var n=t.prototype._serializeAdjustmentsOperation.call(this,e),o=e.availableOptions,i=o.gamma,r=e.getGamma(),s=i.minValue,a=i.midValue,l=i.maxValue;return n.options.gamma=r<=a?(r-s)/(a-s)-1:(r-a)/(l-a),n},e.prototype._serializeOperation=function(e,n){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return t.prototype._serializeOperation.call(this,e,n)}},e.prototype._serializeMirroredFocusOperation=function(t){return{type:"focus",options:{type:"mirrored",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}},e.prototype._serializeLinearFocusOperation=function(t){var e=t.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return e.start=e.controlPoint1,delete e.controlPoint1,e.end=e.controlPoint2,delete e.controlPoint2,{type:"focus",options:{type:"linear",options:e}}},e.prototype._serializeBlurOperation=function(t){return{type:"focus",options:{type:"gaussian",options:t.serializeOptions(["blurRadius"],!0)}}},e}(a.a);e.a=l,l.version="3.0.0"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(20),l=n(13),c=n(6),u=void 0;void 0!==s.p.Operations.SpriteOperation&&(u=s.p.Operations.SpriteOperation.BrushSprite.Brush);var p=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._deserializeSticker=function(t,e){var n=s.p.Operations.SpriteOperation,o=e.options,i=this._stickerManager.getStickerByIdentifier(o.identifier);if(!i)return s.h.warn("Deserializer","Unknown sticker `"+o.identifier+"`. Skipping sprite."),Promise.resolve();var r=l.a.getURLForSticker(i,"base"),a=this._editor.getUI().getAssetPath(r),u=t.getInputDimensions(!1);return c.a.load(a).then(function(e){var r=n.StickerSprite.prototype.availableOptions.adjustments.structure,a=o.rotation,l=o.flipHorizontally,c=o.flipVertically,p={identifier:o.identifier,image:e,position:s.v.fromObject(o.position),dimensions:s.v.fromObject(o.dimensions).multiply(u.min()),rotation:a||0,flipHorizontally:l,flipVertically:c,adjustments:{}};return void 0!==o.adjustments&&["brightness","contrast","saturation"].forEach(function(t){void 0!==o.adjustments[t]&&(p.adjustments[t]=o.adjustments[t]+r[t].default)}),void 0!==o.tintColor&&void 0!==i.tintMode&&(p.tintColor=s.c.fromArray(o.tintColor.rgba),p.tintMode=i.tintMode),void 0!==o.alpha&&(p.alpha=o.alpha),t.createSticker(p)})},e.prototype._deserializeTransformOperation=function(e){return t.prototype._deserializeTransformOperation.call(this,e).then(function(t){if(t)return t._ratio=null,t})},e.prototype._deserializeInputImage=function(){var t=this,e=this._data.image,n=e.data,o=e.type,i=e.uri;return n&&o&&(i="data:"+o+";base64,"+n),i?c.a.load(i).then(function(e){t._editor.setImage(e)}):Promise.resolve()},e.prototype._deserializeAdjustmentsOperation=function(e){var n=s.p.Operations.AdjustmentsOperation;return t.prototype._deserializeAdjustmentsOperation.call(this,e).then(function(t){if(!t)return null;var o=e.options;if(void 0!==o.gamma){var i=n.prototype.availableOptions.gamma,r=i.minValue,s=i.midValue,a=i.maxValue;t.setGamma(o.gamma<0?s+(s-r)*o.gamma:s+(a-s)*o.gamma)}return t})},e.prototype._deserializeFocusOperation=function(e){var n=e.options.options;switch(e.options.type){case"radial":return t.prototype._deserializeFocusOperation.call(this,e);case"linear":var o=n.start,i=n.end,r=n.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:s.v.fromObject(o),controlPoint2:s.v.fromObject(i),blurRadius:r}));case"mirrored":var a=n.start,l=n.end,c=n.size,u=n.gradientSize,p=n.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:s.v.fromObject(a),end:s.v.fromObject(l),size:c,gradientSize:u,blurRadius:p}));case"gaussian":var h=n.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:h}))}},e.prototype._deserializeText=function(t,e){var n=e.options,o=n.fontSize,i=n.lineHeight,r=n.fontIdentifier,a=n.alignment,l=n.rotation,c=n.maxWidth,u=n.color,p=n.backgroundColor,h=this._ui.getFontLoader(),f=this._fontManager.getVariationByIdentifier(r);return f?h.setFonts([f.getFont()]):f=this._fontManager.getDefaultVariation(),h.load().then(function(){var e=t.getInputDimensions(!1),r=c*e.min()/e.x;return t.createText({fontSize:o,lineHeight:i,fontFamily:f.getFontFamily(),fontWeight:f.getFontWeight(),fontIdentifier:f.getIdentifier(),textMetrics:f.getTextMetrics(),alignment:a,rotation:l,maxWidth:r,text:n.text,color:s.c.fromArray(u.rgba),backgroundColor:s.c.fromArray(p.rgba),position:s.v.fromObject(n.position)})})},e.prototype._createBrushForPath=function(t){var e=t.brush,n=e.identifier,a=e.color,l=e.size,c=e.hardness,p=s.c.fromArray(a.rgba),h={color:p,size:l};void 0!==c&&(h.hardness=c);var f=this._brushManager.getBrushByIdentifier(n);if(f||(f=this._brushManager.getFirstBrush()),f.prototype&&f.prototype instanceof u){return new f(h)}var d=s.q.extend({},f);delete d.image;var m=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e}(u);return m.identifier=f.identifier,new m(s.q.extend({},d,h))},e.prototype._deserializeFrame=function(e,n){var o=this;return t.prototype._deserializeFrame.call(this,e,n).then(function(){var t=o._editor.operations.get("frame"),e=n.options,i=e.size,r=e.alpha,a=e.tintColor,l={};void 0!==i&&(l.scale=i),void 0!==r&&(l.alpha=r),void 0!==a&&(l.tintColor=s.c.fromArray(a.rgba)),t.set(l)})},e}(a.a);e.a=p,p.version="3.0.0"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(115),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._needsStyleFixes=!0,a._bindAll("_onMouseEnter","_onMouseLeave"),a.state={isHovering:!1},a}return r(e,t),e.prototype.shouldComponentUpdate=function(t,e){return t.currentControl!==this.props.currentControl||e.isHovering!==this.state.isHovering},e.prototype._onItemClick=function(t){this.props.disabled||(this._onMouseLeave(),this.props.onControlSwitch(t))},e.prototype._onMouseEnter=function(){this.props.disabled||this.setState({isHovering:!0})},e.prototype._onMouseLeave=function(){this.props.disabled||this.setState({isHovering:!1})},e.prototype.fixStyles=function(){if(s.u.Browser.isIElte(10)){var t=this._navigation.offsetHeight;this._gradient.style.height=t+"px"}},e.prototype._getItemCount=function(t){var e=this;return t.reduce(function(t,n){return Array.isArray(n)?t+e._getItemCount(n):t+1},0)},e.prototype._renderListItems=function(){var t=this,e=this.context.editor,n=this.state.isHovering,o=function(o,i,r){var l=e.controls.get(o),c=o===t.props.currentControl;return s.l.createElement(a.a,{key:o,title:o,showTitle:n,iconPath:t._getAssetPath(l.iconPath,!0),activeIconPath:t._getAssetPath(l.activeIconPath,!0),selected:c,onClick:t._onItemClick.bind(t,o),animationDelay:.02*i,maxAnimationDelay:.02*r,disabled:t.props.disabled})},i=function(t){return s.l.createElement(a.a,{key:t,isSeparator:!0})},r=[],l=this.context.options.editor.controlsOrder,c=this._getItemCount(l)-1;return l.forEach(function(t,n){if(Array.isArray(t))t.forEach(function(t){e.controls.isEnabled(t)&&r.push(o(t,r.length,c))}),n!==l.length-1&&r.length&&r.push(i("separator-"+n));else{if(!e.controls.isEnabled(t))return;r.push(o(t,r.length,c))}}),r},e.prototype.render=function(){var t=this,e=this.state.isHovering,n=this._getAssetPath("editor/navigation/nav-gradient.png",!0),o={backgroundImage:"url("+n+")"};return s.l.createElement(c,{onMouseLeave:this._onMouseLeave,innerRef:function(e){t._navigation=e}},s.l.createElement(u,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,disabled:this.props.disabled},this._renderListItems()),s.l.createElement(p,{className:void 0,innerRef:function(e){t._gradient=e},style:o,visible:e}))},e}(s.b);l.contextTypes=s.b.contextTypes,e.a=l;var c=s.w.div("1y776sn","NavigationContainer"),u=s.w.ul("9phbku","Navigation"),p=s.w.div("5jr86g",{visible:"1aw31yo"},"NavigationOverlay")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.shouldComponentUpdate=function(t,e){return t.showTitle!==this.props.showTitle||t.selected!==this.props.selected},e.prototype.render=function(){if(this.props.isSeparator)return s.l.createElement(u,null);var t={transitionDelay:(this.props.showTitle?this.props.animationDelay:this.props.maxAnimationDelay-this.props.animationDelay)+"s"};return s.l.createElement(c,{onClick:this.props.onClick,selected:this.props.selected,className:void 0,"data-identifier":this.props.title,disabled:this.props.disabled},s.l.createElement(h,{src:this.props.iconPath,selected:this.props.selected}),s.l.createElement(f,{src:this.props.activeIconPath,selected:this.props.selected}),s.l.createElement(d,{style:t,withTitle:this.props.showTitle},s.l.createElement(m,null,this._t("editor.controls."+this.props.title+".title"))))},e}(s.b);a.contextTypes=s.b.contextTypes,e.a=a;var l=s.w.li("175e5wy","BaseItem"),c=Object(s.w)(l)("djzsp",{selected:"b4k2au",disabled:"kcb0uq"},"NavigationItem"),u=Object(s.w)(l)("w5rgvu","SeparatorItem"),p=s.w.img("1ew58rj","Icon"),h=Object(s.w)(p)("vd96gg",{selected:"1cfz9kz"},"InactiveIcon"),f=Object(s.w)(p)("8p00lh",{selected:"zgbg08"},"ActiveIcon"),d=s.w.div("124navh",{withTitle:"1j7o6on"},"TitleContainer"),m=s.w.div("pw4had","Title")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=function(t){function e(){i(this,e);for(var n=arguments.length,s=Array(n),l=0;l<n;l++)s[l]=arguments[l];var c=r(this,t.call.apply(t,[this].concat(s)));return c._bindAll("_onEditorResize"),c._events=o({},a.d.EVENTS.EDITOR_RESIZE,c._onEditorResize),c}return s(e,t),e.prototype._onEditorResize=function(t){var e=this.context.editor;e.getSDK().resizeTo(t),e.zoom.auto(!0,!0)},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.context,n=e.editor,o=e.options,i=this._canvas.offsetWidth,r=this._canvas.offsetHeight,s=n.getSDK().getRenderer();s.setCanvas(this._canvas),s.resizeTo(new a.v(i,r));var l=o.editor.image;n.setPadding([55,30,55,315]),n.setImage(l,!1)},e.prototype.render=function(){var t=this;return a.l.createElement(c,{innerRef:function(e){t._canvas=e}})},e}(a.b);l.contextTypes=a.b.contextTypes,e.a=l;var c=a.w.canvas("8gacw5","Canvas")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=n(8),c=n(118),u=n(119),p=n(120),h=function(t){function e(){var n;i(this,e);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=r(this,t.call.apply(t,[this].concat(l)));return u._bindAll("_onUndoClick","_onExportClick","_onCloseClick","_onHistoryUpdated","_onFeaturesUpdated","_onRedoClick"),u._events=(n={},o(n,a.d.EVENTS.HISTORY_UPDATED,u._onHistoryUpdated),o(n,a.d.EVENTS.FEATURES_UPDATED,u._onFeaturesUpdated),n),u}return s(e,t),e.prototype._onHistoryUpdated=function(){this.forceUpdate()},e.prototype._onFeaturesUpdated=function(){this.forceUpdate()},e.prototype._onUndoClick=function(){this.context.editor.history.undo(),this.forceUpdate()},e.prototype._onRedoClick=function(){this.context.editor.history.redo(),this.forceUpdate()},e.prototype._onCloseClick=function(){this.context.mediator.emit(a.d.EVENTS.CLOSE)},e.prototype._onExportClick=function(){var t=this,e=this.context,n=e.options,o=e.editor,i=e.screen,r=n.editor.export,s=l.a.instance.displayLoading(this._t("loading.exporting"));i.switchToControls("default",null,{},function(){setTimeout(function(){o.export(r.download).then(function(){s.close()}).catch(function(e){l.a.instance.displayError(t._t("errors.title"),e.message),s.close()})},100)})},e.prototype._renderItems=function(){var t=this.context.editor,e=t.history,n=t.features,o=t.getOptions().editor.displayCloseButton,i=a.l.createElement(u.a,{disabled:!e.isUndoAvailable(),src:this._getAssetPath("editor/canvas-header/undo.png",!0),onClick:this._onUndoClick,className:void 0}),r=a.l.createElement(u.a,{disabled:!e.isRedoAvailable(),src:this._getAssetPath("editor/canvas-header/redo.png",!0),onClick:this._onRedoClick,className:void 0});return[a.l.createElement(m,{key:"left",left:!0},i,r),a.l.createElement(d,{key:"center"},n.isEnabledByOptions("zoom")&&a.l.createElement(p.a,null)),a.l.createElement(m,{key:"right",right:!0},n.isEnabled("export")&&a.l.createElement(c.a,{title:this._t("editor.export"),onClick:this._onExportClick,className:void 0}),o&&a.l.createElement(c.a,{title:this._t("editor.close"),onClick:this._onCloseClick,className:void 0}))]},e.prototype.render=function(){return a.l.createElement(f,{className:this.props.className},this._renderItems())},e}(a.b);h.contextTypes=a.b.contextTypes,e.a=h;var f=a.w.div("1vo3slj","CanvasHeaderControls"),d=a.w.div("h5xlzy","CenteredControlGroup"),m=a.w.ul("17ty59f",{left:"1elyhsq",right:"1l7kz3k"},"ControlGroup")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(49),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.render=function(){return s.l.createElement(a.a,{onClick:this.props.onClick,className:this.props.className},s.l.createElement(c,{disabled:this.props.disabled},this.props.title))},e}(a.a);l.contextTypes=a.a.contextTypes,e.a=l;var c=s.w.div("1d3mv64",{disabled:"1wcaxw7"},"Button");l.Button=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(49),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.render=function(){var t=this.props,e=t.onClick,n=t.className,o=t.disabled;return s.l.createElement(a.a,{disabled:o,onClick:o?void 0:e,className:n},s.l.createElement(c,{disabled:o,src:this.props.src}))},e}(a.a);l.contextTypes=a.a.contextTypes,e.a=l;var c=s.w.img("1y2itdu",{disabled:"vxlu5c"},"Image")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=function(t){function e(){var n;i(this,e);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=r(this,t.call.apply(t,[this].concat(l)));return u._bindAll("_onZoomInClick","_onZoomOutClick","_onZoom","_onFeaturesUpdated"),u._events=(n={},o(n,a.d.EVENTS.ZOOM,u._onZoom),o(n,a.d.EVENTS.FEATURES_UPDATED,u._onFeaturesUpdated),n),u}return s(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._renderZoomLevel&&this._renderZoomLevel!==this.context.editor.zoom.targetLevel&&this.forceUpdate()},e.prototype._onFeaturesUpdated=function(){this.forceUpdate()},e.prototype._onZoom=function(){this.forceUpdate()},e.prototype._onZoomInClick=function(){if(!this._isZoomDisabled()){this.context.editor.zoom.in()}},e.prototype._onZoomOutClick=function(){if(!this._isZoomDisabled()){this.context.editor.zoom.out()}},e.prototype._isZoomDisabled=function(){return!this.context.editor.features.isEnabled("zoom")},e.prototype.render=function(){var t=this.context.editor,e=Math.round(100*t.zoom.targetLevel);return this._renderZoomLevel=t.zoom.targetLevel,a.l.createElement(c,{className:void 0},a.l.createElement(u,{disabled:this._isZoomDisabled(),"data-disabled":this._isZoomDisabled(),onClick:this._onZoomOutClick,className:void 0},"-"),a.l.createElement(p,null,e," %"),a.l.createElement(u,{disabled:this._isZoomDisabled(),"data-disabled":this._isZoomDisabled(),onClick:this._onZoomInClick,className:void 0},"+"))},e}(a.b);l.contextTypes=a.b.contextTypes,e.a=l;var c=a.w.div("12hdgpj","ZoomControl"),u=a.w.div("eqhwwg",{disabled:"10fa721"},"Button"),p=a.w.div("64aub5","Label")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll(),a._canHideAfterLoaded=!1,a.state={startImageVisible:!0,idleImageVisible:!1,indicatorVisible:!0},a}return r(e,t),e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this),this._imageSwitchTimeout=window.setTimeout(function(){e.setState({startImageVisible:!1,idleImageVisible:!0}),e._imageSwitchTimeout=null},1300)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._imageSwitchTimeout&&(window.clearTimeout(this._imageSwitchTimeout),this._imageSwitchTimeout=null)},e.prototype.getChildContext=function(){return{ui:this.context.ui,options:this.context.options,mediator:this.context.mediator,appComponent:this.context.appComponent}},e.prototype.render=function(){var t=this,e=this.state,n=e.startImageVisible,o=e.idleImageVisible,i=e.indicatorVisible;return s.l.createElement(l,{innerRef:function(e){t._container=e},className:void 0},s.l.createElement(c,{hidden:!i},s.l.createElement(p,{visible:n,src:this._getAssetPath("loading/start-solid.gif",!0)}),s.l.createElement(h,{visible:o,src:this._getAssetPath("loading/idle-solid.gif",!0)})))},e}(s.b);a.contextTypes=s.b.contextTypes,a.childContextTypes={ui:s.k.object.isRequired,mediator:s.k.object.isRequired,options:s.k.object.isRequired,appComponent:s.k.object.isRequired};var l=s.w.div("121fa7f","Container"),c=s.w.div("110xr2i",{hidden:"qbdcep"},"ImageContainer"),u=s.w.img("1gqfg7n",{visible:"zgbg08"},"Image"),p=Object(s.w)(u)("120drhm","StartImage"),h=Object(s.w)(u)("120drhm","IdleImage");e.a=Object(s.A)(a)},function(t,e,n){"use strict";e.a=function(t,e){t.global(e+" html,"+e+" body,"+e+" div,"+e+" span,"+e+" applet,"+e+" object,"+e+" iframe,"+e+" h1,"+e+" h2,"+e+" h3,"+e+" h4,"+e+" h5,"+e+" h6,"+e+" p,"+e+" blockquote,"+e+" pre,"+e+" a,"+e+" abbr,"+e+" acronym,"+e+" address,"+e+" big,"+e+" cite,"+e+" code,"+e+" del,"+e+" dfn,"+e+" em,"+e+" img,"+e+" ins,"+e+" kbd,"+e+" q,"+e+" s,"+e+" samp,"+e+" small,"+e+" strike,"+e+" strong,"+e+" sub,"+e+" sup,"+e+" tt,"+e+" var,"+e+" b,"+e+" u,"+e+" i,"+e+" center,"+e+" dl,"+e+" dt,"+e+" dd,"+e+" ol,"+e+" ul,"+e+" li,"+e+" fieldset,"+e+" form,"+e+" label,"+e+" legend,"+e+" table,"+e+" caption,"+e+" tbody,"+e+" tfoot,"+e+" thead,"+e+" tr,"+e+" th,"+e+" td,"+e+" article,"+e+" aside,"+e+" canvas,"+e+" details,"+e+" embed,"+e+" figure,"+e+" figcaption,"+e+" footer,"+e+" header,"+e+" hgroup,"+e+" menu,"+e+" nav,"+e+" output,"+e+" ruby,"+e+" section,"+e+" summary,"+e+" time,"+e+" mark,"+e+" audio,"+e+" video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}"+e+" html{line-height:1}"+e+" ol,"+e+" ul{list-style:none}"+e+" table{border-collapse:collapse;border-spacing:0}"+e+" caption,"+e+" th,"+e+" td{text-align:left;font-weight:400;vertical-align:middle}"+e+" q,"+e+" blockquote{quotes:none}"+e+" q:before,"+e+" q:after,"+e+" blockquote:before,"+e+' blockquote:after{content:"";content:none}'+e+" a img{border:none}"+e+" article,"+e+" aside,"+e+" details,"+e+" figcaption,"+e+" figure,"+e+" footer,"+e+" header,"+e+" hgroup,"+e+" main,"+e+" menu,"+e+" nav,"+e+" section,"+e+" summary{display:block}@media only screen and (min-width: 768px){"+e+"{-webkit-border-radius:5px;-moz-border-radius:5px;-ms-border-radius:5px;-o-border-radius:5px;border-radius:5px}}"+e+","+e+" *{box-sizing:border-box}")}},function(t,e,n){"use strict";e.a=function(t,e){t.global("\n    @-webkit-keyframes bouncingLoadingIndicator {\n      0% {\n        transform: translateY(0);\n      }\n      40% {\n        transform: translateY(10px);\n      }\n      60% {\n        transform: translateY(-5px);\n      }\n      80%{\n        transform: translateY(0);\n      }\n    }\n  ")}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(33),l=function(t){function e(n,r,s){o(this,e);var l=i(this,t.call(this));return l._ui=n,l._options=r,l._mediator=s,l._assets={},l._editor=new a.a(n,r,s,!0),l._assets=["editor/canvas-header/undo.png","editor/navigation/nav-gradient.png","editor/controls/shared/checkbox.png","editor/controls/shared/checkbox-active.png","editor/controls/shared/tiled-background.png"],l._appendControlsAssets(),l}return r(e,t),e.prototype._appendControlsAssets=function(){var t=this._editor.controls.getAvailable();for(var e in t){var n=t[e];this._editor.controls.isEnabled(e)&&(this._assets=this._assets.concat(n.getPreloadAssets(this._editor)),this._assets.push(n.iconPath),this._assets.push(n.activeIconPath))}},e.prototype.load=function(){var t=this,e=this._assets.slice(),n=e.length,o=0,i=function(){o++,t.emit("progress",o/n),o===n&&t.emit("done")},r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timed out";s.h.warn("Preloader",t+" "+e+"."),i()},a=function(t){return window.setTimeout(function(){r(t)},5e3)};e.forEach(function(e){var n=!0;Array.isArray(e)&&(n=e[1],e=e[0]);var o=!0;s.q.isArray(e)&&(o=e[1],e=e[0]);var l=t._ui.getAssetPath(e,n,!o),c=new window.Image,u=a(l);c.addEventListener("load",function(){window.clearTimeout(u),t._assets[e]=c,i()}),c.addEventListener("error",function(){window.clearTimeout(u),r(l,"was not found")}),c.crossOrigin="Anonymous",c.src=l})},e.prototype.getAsset=function(t){return this._assets[t]},e}(s.e);e.a=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(126),i=n(8),r=n(130),s=n(51),a=n(131),l=n(46),c=n(38),u=n(13),p=n(37),h=n(36),f=n(44),d=n(45),m=n(47),_=n(132),g=n(133),y=n(134),v=n(14),b=n(48),w=n(136),k=n(138),C=n(139),S=n(21),O=n(24),E=n(140),T=n(146),x=n(147),R=n(148),P=n(4),j=n(149),D=n(151),I=n(12);n.d(e,"Frame",function(){return l.a}),n.d(e,"SharedStateComponent",function(){return v.a}),n.d(e,"ControlsComponent",function(){return b.a}),n.d(e,"CollapseSectionComponent",function(){return w.a}),n.d(e,"ScrollableListComponent",function(){return k.a}),n.d(e,"SliderControlComponent",function(){return C.a}),n.d(e,"CanvasControlsComponent",function(){return S.a}),n.d(e,"ValueSelectionComponent",function(){return O.a}),n.d(e,"ColorSelectionComponent",function(){return E.a}),n.d(e,"ButtonComponent",function(){return T.a}),n.d(e,"DropdownComponent",function(){return x.a}),n.d(e,"TextInputComponent",function(){return R.a}),n.d(e,"DraggableComponent",function(){return P.a}),n.d(e,"InvisibleUploadComponent",function(){return j.a}),n.d(e,"CanvasOverlayControlsComponent",function(){return D.a}),n.d(e,"Transition",function(){return I.a}),n.d(e,"Library",function(){return o}),n.d(e,"ModalManager",function(){return i.a}),n.d(e,"DelayedJobQueue",function(){return r.a}),n.d(e,"GroupedControlsStyles",function(){return s}),n.d(e,"ControlsStyles",function(){return a}),n.d(e,"FontManager",function(){return c.a}),n.d(e,"StickerManager",function(){return u.a}),n.d(e,"BrushManager",function(){return p.a}),n.d(e,"FilterManager",function(){return h.a}),n.d(e,"FrameManager",function(){return f.a}),n.d(e,"OverlayManager",function(){return d.a}),n.d(e,"TransformRatioManager",function(){return m.a}),n.d(e,"BaseControls",function(){return _.a}),n.d(e,"LoadingIndicatorComponent",function(){return g.a}),n.d(e,"SuffixedTextInputComponent",function(){return y.a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(127);n.d(e,"Provider",function(){return o.a});var i=n(128);n.d(e,"Category",function(){return i.a});var r=n(129);n.d(e,"Image",function(){return r.a})},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=n(10),s=function(){function t(){o(this,t)}return t.prototype._loadJSON=function(t){return new r.a(t).load()},t.prototype.getCategories=function(){return i.h.warn(this.constructor.name,"`getCategories` is abstract and not implemented."),Promise.resolve([])},t.prototype.searchImages=function(t){return i.h.warn(this.constructor.name,"`searchImages` is abstract and not implemented."),Promise.resolve([])},t}();e.a=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._coverImage=null,a._coverImageLoaded=!1,a}return r(e,t),e.prototype.loadCoverImage=function(){var t=this;return new Promise(function(e,n){var o=new window.Image;o.addEventListener("load",function(){t._coverImageLoaded=!0,e(o)}),o.addEventListener("error",function(){n(new Error("Failed to load image at "+t.getCoverImage()))}),o.src=t.getCoverImage(),t._coverImage=o})},e.prototype.isCoverImageLoaded=function(){return this._coverImage&&this._coverImageLoaded},e}(s.p.Configurable);e.a=a,a.prototype.availableOptions={name:{type:s.i.STRING,required:!0},coverImage:{type:s.i.STRING,required:!0}}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._thumbImage=null,a._thumbImageLoaded=!1,a}return r(e,t),e.prototype.loadThumb=function(){var t=this;return new Promise(function(e,n){var o=new window.Image;o.addEventListener("load",function(){t._thumbImageLoaded=!0,e(o)}),o.addEventListener("error",function(){n(new Error("Failed to load image at "+t.getThumbUrl()))}),o.src=t.getThumbUrl(),t._thumbImage=o})},e.prototype.isThumbLoaded=function(){return this._thumbImage&&this._thumbImageLoaded},e.prototype.getThumbImage=function(){return this._thumbImage},e}(s.p.Configurable);e.a=a,a.prototype.availableOptions={category:{type:s.i.OBJECT,required:!0},title:{type:s.i.STRING},rawUrl:{type:s.i.STRING,required:!0},thumbUrl:{type:s.i.STRING},authorName:{type:s.i.STRING},authorAvatar:{type:s.i.STRING}}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this));return a._jobs=n,a._options=s.q.defaults(r,{minDelay:400}),a._running=!1,a._currentJob=null,a._currentJobIndex=0,a._tick=a._tick.bind(a),a}return r(e,t),e.prototype.start=function(){this._running=!0,this._lastJobFinished=Object(s.y)(),this._tick()},e.prototype._tick=function(){var t=this;if(this._running){if(!this._currentJob){if(this._currentJob=this._jobs[this._currentJobIndex],!this._currentJob)return this.emit("done"),void this.stop();this._currentJob.fn().then(function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=function(){t.emit.apply(t,["job-done",t._currentJob].concat(n)),t._lastJobFinished=Object(s.y)(),t._currentJob=null};if(Object(s.y)()-t._lastJobFinished<t._options.minDelay){var r=t._options.minDelay-(Object(s.y)()-t._lastJobFinished);setTimeout(i,r)}else i()}).catch(function(e){t.emit("error",t._currentJob,e),t._currentJob=null}),this._currentJobIndex++}Object(s.z)(this._tick)}},e.prototype.stop=function(){this._running=!1},e.prototype.dispose=function(){this._jobs=[],this._running=!1},e}(s.e);e.a=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"FullContainer",function(){return i}),n.d(e,"ControlItem",function(){return r}),n.d(e,"ControlItemTextStyles",function(){return s}),n.d(e,"ControlItemTitle",function(){return a}),n.d(e,"ControlItemActiveOverlay",function(){return l}),n.d(e,"ControlItemOverlay",function(){return c}),n.d(e,"Knob",function(){return u}),n.d(e,"PlainControlItem",function(){return p}),n.d(e,"PlainControlItemBackground",function(){return h});var o=n(0),i=o.w.css("vl6nc6","FullContainer"),r=o.w.css("gxhkr8",{animated:"1cekd0y",selected:"10th7ra",visible:"qtjcwg"},"ControlItem"),s=o.w.css("1us1ll5","ControlItemTextStyles"),a=o.w.css("d17ppx",{hovered:"zgbg08"},"ControlItemTitle"),l=o.w.css("x1p1ki",{visible:"zgbg08",rendered:"2jlos"},"ControlItemActiveOverlay"),c=o.w.css("1kza12c","ControlItemOverlay"),u=o.w.css("ywjahx","Knob"),p=o.w.css("9ej9h0",{threeColumns:"14meo64",twoColumns:"4nk392",withText:"rbroui",selected:"eb0k9a"},"PlainControlItem"),h=o.w.css("1lmjuk",{selected:"q4p805"},"PlainControlItemBackground")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=n(2),s=(n.n(r),n(21)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},l=function(){function t(e,n,i){o(this,t),this.context=e,this.sharedState=n,this._options=i,this._mediator=e.mediator,this.skipHistory=!1,this._initialOptions={},this._onOperationRemoved=this._onOperationRemoved.bind(this),this._onOperationUpdated=this._onOperationUpdated.bind(this)}return t.mapOperationsToSharedState=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]},t.prototype._getAssetPath=function(){var t;return(t=this.context.ui).getAssetPath.apply(t,arguments)},t.prototype._t=function(t,e){return this.context.ui.translate(t,e)},t.prototype._onOperationRemoved=function(t){var e=t.constructor.identifier;this.constructor.updatableOperations.indexOf(e)>=0&&(this.constructor.switchToDefaultControlsOnRemoval?(this.skipHistory=!0,this.context.screen.switchToControls("default")):(this.onOperationRemoved(t),this.updateSharedState(!0),this.context.editor.render()))},t.prototype.onOperationRemoved=function(t){},t.prototype._onOperationUpdated=function(t,e){var n=t.constructor.identifier;this.constructor.updatableOperations.indexOf(n)>=0&&this.onOperationUpdated(t,e)},t.prototype.updateSharedState=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.context.editor,n=this.constructor.mapOperationsToSharedState(e.operations,t,a({},this.sharedState.getState()));this.sharedState.set(n)},t.prototype.onOperationUpdated=function(t){var e=this.context.editor;this.updateSharedState(!1),e.render()},t.prototype.onEnter=function(){var t=this.context.editor,e=t.history,n=this.sharedState.get("forceCrop");e.hasInitialState()||n||e.addSnapshot("global"),this._saveOperationsOptions(),this.updateSharedState(!0),this._onEnter(),this.updateSharedState(!1),this._mediator.on(i.d.EVENTS.OPERATION_REMOVED,this._onOperationRemoved),this._mediator.on(i.d.EVENTS.OPERATION_UPDATED,this._onOperationUpdated),this._mediator.on(i.d.EVENTS.OPERATION_CREATED,this._onOperationUpdated)},t.prototype._saveOperationsOptions=function(){var t=this,e=this.context.editor.operations;this._initialOptions={},this.constructor.updatableOperations.forEach(function(n){var o=e.get(n);o&&(t._initialOptions[n]=o.serializeOptions())})},t.prototype._shouldAddGlobalHistorySnapshot=function(){var t=this,e=this.context.editor,n=e.history,o=e.operations,i=r.Utils.Array.last(n.getItems().filter(function(t){return"global"===t.scope})),s=function(t,e){return!(!t&&!e)&&(!(!t||e||!t.hasChanges())||(!(t||!e)||!(!t||!e||t.optionsEqual(e))))};return this.constructor.updatableOperations.some(function(e){var n=t._initialOptions[e],r=i?i.snapshot.operations[e]:null,a=o.get(e);return s(a,n)&&s(a,r)})},t.prototype._onEnter=function(){},t.prototype.onLeave=function(){var t=this;return this.onBeforeLeave().then(function(e){"boolean"==typeof e&&(e={leave:e});var n=e,o=n.leave,r=n.data;if(!o)return!1;t._mediator.off(i.d.EVENTS.OPERATION_REMOVED,t._onOperationRemoved),t._mediator.off(i.d.EVENTS.OPERATION_UPDATED,t._onOperationUpdated),t._mediator.off(i.d.EVENTS.OPERATION_CREATED,t._onOperationUpdated),t._onLeave(r||{});var s=t.context.options,a=t.context.editor,l=a.history,c=a.operations;if(t._shouldAddGlobalHistorySnapshot()){var u=t._getGlobalHistoryData?t._getGlobalHistoryData():null;t.addGlobalHistorySnapshot(void 0,!1,u)}return c.removeUnused(),"global"===s.editor.undoMode&&l.removeControls(t.constructor.identifier,"local"),"local"===s.editor.undoMode&&l.removeControls(t.constructor.identifier,"global"),!0})},t.prototype._getGlobalHistoryData=function(){},t.prototype._onLeave=function(){},t.prototype.onBeforeLeave=function(){return this._onBeforeLeave()},t.prototype._onBeforeLeave=function(){return Promise.resolve(!0)},t.prototype.addLocalHistorySnapshot=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.context.editor.history.addSnapshot("local",e,t,this.constructor.identifier,n)},t.prototype.addGlobalHistorySnapshot=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.context.editor.history.addSnapshot("global",e,t,this.constructor.identifier,n)},t.getPreloadAssets=function(){return[]},t.clickAtPosition=function(t){return!1},t.isEnabled=function(t){var e=this.constructor.identifier;return t.isToolEnabled(e)&&t.isToolAllowed(e)},t}();l.identifier=null,l.controlsComponent=null,l.canvasControlsComponent=s.a,l.defaultOptions={},l.requiredOperations=[],l.updatableOperations=[],l.switchToDefaultControlsOnRemoval=!0,e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.render=function(){var t=function(t){return{animationDelay:.1*t+"s"}};return s.l.createElement(l,{styles:this.props.styles},s.l.createElement(c,{style:t(0)}),s.l.createElement(c,{style:t(1)}),s.l.createElement(c,{style:t(2)}))},e}(s.b);a.contextTypes=s.b.contextTypes,e.a=a;var l=s.w.div("eurrvc","LoadingIndicatorContainer");a.RootElement=l;var c=s.w.div("vyyzkw","Ball")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(135),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onClick"),a}return r(e,t),e.prototype.shouldComponentUpdate=function(t,e){return this.props.value!==t.value||this.props.disabled!==t.disabled},e.prototype._onClick=function(){this._input.focus()},e.prototype.render=function(){var t=this;return s.l.createElement(c,{className:this.props.className,onClick:this._onClick},s.l.createElement(p,{value:this.props.value,onLiveChange:this.props.onLiveChange,onChange:this.props.onChange,disabled:this.props.disabled,innerRef:function(e){t._input=e},name:this.props.name}),s.l.createElement(u,null,this.props.suffix))},e}(s.b);l.contextTypes=s.b.contextTypes,e.a=l;var c=s.w.div("1bubov","Container");l.RootElement=c;var u=s.w.div("1ua5bzq","Suffix"),p=Object(s.w)(a.a)("6ekjfo","Input")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(15),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a.state.width=0,a}return r(e,t),e.prototype._onInputChange=function(e){t.prototype._onInputChange.call(this,e),this._adjustWidth(e.target.value)},e.prototype.shouldComponentUpdate=function(e,n){return t.prototype.shouldComponentUpdate.call(this,e,n)||this.state.width!==n.width},e.prototype.componentWillReceiveProps=function(t){this._adjustWidth(t.value)},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._textRuler=document.createElement("div"),s.u.styleElement(this._textRuler,{position:"absolute",top:"0",left:"0",display:"inline-block",zIndex:10}),this._adjustWidth(this.props.value)},e.prototype._getInputStyle=function(){var t=this.state.width;return{width:t,minWidth:t}},e.prototype._adjustWidth=function(t){document.body.appendChild(this._textRuler);var e=s.u.getStyleObject(this._input);s.u.styleElement(this._textRuler,{font:e.font}),this._textRuler.innerText=t,this.setState({width:this._textRuler.offsetWidth}),this._textRuler.parentNode.removeChild(this._textRuler)},e}(a.a);l.contextTypes=s.b.contextTypes,e.a=l,l.RootElement=Object(s.w)(a.a.RootElement)("n0hw7r","AutoSizeNumericInputComponent")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(51),l=n(12),c=n(137),u=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a.state={expanded:a.props.expanded||a.props.alwaysExpanded||!1},a}return r(e,t),e.prototype._onClick=function(){var t=!this.state.expanded;this.props.alwaysExpanded||this.setState({expanded:t}),this.props.onToggle&&this.props.onToggle(t)},e.prototype.componentWillReceiveProps=function(t){this.props.expanded!==t.expanded&&this.setState({expanded:t.expanded})},e.prototype.render=function(){var t=this.props,e=t.alwaysExpanded,n=t.toggleable,o=t.className,i=this.state.expanded;return s.l.createElement(p,{styles:this.props.styles,className:o},s.l.createElement(f,{onClick:this._onClick.bind(this)},!e&&!n&&s.l.createElement(m,{turnUp:!i}),n&&s.l.createElement(_,{checked:i,className:void 0}),s.l.createElement(h,null,this.props.title)),s.l.createElement(l.a,{active:i,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},s.l.createElement(d,{"data-expanded":i,className:void 0},this.props.children)))},e}(s.b);u.contextTypes=s.b.contextTypes,e.a=u;var p=Object(s.w)(a.ControlGroup).div("1pofx54","Section");u.RootElement=p;var h=Object(s.w)(a.ControlGroupTitle).div("1b0fixa","SectionTitle"),f=s.w.div("1b4y7iu","SectionHeader"),d=s.w.div("10cp0qa",{rendered:"2jlos",visible:"82svov"},"SectionContent"),m=s.w.div("1bagiey",{turnUp:"gucvcl"},"ArrowDown"),_=Object(s.w)(c.a)("15tfhjl","Checkbox")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.render=function(){var t=this._getAssetPath("editor/controls/shared/checkbox.png",!0),e=this._getAssetPath("editor/controls/shared/checkbox-active.png",!0),n=this.props,o=n.styles,i=n.className,r=n.checked;return s.l.createElement(l,{styles:o,className:i,style:{backgroundImage:"url("+(r?e:t)+")"}})},e}(s.b);e.a=a;var l=s.w.div("5nuoh","Checkbox");a.RootElement=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(22),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._renderChild=function(e){return t.prototype._renderChild.call(this,React.createElement(c,{innerRef:this.props.innerListRef},e))},e}(a.a);l.RootElement=a.a.RootElement,l.contextTypes=a.a.contextTypes;var c=s.w.div("1jtk1eb","ListWrapper"),u=Object(s.w)(l)("x597uk","ScrollableList");e.a=u},function(t,e,n){"use strict";function o(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=n(24),c=n(50),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype._buildSliderProps=function(){var t=this.props,e=t.minValue,n=t.maxValue,o=t.middleDot,i=t.onSliderValueChange;return{minValue:e,maxValue:n,value:t.value,middleDot:o,onChange:i,disabled:t.disabled}},e.prototype._renderLeftPart=function(){var t=this._buildSliderProps(),e=o(t,[]);return a.l.createElement(c.a,u({},e,{darkBackground:!0}))},e}(l.a);p.contextTypes=l.a.contextTypes,e.a=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(141),l=n(12),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onDocumentClick","_onColorChange"),a.state={colorPickerVisible:!1,colors:a._getDefaultColors(a.props.value.clone()),selectedColorIndex:0},a}return r(e,t),e.prototype.componentWillReceiveProps=function(t){if(!this.state.colorPickerVisible&&!this.props.value.equals(t.value)){var e=-1;this.state.colors.forEach(function(n,o){n.equals(t.value)&&(e=o)}),-1===e?this.setState({selectedColorIndex:0,colors:this._getDefaultColors(t.value.clone())}):this.setState({selectedColorIndex:e})}},e.prototype.componentDidMount=function(){document.addEventListener("click",this._onDocumentClick)},e.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._onDocumentClick)},e.prototype._onDocumentClick=function(t){var e=this;if(this.state.colorPickerVisible){for(var n=t.target;n;n=n.parentNode)if(n===this._root)return;this.setState({colorPickerVisible:!1},function(){e.props.onColorPickerToggle&&e.props.onColorPickerToggle(!1)})}},e.prototype._onClick=function(t){var e=this,n={colorPickerVisible:this.state.colorPickerVisible,selectedColorIndex:t};t===this.state.selectedColorIndex?n.colorPickerVisible=!this.state.colorPickerVisible:n.colorPickerVisible=!1,this.props.onChange&&this.props.onChange(this.state.colors[t]),this.setState(n,function(){e.props.onColorPickerToggle&&e.props.onColorPickerToggle(n.colorPickerVisible)})},e.prototype._onColorChange=function(t){this.props.onChange&&this.props.onChange(t),this.state.colors[this.state.selectedColorIndex].copy(t),this.forceUpdate()},e.prototype._getDefaultColors=function(t){return[t,s.c.fromHex("6688FA"),s.c.fromHex("8767FA"),s.c.fromHex("DC67FA"),s.c.fromHex("FE68C9"),s.c.fromHex("FE6788"),s.c.fromHex("FE896B")]},e.prototype._renderColorBubbles=function(){var t=this,e=this._getAssetPath("editor/controls/shared/tiled-background.png",!0),n=[];return this.state.colors.forEach(function(o,i){var r=i===t.state.selectedColorIndex;n.push(s.l.createElement(p,{key:i,selected:r,className:void 0},s.l.createElement(h,null,s.l.createElement(f,{style:{backgroundImage:"url("+e+")"}}),s.l.createElement(d,{style:{backgroundColor:o.toRGBA()},onClick:t._onClick.bind(t,i),className:void 0},s.l.createElement(m,{selected:r}),s.l.createElement(m,{selected:r}),s.l.createElement(m,{selected:r}))),s.l.createElement(l.a,{active:r&&t.state.colorPickerVisible,enterProp:"rendered",enterDuration:1e3*t.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*t.context.theme.transitionDuration,leaveDuration:1e3*t.context.theme.transitionDuration},s.l.createElement(a.a,{color:o,onChange:t._onColorChange}))))}),n},e.prototype.render=function(){var t=this;return s.l.createElement(u,{className:void 0,styles:this.props.styles,innerRef:function(e){t._root=e}},this._renderColorBubbles())},e}(s.b);c.contextTypes=s.b.contextTypes,c.propTypes={colors:s.k.array,value:s.k.object.isRequired},e.a=c;var u=s.w.div("9xkrp7","ColorSelection");c.RootElement=u;var p=s.w.div("qt3fol",{selected:"18i7ofo"},"ColorSelectionBubble"),h=s.w.div("11cgycr","ColorSelectionPreview"),f=s.w.div("id1aww","ColorSelectionPreviewContent"),d=Object(s.w)(f)("nahwei","ColorSelectionBubbleContent"),m=s.w.div("11la9rb",{selected:"xfn5qu"},"Dot")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(142),l=n(143),c=n(144),u=n(52),p=n(145),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},f=function(){function t(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));a._bindAll("_onHexValueChange","_onAlphaChange","_onHueChange","_onSaturationBrightnessChange");var l=a.props.color.clone(),c=l.toHSV(),u=f(c,3),p=u[0],h=u[1],d=u[2];return a.state={color:l,hue:p,saturation:h,brightness:d},a}return r(e,t),e.prototype._onHexValueChange=function(t){if(!t.match(/^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i))return this.forceUpdate();3===t.length&&(t+=t);var e=s.c.fromHex(t),n=this.state.color;n.copy(e),this.props.onChange&&this.props.onChange(n.clone());var o=n.toHSV(),i=f(o,3),r=i[0],a=i[1],l=i[2];this.setState({hue:r,saturation:a,brightness:l})},e.prototype._onAlphaChange=function(t){var e=this.state.color;e.a=t,this.props.onChange&&this.props.onChange(e.clone()),this.forceUpdate()},e.prototype._onHueChange=function(t){var e=this.state.color,n=e.toHSV(),o=f(n,3),i=o[1],r=o[2],s=e.a;e.fromHSV(t,i,r),e.a=s,this.props.onChange&&this.props.onChange(e.clone()),this.setState({color:e,hue:t})},e.prototype._onSaturationBrightnessChange=function(t,e){var n=this.state.color,o=n.a;n.fromHSV(this.state.hue,t,e),n.a=o,this.props.onChange&&this.props.onChange(n.clone()),this.setState({color:n,saturation:t,brightness:e})},e.prototype._changeColorComponent=function(t,e){var n=this.state.color;n[t]=e/255,this.props.onChange&&this.props.onChange(n.clone());var o=n.toHSV(),i=f(o,3),r=i[0],s=i[1],a=i[2];this.setState({hue:r,saturation:s,brightness:a})},e.prototype._renderContent=function(){var t=this.state,e=t.hue,n=t.saturation,o=t.brightness,i=t.color,r={hue:e,saturation:n,brightness:o};return[s.l.createElement(_,{key:"arrow"}),s.l.createElement(g,{key:"colorPicker",className:void 0},s.l.createElement(y,h({},r,{onChange:this._onSaturationBrightnessChange})),s.l.createElement(v,h({},r,{onChange:this._onHueChange})),s.l.createElement(b,{value:i.a,color:i,onChange:this._onAlphaChange}),s.l.createElement(w,null,s.l.createElement(p.a,{inputLabel:"Hex",value:i.toHex().substr(1),inputClassName:void 0,onValueChange:this._onHexValueChange}),s.l.createElement(u.a,{inputLabel:"R",value:i.toRGB()[0],minValue:1,maxValue:255,inputClassName:void 0,onValueChange:this._changeColorComponent.bind(this,"r")}),s.l.createElement(u.a,{inputLabel:"G",value:i.toRGB()[1],minValue:1,maxValue:255,inputClassName:void 0,onValueChange:this._changeColorComponent.bind(this,"g")}),s.l.createElement(u.a,{inputLabel:"B",value:i.toRGB()[2],minValue:1,maxValue:255,inputClassName:void 0,onValueChange:this._changeColorComponent.bind(this,"b")})))]},e.prototype.render=function(){var t=this.props,e=t.rendered,n=t.visible;return s.l.createElement(m,{rendered:e,visible:n},e&&this._renderContent())},e}(s.b);d.contextTypes=s.b.contextTypes,e.a=d;var m=s.w.div("fko51h",{rendered:"2jlos",visible:"zgbg08"},"ColorPickerContainer"),_=s.w.div("xfcvqs","TopArrow"),g=s.w.div("1gzvppb","ColorPicker"),y=Object(s.w)(c.a)("120drhm","SaturationValueSlider"),v=Object(s.w)(a.a)("1cbv91b","HueSlider"),b=Object(s.w)(l.a)("tnkwnw","OpacitySlider"),w=s.w.div("142apfo","ColorValueInputs")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(4),l=n(25),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onKnobDragStart","_onKnobDrag","_setValue"),a.state={value:a.props.hue},a}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._renderCanvas()},e.prototype.componentWillReceiveProps=function(t){this.setState({value:t.hue})},e.prototype._onKnobDragStart=function(t,e,n){this._sliderWidth=this._slider.offsetWidth,n.target===this._knob?this._initialValue=this.state.value:(this._initialValue=t.x/this._sliderWidth,this._setValue(this._initialValue))},e.prototype._onKnobDrag=function(t){var e=this._initialValue+t.x/this._sliderWidth;this._setValue(e)},e.prototype._setValue=function(t){var e=Math.min(1,Math.max(0,t));this.setState({value:e}),this.props.onChange&&this.props.onChange(e),this.forceUpdate()},e.prototype._renderCanvas=function(){var t=this._canvas,e=t.getContext("2d");t.width=t.offsetWidth,t.height=t.offsetHeight;for(var n=0;n<t.width;n++){var o=n/t.width,i=s.c.fromHSV(o,1,1);e.strokeStyle=i.toRGBA(),e.beginPath(),e.moveTo(n,0),e.lineTo(n,t.height),e.stroke()}},e.prototype.render=function(){var t=this;return s.l.createElement(a.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},s.l.createElement(u,{styles:this.props.styles,innerRef:function(e){t._slider=e},className:void 0},s.l.createElement(h,{innerRef:function(e){t._canvas=e}}),s.l.createElement(p,{style:this._getKnobStyle(),innerRef:function(e){t._knob=e},className:void 0})))},e.prototype._getKnobStyle=function(){return{left:(100*this.props.hue).toFixed(2)+"%"}},e}(s.b);c.contextTypes=s.b.contextTypes,e.a=c;var u=Object(s.w)(l.a).div("120drhm","HueSlider");c.RootElement=u;var p=Object(s.w)(l.c).div("120drhm","Knob"),h=Object(s.w)(l.b).canvas("u98vhm","Background")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(4),l=n(25),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onKnobDragStart","_onKnobDrag","_updateBackgroundColors","_setValue"),a.state={color:a.props.color.clone(),value:a.props.value},a}return r(e,t),e.prototype._updateBackgroundColors=function(){this._transparentColor=this.state.color.clone(),this._transparentColor.a=0,this._opaqueColor=this.state.color.clone(),this._opaqueColor.a=1},e.prototype.componentWillReceiveProps=function(t){this.setState({color:t.color.clone(),value:t.value})},e.prototype._onKnobDragStart=function(t,e,n){this._sliderWidth=this._slider.offsetWidth,n.target===this._knob?this._initialValue=this.state.value:(this._initialValue=1-t.x/this._sliderWidth,this._setValue(this._initialValue))},e.prototype._onKnobDrag=function(t,e){var n=this._initialValue-t.x/this._sliderWidth;this._setValue(n)},e.prototype._setValue=function(t){var e=Math.min(1,Math.max(0,t));this.props.onChange&&this.props.onChange(e),this.setState({value:e}),this.forceUpdate()},e.prototype.render=function(){var t=this;this._updateBackgroundColors();var e=this._getAssetPath("editor/controls/shared/tiled-background.png",!0);return s.l.createElement(a.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},s.l.createElement(u,{styles:this.props.styles,innerRef:function(e){t._slider=e},className:void 0},s.l.createElement(f,{style:{backgroundImage:"url("+e+")"}}),s.l.createElement(h,{style:{backgroundImage:"linear-gradient(90deg, "+this._opaqueColor.toRGBA()+" 0%, "+this._transparentColor.toRGBA()+" 100%)"}}),s.l.createElement(p,{style:this._getKnobStyle(),innerRef:function(e){t._knob=e},className:void 0})))},e.prototype._getKnobStyle=function(){return{left:(100*(1-this.state.value)).toFixed(2)+"%"}},e}(s.b);c.contextTypes=s.b.contextTypes,e.a=c;var u=Object(s.w)(l.a).div("120drhm","OpacitySlider");c.RootElement=u;var p=Object(s.w)(l.c).div("120drhm","Knob"),h=Object(s.w)(l.b).div("120drhm","Background"),f=Object(s.w)(h)("m87q12","TiledBackground")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(4),l=n(25),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onKnobDragStart","_onKnobDrag"),a._lastHue=null,a}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._renderCanvas()},e.prototype.componentDidUpdate=function(){this.props.hue!==this._lastHue&&this._renderCanvas()},e.prototype._onKnobDragStart=function(t,e,n){n.target===this._knob?(this._initialBrightness=this.props.brightness,this._initialSaturation=this.props.saturation):(this._initialSaturation=t.x/this._canvas.offsetWidth,this._initialBrightness=1-t.y/this._canvas.offsetHeight,this.props.onChange&&this.props.onChange(this._initialSaturation,this._initialBrightness))},e.prototype._onKnobDrag=function(t){if(null!=this._canvas){var e=this._canvas.offsetWidth,n=this._canvas.offsetHeight,o=this._initialSaturation+t.x/e;o=Math.max(0,Math.min(1,o));var i=this._initialBrightness+t.y/n*-1;i=Math.max(0,Math.min(1,i)),this.props.onChange&&this.props.onChange(o,i)}},e.prototype._renderCanvas=function(){var t=this._canvas,e=t.getContext("2d");t.width=t.offsetWidth,t.height=t.offsetHeight;for(var n=e.getImageData(0,0,t.width,t.height),o=0;o<t.height;o++)for(var i=(t.height-o)/t.height,r=0;r<t.width;r++){var a=r/t.width,l=s.c.fromHSV(this.props.hue,a,i),c=l.r,u=l.g,p=l.b,h=l.a,f=4*(o*t.width+r);n.data[f]=255*c,n.data[f+1]=255*u,n.data[f+2]=255*p,n.data[f+3]=255*h}e.putImageData(n,0,0),this._lastHue=this.props.hue},e.prototype.render=function(){var t=this;return s.l.createElement(a.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},s.l.createElement(u,{styles:this.props.styles,innerRef:function(e){t._slider=e},className:void 0},s.l.createElement(h,{innerRef:function(e){t._canvas=e}}),s.l.createElement(p,{style:this._getKnobStyle(),innerRef:function(e){t._knob=e},className:void 0})))},e.prototype._getKnobStyle=function(){return{left:(100*this.props.saturation).toFixed(2)+"%",top:(100*(1-this.props.brightness)).toFixed(2)+"%"}},e}(s.b);c.contextTypes=s.b.contextTypes,e.a=c;var u=Object(s.w)(l.a).div("1jf8fwr","SaturationValueSlider");c.RootElement=u;var p=Object(s.w)(l.c).div("icy3f1","Knob"),h=Object(s.w)(l.b).canvas("15alfoa","Background")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(52),l=n(15),c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._onInputChange=function(t){var e=t.target.value;if(e.match(/^#([A-Fa-f0-9]{6})$/))return this.setState({value:this.props.value});this.props.onValueChange&&this.props.onValueChange(e),this.setState({value:e})},e.prototype._renderRightPart=function(){var t=this,e=[];return this.props.inputClassName&&e.push(this.props.inputClassName),s.l.createElement(u,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:e.join(" "),innerRef:function(e){t._input=e},disabled:this.props.disabled})},e}(a.a);c.contextTypes=a.a.contextTypes,e.a=c;var u=Object(s.w)(l.a)("t0ruqq","InputField")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.render=function(){return s.l.createElement(l,{onClick:this.props.disabled?void 0:this.props.onClick,disabled:this.props.disabled,className:this.props.className},this.props.title)},e}(s.b);a.contextTypes=s.b.contextTypes,e.a=a;var l=s.w.button("7lpbp3",{disabled:"1iaw3op"},"Button")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(23),l=n(22),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onDropdownClick","_onDocumentClick"),a.state={expanded:!1},a}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),document.addEventListener("click",this._onDocumentClick)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),document.removeEventListener("click",this._onDocumentClick)},e.prototype._onDocumentClick=function(t){if(this.state.expanded){for(var e=t.target;e;e=e.parentNode)if(e===this._root)return;this.setState({expanded:!1})}},e.prototype._onDropdownClick=function(){var t=this.state.expanded;this.setState({expanded:!t})},e.prototype._onItemClick=function(t){this.props.onChange&&this.props.onChange(t),this.setState({expanded:!1})},e.prototype._renderDropdownItems=function(){var t=this;return this.props.children.map(function(e){var n=s.q.extend({},e.props,{onClick:t._onItemClick.bind(t,e.props.value),selected:t.props.value===e.props.value,className:void 0});return s.l.cloneElement(e,n)})},e.prototype.render=function(){var t=this,e=null;this.props.children.forEach(function(n){n.props.value===t.props.value&&(e=n.props.children)});var n=this.props.enableMenu;return s.l.createElement(u,{innerRef:function(e){t._root=e},className:this.props.className},s.l.createElement(p,{onClick:n?this._onDropdownClick:null,styles:this.props.styles,style:this.props.style},e,n?s.l.createElement(d,null):null),this.state.expanded&&s.l.createElement(h,{className:void 0},s.l.createElement(l.a,{direction:"vertical",noGradient:!0},s.l.createElement(f,null,this._renderDropdownItems()))))},e}(s.b);c.contextTypes=s.b.contextTypes,c.propTypes={enableMenu:s.k.bool,styles:s.k.object,style:s.k.object,onChange:s.k.func},c.defaultProps={enableMenu:!0},e.a=c;var u=s.w.div("13hv8io","DropdownContainer"),p=Object(s.w)(a.a).div("13hv8io","Dropdown");c.RootElement=p;var h=s.w.div("1fqdopp","DropdownOverlay"),f=s.w.ul("zy0cu9","DropdownList"),d=s.w.div("7w2heg",{turnUp:"gucvcl"},"ArrowDown"),m=s.w.li("cibatp",{selected:"60ro2s"},"DropdownItem");c.Item=m,c.RootElement=Object(s.w)(a.a).input("120drhm","DropdownComponent")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(23),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onKeyDown","_onInputBlur","_onInputChange"),a.state={value:""},a}return r(e,t),e.prototype.shouldComponentUpdate=function(t,e){return this.props.value!==t.value||this.props.disabled!==t.disabled||this.state.value!==e.value},e.prototype.componentWillReceiveProps=function(t){this.setState({value:t.value})},e.prototype._onInputChange=function(t){this.setState({value:t.target.value}),this.props.onLiveChange&&this.props.onLiveChange(t)},e.prototype._onInputBlur=function(t){this.props.onChange&&this.props.onChange(t)},e.prototype._onKeyDown=function(t){13!==t.keyCode&&27!==t.keyCode||this._input.blur(),this.props.onKeyDown&&this.props.onKeyDown()},e.prototype.focus=function(){this._input.focus()},e.prototype._getInputStyle=function(){return{}},e.prototype.render=function(){var t=this,e=this.constructor.RootElement;return s.l.createElement(e,{value:this.state.value,placeholder:this.props.placeholder,onChange:this._onInputChange,onBlur:this._onInputBlur,innerRef:function(e){t._input=e},onKeyDown:this._onKeyDown,name:this.props.name,styles:this.props.styles,className:this.props.className,style:this._getInputStyle(),disabled:this.props.disabled})},e}(s.b);l.contextTypes=s.b.contextTypes,e.a=l,l.RootElement=Object(s.w)(a.a).input("120drhm","TextInputComponent")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(150),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onNewFile"),a}return r(e,t),e.prototype.componentDidMount=function(){this._fileLoader=new a.a(this._fileInput),this._fileLoader.on("file",this._onNewFile)},e.prototype.componentWillUnmount=function(){this._fileLoader.off("file",this._onNewFile),this._fileLoader.dispose(),this._fileLoader=null},e.prototype._onNewFile=function(t){this.props.onNewFile&&this.props.onNewFile(t)},e.prototype.open=function(){this._fileLoader.open()},e.prototype.render=function(){var t=this;return React.createElement(c,{type:"file",accept:"image/*",innerRef:function(e){t._fileInput=e}})},e}(s.b);l.contextTypes=s.b.contextTypes,e.a=l;var c=s.w.input("19u9mq5","HiddenFileInput")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=n(8),l=function(t){function e(n){o(this,e);var r=i(this,t.call(this));return r._input=n,r._onFileChange=r._onFileChange.bind(r),r._input.addEventListener("change",r._onFileChange),r}return r(e,t),e.prototype.open=function(){this._input.value=null,this._input.click()},e.prototype._handleFile=function(t){var e=this,n=new window.FileReader;n.onload=function(){return function(t){var n=t.target.result,o=new window.Image;o.addEventListener("load",function(){e.emit("file",o)}),o.addEventListener("error",function(t){return a.a.instance.displayError(e._t("errors.title"),e._t("errors.imageLoadingError.text"))}),o.src=n}}(),n.readAsDataURL(t)},e.prototype._onFileChange=function(){var t=this._input.files;t.length&&this._handleFile(t[0])},e.prototype.dispose=function(){this._input.removeEventListener("change",this._onFileChange)},e}(s.e);e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._cancelEvent=function(t){t.stopPropagation(),t.preventDefault()},e.prototype._renderControlItem=function(t,e){var n=this._getAssetPath("editor/controls/shared/canvas-overlay-controls/"+t+".png",!0);return s.l.createElement(c,{style:{backgroundImage:"url("+n+")"},onClick:e,onTouchEnd:e,className:void 0,"data-identifier":t})},e.prototype.render=function(){var t=this.props.position;return s.l.createElement(l,{style:{left:t.x,top:t.y},onMouseDown:this._cancelEvent,onTouchStart:this._cancelEvent,className:void 0},this.props.takeToFront&&this._renderControlItem("to-front",this.props.onTakeToFront),this.props.flipHorizontally&&this._renderControlItem("flip-horizontal",this.props.onFlipHorizontally),this.props.duplicate&&this._renderControlItem("duplicate",this.props.onDuplicate),this.props.delete&&this._renderControlItem("delete",this.props.onDelete))},e}(s.b);a.contextTypes=s.b.contextTypes,e.a=a;var l=s.w.div("1lf1r1r","CanvasOverlayControl"),c=s.w.div("1l53y3r","ControlItem")},function(t,e){t.exports={editor:{new:"Neu",export:"Exportieren",cancel:"Abbrechen",close:"Schließen",controls:{library:{title:"Bibliothek",search:"Bibliothek durchsuchen",fileDropZone:"Datei hier hin ziehen oder klicken zum Durchsuchen.",fileDropZoneHovered:"Zum Hochladen loslassen.",noResults:"Keine Ergebnisse"},transform:{title:"Zuschneiden",reset:"Zurücksetzen",dimensions:{width:"b",height:"h"},ratios:{imgly_transforms_common:{name:"Standard",ratios:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch","imgly_transform_common_4-3":"4:3","imgly_transform_common_16-9":"16:9"}},imgly_transforms_facebook:{name:"Facebook",ratios:{imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover",imgly_transform_facebook_profile:"Profilbild"}}}},filter:{title:"Filter",filters:{identity:"Kein Filter",imgly_lut_celsius:"Celsius",imgly_lut_chest:"Chest",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Front",imgly_lut_k2:"K2",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Sin",imgly_lut_texas:"Texas",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Bleached",imgly_lut_bleachedblue:"Bleached Blue",imgly_lut_blues:"Blues",imgly_lut_blueshadows:"Blue Shadows",imgly_lut_breeze:"Breeze",imgly_lut_bw:"B & W",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Cool",imgly_lut_cottoncandy:"Cotton Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Eighties",imgly_lut_elder:"Elder",imgly_lut_evening:"Evening",imgly_lut_fall:"Fall",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"High Contrast",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"KDynamic",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lenin",imgly_lut_litho:"Litho",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"No Green",imgly_lut_orchid:"Orchid",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Plate",imgly_lut_pola669:"Pola 669",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia High",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Sunset",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Winter",imgly_lut_x400:"X400"}},adjustments:{title:"Korrekturen",reset:"Zurücksetzen",sections:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",contrast:"Kontrast",saturation:"Sättigung",exposure:"Belichtung",gamma:"Gamma",shadows:"Schatten",highlights:"Lichter",clarity:"Klarheit"}},focus:{title:"Weichzeichnen",items:{none:"Original",radial:"Kreisförmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gaußsch"}},text:{title:"Text",defaultText:"Doppelklick zum Bearbeiten!",new:"Neuer Text",font:"Schriftart",size:"Größe",spacing:"Abstand",line:"Zeile",background:"Hintergrund"},sticker:{title:"Sticker",new:"Neuer Sticker",fill:"Einfärben",opacity:"Transparenz",replace:"Ersetzen",stickerCategories:{},stickers:{}},brush:{title:"Malen",settings:"Pinseleinstellungen",width:"Dicke",hardness:"Härte"},frame:{title:"Rahmen",opacity:"Transparenz",width:"Dicke",replace:"Ersetzen",fill:"Einfärben",frames:{none:"Kein Rahmen"}},overlay:{title:"Overlay",blendModes:{normal:"Normal",overlay:"Overlay",hardLight:"Hard Light",softLight:"Soft Light",multiply:"Multiply",darken:"Darken",lighten:"Lighten",screen:"Screen",colorBurn:"Color Burn"},overlays:{none:"Kein Overlay",imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}}}},loading:{loading:"Lade...",exporting:"Exportiere...",resizing:"Bild wird bearbeitet...",fonts:"Lade Schriftarten..."},warnings:{imageResized_maxMegaPixels:{title:"Bild verkleinert",text:"Da dein Bild die maximale Größe von ${maxMegaPixels} Megapixeln überschreitet, wurde es auf ${width}x${height} Pixel verkleinert."},imageResized_maxDimensions:{title:"Bild verkleinert",text:"Aufgrund von Hardware-Beschränkungen wurde das Bild auf ${width}x${height} Pixel verkleinert."},newImage_changesLost:{title:"Neues Bild",text:"Alle nicht gespeicherten Änderungen gehen verloren. Fortfahren?",buttons:{yes:"Ja",no:"Nein"}},discardChanges:{title:"Änderungen verwerfen?",text:"Sind Sie sicher, dass Sie die Änderungen verwerfen wollen?",buttons:{cancel:"Abbrechen",keep:"Änderungen beibehalten",discard:"Änderungen verwerfen"}}},errors:{title:"Fehler",renderingError:{text:"Beim Rendern des Bildes ist ein Fehler aufgetreten."},stickerLoadingError:{text:"Laden des Stickers ${path} fehlgeschlagen."},imageLoadingError:{text:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gründe haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterstützt."},fontLoadingError:{title:"Laden von Schriftarten ist fehlgeschlagen.",text:"Die folgenden Schriftarten konnten nicht geladen werden: ${fonts}."},webcamNotSupported:{text:"Dein Browser unterstützt das Webcam-Feature leider noch nicht."},webcamUnavailable:{text:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})"},invalidFileType:{text:"Der Dateityp ${fileType} wird nicht unterstützt."}}}},function(t,e){t.exports={editor:{new:"New",export:"Export",cancel:"Cancel",close:"Close",controls:{library:{title:"Library",search:"Search Library",fileDropZone:"Drag image here or click to browse for one.",fileDropZoneHovered:"Drop to upload.",noResults:"No results"},transform:{title:"Transform",reset:"Reset Default",dimensions:{width:"w",height:"h"},ratios:{imgly_transforms_common:{name:"Common Crops",ratios:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square","imgly_transform_common_4-3":"4:3","imgly_transform_common_16-9":"16:9"}},imgly_transforms_facebook:{name:"Facebook",ratios:{imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover",imgly_transform_facebook_profile:"Profile Pic"}}}},filter:{title:"Filters",filters:{identity:"None",imgly_lut_celsius:"Celsius",imgly_lut_chest:"Chest",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Front",imgly_lut_k2:"K2",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Sin",imgly_lut_texas:"Texas",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Bleached",imgly_lut_bleachedblue:"Bleached Blue",imgly_lut_blues:"Blues",imgly_lut_blueshadows:"Blue Shadows",imgly_lut_breeze:"Breeze",imgly_lut_bw:"B & W",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Cool",imgly_lut_cottoncandy:"Cotton Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Eighties",imgly_lut_elder:"Elder",imgly_lut_evening:"Evening",imgly_lut_fall:"Fall",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"High Contrast",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"KDynamic",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lenin",imgly_lut_litho:"Litho",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"No Green",imgly_lut_orchid:"Orchid",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Plate",imgly_lut_pola669:"Pola 669",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia High",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Sunset",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Winter",imgly_lut_x400:"X400"}},adjustments:{title:"Adjust",reset:"Reset Default",sections:{basics:"Basics",refinements:"Refinements"},items:{brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",shadows:"Shadows",highlights:"Highlights",clarity:"Clarity"}},focus:{title:"Focus",items:{none:"None",radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"}},text:{title:"Text",defaultText:"Double-click to edit!",new:"New Text",font:"Font",size:"Size",spacing:"Spacing",line:"Line",background:"Background"},sticker:{title:"Stickers",new:"New Sticker",fill:"Fill",opacity:"Opacity",replace:"Replace",stickerCategories:{},stickers:{}},brush:{title:"Brush",settings:"Brush Settings",width:"Width",hardness:"Hardness"},frame:{title:"Frames",opacity:"Opacity",width:"Width",replace:"Replace",fill:"Fill",frames:{none:"None"}},overlay:{title:"Overlays",blendModes:{none:"None",normal:"Normal",overlay:"Overlay",hardLight:"Hard Light",softLight:"Soft Light",multiply:"Multiply",darken:"Darken",lighten:"Lighten",screen:"Screen",colorBurn:"Color Burn"},overlays:{none:"None",imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}}}},loading:{loading:"Loading...",exporting:"Exporting...",resizing:"Resizing...",fonts:"Loading fonts..."},warnings:{imageResized_maxMegaPixels:{title:"Image resized",text:"Your image exceeds the maximum size of ${maxMegaPixels} megapixels and has therefore been resized to ${width}x${height} pixels."},imageResized_maxDimensions:{title:"Image resized",text:"Due to hardware limitations your image has been resized to ${width}x${height} pixels."},newImage_changesLost:{title:"New Image",text:"Any unsaved changes will be lost. Continue?",buttons:{yes:"Yes",no:"No"}},discardChanges:{title:"Discard changes?",text:"You have unsaved changes. Are you sure you want to discard the changes?",buttons:{cancel:"Cancel",keep:"Keep changes",discard:"Discard changes"}}},errors:{title:"Error",renderingError:{text:"An error has occurred while rendering the image."},stickerLoadingError:{text:"Failed to load sticker ${path}."},imageLoadingError:{text:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported."},fontLoadingError:{title:"Failed to load font",text:"The following fonts could not be loaded: ${fonts}."},webcamNotSupported:{text:"The webcam feature is not supported by your browser."},webcamUnavailable:{text:"Unable to display webcam image (Error: ${error})"},invalidFileType:{text:"The file type ${fileType} is not supported."}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n.n(o),r=n(155),s=n(166),a=n(169),l=n(176),c=n(55),u=n(186),p=n(191),h=n(195),f=n(202),d=n(208),m=[r.a,s.a,a.a,l.a,c.a,u.a,p.a,h.a,f.a,d.a];i.a.AllControls=m,e.default=m},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=n.n(s),l=n(156),c=n(162),u=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.shouldKeepChanges=function(){var t=this,e=this.context,n=e.editor,o=e.ui;return void 0===this.keepChanges&&!n.isShallow&&n.history.isUndoAvailable()?new Promise(function(e,n){s.ModalManager.instance.displayWarning(o.translate("warnings.discardChanges.title"),o.translate("warnings.discardChanges.text"),[o.translate("warnings.discardChanges.buttons.keep"),o.translate("warnings.discardChanges.buttons.discard")],!0).on("button",function(n){var o=0===n;t.keepChanges=o,e(o)})}):Promise.resolve(this.keepChanges)},e.prototype.onImage=function(t){var e=this;this.shouldKeepChanges().then(function(n){if(e._options.switchScreenOnImage)e.context.options.editor.image=t,e.context.appComponent.switchToScreen("editor");else{e.context.editor.setImage(t,!n)}e.sharedState.get("webcamEnabled")&&(e.sharedState.set({webcamEnabled:!1}),e.context.options.editor.forceCrop||e.context.screen.switchToControls("default"))})},e.prototype._onEnter=function(){this.sharedState.set({webcamEnabled:!1})},e.hasLibraryProvider=function(t){var e=t.getOptions().editor.controlsOptions;if(void 0===e.library)return!0;var n=e.library;return!!(n.provider||n.enableWebcam||n.enableUpload)},e.isEnabled=function(t){return e.hasLibraryProvider(t)&&t.isToolEnabled("library")},e}(s.BaseControls);u.clickAtPosition=s.BaseControls.clickAtPosition,u.getPreloadAssets=s.BaseControls.getPreloadAssets,u.identifier="library",u.controlsComponent=l.a,u.canvasControlsComponent=c.a,u.iconPath="editor/controls/library/icon.png",u.activeIconPath="editor/controls/library/icon-active.png",u.defaultOptions={enableWebcam:!0,enableUpload:!0,displayUploadInCanvas:!1,switchScreenOnImage:!1},e.a=u,a.a.Controls.LibraryControls=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(157)),l=n(159),c=n(161),u={ROOT:0,SEARCH:1},p=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r))),l=a.props.options.provider;return l&&(a._library=new l),a._bindAll("_onCategorySelect","_onImageSelect","_onSearchQueryChange","_onWebcamActivated"),a.state.currentPanel=u.ROOT,a.state.searchQuery="",a}return r(e,t),e.prototype._onBackButtonClick=function(){this.setState({currentPanel:u.ROOT,searchQuery:"",backButton:!1})},e.prototype._onCategorySelect=function(t){this.setState({currentPanel:u.SEARCH,searchQuery:t.getName(),backButton:!0})},e.prototype._onImageSelect=function(t){var e=this;this.setSharedState({webcamEnabled:!1});var n=new window.Image,o=void 0,i=setTimeout(function(){o=s.ModalManager.instance.displayLoading(e._t("loading.loading"))},200);n.addEventListener("load",function(){o&&o.close(),i&&(clearTimeout(i),i=null),e.props.controls.onImage(n)}),n.addEventListener("error",function(){o&&o.close(),i&&(clearTimeout(i),i=null),s.ModalManager.instance.displayError(e._t("errors.title"),e._t("errors.imageLoadingError.text"))}),n.crossOrigin="Anonymous",n.src=t.getRawUrl()},e.prototype._onSearchQueryChange=function(t){this.setState({searchQuery:t,currentPanel:u.SEARCH})},e.prototype._onWebcamActivated=function(t){this.setSharedState({webcamEnabled:!0})},e.prototype.fixStyles=function(){var e=this;if(this._list)return this._list.style.height="100%",t.prototype.fixStyles.call(this).then(function(){if(s.Utils.Browser.isIElte(10)){var t=e._container.offsetHeight;e._list.style.height=t+"px"}return e.refs.panel.fixStyles()})},e.prototype._renderCurrentPanel=function(){var t=this;switch(this.state.currentPanel){case u.ROOT:return s.React.createElement(a.a,{controls:this.props.controls,innerRef:function(e){t._list=e},library:this._library,onCategorySelect:this._onCategorySelect,onWebcamActivated:this._onWebcamActivated,options:this.props.options,key:"panel",ref:"panel"});case u.SEARCH:return s.React.createElement(l.a,{innerRef:function(e){t._list=e},library:this._library,onImageSelect:this._onImageSelect,searchQuery:this.state.searchQuery,key:"panel",ref:"panel"})}},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!1}},e.prototype._renderContent=function(){var t=[];return this._library&&t.push(s.React.createElement(c.a,{key:"searchHeader",onChange:this._onSearchQueryChange,searchQuery:this.state.searchQuery})),t.push(this._renderCurrentPanel()),t},e}(s.ControlsComponent);p.contextTypes=s.ControlsComponent.contextTypes,p.propTypes=s.ControlsComponent.propTypes,p.RootElement=s.ControlsComponent.RootElement,e.a=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(158)),l=n(53),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onImage"),a.state={loading:!0,categories:[]},a}return r(e,t),e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(s.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._loadCategories()},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._loadCoverImagesQueue&&this._loadCoverImagesQueue.dispose(),this._disposed=!0},e.prototype._onCategoryClick=function(t){this.props.onCategorySelect&&this.props.onCategorySelect(t)},e.prototype._onImage=function(t){this.props.controls.onImage(t)},e.prototype._loadCoverImages=function(t){var e=this,n=this.context.theme,o=t.map(function(t){return{fn:function(){return t.loadCoverImage()},index:t}});this._loadCoverImagesQueue=new s.DelayedJobQueue(o,{minDelay:n.listItemSlideInDelay}),this._loadCoverImagesQueue.on("job-done",function(t){e._disposed||(e.forceUpdate(),e._scrollbar.update())}),this._loadCoverImagesQueue.start()},e.prototype._loadCategories=function(){var t=this;return this.props.library?this.props.library.getCategories().then(function(e){t._loadCoverImages(e),t.setState({loading:!1,categories:e})}):(this.setState({loading:!1,categories:[]}),Promise.resolve())},e.prototype._renderListItems=function(){var t=this;return this.state.categories.map(function(e){return s.React.createElement(a.a,{key:e.getName(),category:e,visible:e.isCoverImageLoaded(),onClick:t._onCategoryClick.bind(t,e)})})},e.prototype.render=function(){var t=this;if(this.state.loading)return s.React.createElement(s.LoadingIndicatorComponent,null);var e=this.props.options,n=e.enableUpload,o=e.displayUploadInCanvas,i=this.props.innerRef;return s.React.createElement(u,{innerRef:function(e){i&&i(e),t._wrapper=e},className:void 0},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement(p,null,n&&!o&&s.React.createElement(l.a,{controls:this.props.controls,onImage:this._onImage,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this.props.onWebcamActivated}),this._renderListItems())))},e}(s.BaseComponent);e.a=c;var u=s.adonis.div("rfecls","RootPanelWrapper"),p=s.adonis.ul("5jg0ou","CategoryList")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.ControlItem),l=s.ControlsStyles.ControlItemTitle,c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.render=function(){var t=this.props,e=t.category,n=t.onClick,o=t.visible,i={backgroundImage:"url('"+e.getCoverImage()+"')"};return s.React.createElement(u,{animated:!0,style:i,visible:o,className:void 0,onClick:n},s.React.createElement(p,null,e.getName()))},e}(s.BaseComponent);e.a=c;var u=Object(s.adonis)(a).li("prcvvt","ListItem"),p=Object(s.adonis)(l).div("1ler8h7","ListItemTitle")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(160)),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a.state={loading:!0,images:[]},a}return r(e,t),e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(s.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._loadImages(this.props.searchQuery)},e.prototype.componentWillReceiveProps=function(t){this.props.searchQuery!==t.searchQuery&&this._loadImages(t.searchQuery)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._loadThumbsQueue.stop(),this._loadThumbsQueue.dispose(),this._disposed=!0},e.prototype._onImageClick=function(t){this.props.onImageSelect&&this.props.onImageSelect(t)},e.prototype._loadThumbs=function(t){var e=this,n=this.context.theme,o=t.map(function(t){return{fn:function(){return t.loadThumb()},index:t}});this._loadThumbsQueue=new s.DelayedJobQueue(o,{minDelay:n.listItemSlideInDelay}),this._loadThumbsQueue.on("job-done",function(t){e._disposed||(e.forceUpdate(),e._scrollbar&&e._scrollbar.update())}),this._loadThumbsQueue.start()},e.prototype._loadImages=function(t){var e=this;return t.trim()||this.setState({loading:!1,images:[]},function(){return e._scrollbar&&e._scrollbar.update()}),this.setState({loading:!0}),this.props.library.searchImages(t).then(function(t){e._loadThumbs(t),e.setState({loading:!1,images:t},function(){return e._scrollbar.update()})})},e.prototype._renderListItems=function(){var t=this,e=this.context.editor,n=e.getImage();return 0===this.state.images.length?s.React.createElement(p,null,this._t("editor.controls.library.noResults")):this.state.images.map(function(e){return s.React.createElement(a.a,{key:e.getThumbUrl(),image:e,selected:e.getRawUrl()===(n&&n.src),visible:e.isThumbLoaded(),onClick:t._onImageClick.bind(t,e)})})},e.prototype.render=function(){var t=this;if(this.state.loading)return s.React.createElement(s.LoadingIndicatorComponent,null);var e=this.props.innerRef;return s.React.createElement(c,{innerRef:function(n){e&&e(n),t._wrapper=n},className:void 0},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement(u,null,this._renderListItems())))},e}(s.BaseComponent);e.a=l;var c=s.adonis.div("rfecls","RootPanelWrapper"),u=s.adonis.ul("5jg0ou","ImageList"),p=s.adonis.div("6kl290","NoResultsText")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.ControlItem),l=s.ControlsStyles.ControlItemActiveOverlay,c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a.state={isPortrait:!1,hovered:!1},a}return r(e,t),e.prototype.componentWillReceiveProps=function(t){if(this.props.visible!==t.visible){var e=this.props.image.getThumbImage();e.height>e.width&&this.setState({isPortrait:!0})}},e.prototype.render=function(){var t=this,e=this.props,n=e.image,o=e.onClick,i=e.selected,r=e.visible,a={backgroundImage:"url('"+n.getThumbUrl()+"')"},l=n.getAuthorAvatar(),c=this.context.theme.transitionDuration,m=[void 0,i&&"is-selected"].filter(function(t){return t});return s.React.createElement(u,{animated:!0,style:a,selected:i,visible:r,className:m.join(" "),onClick:o,portrait:this.state.isPortrait,onMouseEnter:function(){return t.setState({hovered:!0})},onMouseLeave:function(){return t.setState({hovered:!1})}},s.React.createElement(s.Transition,{active:this.state.hovered,enterProp:"rendered",enterDuration:1e3*c,appearProp:"visible",appearDuration:1e3*c,leaveDuration:1e3*c},s.React.createElement(d,{selected:i},l&&s.React.createElement(h,{src:l}),s.React.createElement(f,null,n.getAuthorName()))),s.React.createElement(s.Transition,{active:i,enterProp:"rendered",enterDuration:1e3*c,appearProp:"visible",appearDuration:1e3*c,leaveDuration:1e3*c},s.React.createElement(p,{selected:!0})))},e}(s.BaseComponent);e.a=c;var u=Object(s.adonis)(a).li("1a5mxw5",{portrait:"otbyv0"},"ListItem"),p=Object(s.adonis)(l).div("120drhm","ListItemOverlay"),h=s.adonis.img("1owxkzt","AuthorAvatar"),f=s.adonis.div("1jylqsv","AuthorName"),d=s.adonis.div("mchu36",{rendered:"2jlos",visible:"1fmxelx"},"Author")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),250),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];var c=i(this,t.call.apply(t,[this].concat(r)));return c._bindAll("_onInputChange"),c._onDebouncedInputChange=s.Utils.debounce(c._onDebouncedInputChange,a),c.state={searchQueryInputValue:""},c}return r(e,t),e.prototype.componentWillReceiveProps=function(t){this.props.searchQuery!==t.searchQuery&&this.setState({searchQueryInputValue:t.searchQuery})},e.prototype.componentWillUnmount=function(){this._disposed=!0},e.prototype._onDebouncedInputChange=function(t){this._disposed||this.props.onChange&&this.props.onChange(t)},e.prototype._onInputChange=function(t){var e=t.target.value;this.setState({searchQueryInputValue:e}),this._onDebouncedInputChange(e)},e.prototype.render=function(){return s.React.createElement(c,{key:"header"},s.React.createElement(u,null,s.React.createElement(p,{placeholder:this._t("editor.controls.library.search"),onLiveChange:this._onInputChange,className:void 0,value:this.state.searchQueryInputValue})))},e}(s.BaseComponent);e.a=l;var c=s.adonis.div("1tkmkv6","Header"),u=s.adonis.div("mz0a5q","InputContainer"),p=Object(s.adonis)(s.TextInputComponent)("py3uvl","TextInput")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(163)),l=n(165),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onImage","_onWebcamBack","_onWebcamActivated"),a.state.displayHeader=!1,a}return r(e,t),e.prototype._onImage=function(t){this.props.controls.onImage(t)},e.prototype._onWebcamBack=function(){this.setSharedState({webcamEnabled:!1})},e.prototype._onWebcamActivated=function(t){this.setSharedState({webcamEnabled:!0})},e.prototype._renderControls=function(){var t=this.getSharedState("webcamEnabled"),e=this.props.options.displayUploadInCanvas;return t?s.React.createElement(a.a,{onImage:this._onImage,onBack:this._onWebcamBack}):e?s.React.createElement(u,null,s.React.createElement(l.a,{large:!0,controls:this.props.controls,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this._onWebcamActivated,onImage:this._onImage})):void 0},e}(s.CanvasControlsComponent);c.contextTypes=s.CanvasControlsComponent.contextTypes,e.a=c;var u=s.adonis.div("1up9ikz","LibraryUploadContainer")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=(n.n(a),n(164)),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onWebcamReady","_onWebcamError","_onButtonClick","_onCancelClick"),a.state={webcamReady:!1},a}return r(e,t),e.prototype._onWebcamReady=function(){this.props.onReady&&this.props.onReady(),this.setState({webcamReady:!0})},e.prototype._onWebcamError=function(t){var e=this;a.ModalManager.instance.displayError(this._t("errors.title"),this._t("errors.webcamUnavailable.text",{error:t})).on("close",function(){return e.props.onBack()})},e.prototype._onButtonClick=function(t){t.preventDefault(),this._takePhoto()},e.prototype._onCancelClick=function(t){t.preventDefault(),this.props.onBack&&this.props.onBack()},e.prototype._takePhoto=function(){var t=this;this.state.webcamReady&&this._webcam.capture().then(function(e){t.props.onImage&&t.props.onImage(e)})},e.prototype.render=function(){var t=this;return a.React.createElement(u,null,a.React.createElement(p,null,a.React.createElement(h,{onClick:this._onCancelClick},this._t("editor.cancel"))),a.React.createElement(f,null,a.React.createElement(d,{innerRef:function(e){t._videoContainer=e}},a.React.createElement(l.a,{flashURL:this._getAssetPath("fallback/webcam.swf"),ref:function(e){t._webcam=e},onWebcamError:this._onWebcamError,onWebcamAvailable:this._onWebcamReady}),a.React.createElement(m,{onClick:this._onButtonClick}))))},e}(a.BaseComponent);e.a=c;var u=a.adonis.div("dehn6v","Container"),p=a.adonis.div("4d756t","Gradient"),h=a.adonis.div("1p4kwwq","CancelButton"),f=a.adonis.div("1j41msh","OuterVideoContainer"),d=a.adonis.div("1g72uw9","VideoContainer"),m=(a.adonis.video("1btv3tg",{visible:"jsuk9w"},"Video"),a.adonis.div("1fkab7z","Button"))},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(9),a=n.n(s),l=n(7),c=n.n(l),u=n(1),p=(n.n(u),function(t){function e(n){o(this,e);var r=i(this,t.call(this,n));return r._bindAll("_onLoadedMetadata"),r.state={webcamAvailable:!1,useFlashFallback:!1},r._getUserMedia=null,r._webcamStream=null,r}return r(e,t),e.prototype.componentDidMount=function(){var t=this;if(this._initGetUserMedia(),this._getUserMedia)this._getUserMedia({video:{optional:[{minWidth:320},{minWidth:640},{minWidth:1024},{minWidth:1280},{minWidth:1920},{minWidth:2560}]},audio:!1}).then(function(e){t._webcamStream=e;var n=t._videoElement;"srcObject"in n?n.srcObject=e:n.src=window.URL.createObjectURL(e)}).catch(function(e){t.props.onWebcamError&&t.props.onWebcamError(e)});else{var e=!1;window.Webcam||(window.Webcam={},e=!0),window.Webcam.flashNotify=function(n,o){switch(n){case"cameraLive":t.setState({webcamAvailable:!0},function(){t.props.onWebcamAvailable&&t.props.onWebcamAvailable()}),delete window.Webcam.flashNotify,e&&delete window.Webcam;break;case"error":t.props.onWebcamError&&t.props.onWebcamError(o),delete window.Webcam.flashNotify,e&&delete window.Webcam}}}},e.prototype.componentWillUnmount=function(){this._disposeWebcam()},e.prototype._initGetUserMedia=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this._getUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)),!this._getUserMedia){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;t&&(this._getUserMedia=function(e){return new Promise(function(n,o){return t.call(navigator,e,n,o)})})}this._getUserMedia||this.setState({useFlashFallback:!0})},e.prototype._disposeWebcam=function(){if(this._webcamStream){var t=this._webcamStream,e=t.getTracks()[0];e?e.stop():t.stop&&t.stop()}else this._flashWebcam&&this._flashWebcam._releaseCamera()},e.prototype.capture=function(){var t=this;return this.state.webcamAvailable?this._videoElement&&!this._flashWebcam?new Promise(function(e,n){var o=t._videoElement;if(0===o.readyState)n(new Error("Webcam video not available"));else{var i=document.createElement("canvas");i.width=o.videoWidth,i.height=o.videoHeight;i.getContext("2d").drawImage(o,0,0);var r=new window.Image;r.addEventListener("load",function(){e(r)}),r.src=i.toDataURL("image/jpeg")}}):this._flashWebcam?new Promise(function(e,n){var o=t._flashWebcam._snap(),i=new Image;i.onload=function(){e(i)},i.src="data:image/jpeg;base64,"+o}):Promise.reject(new Error("Webcam video not available")):Promise.reject(new Error("Webcam video not available"))},e.prototype._getFlashFallbackComponent=function(){var t=this,e=this._container,n=e.offsetWidth,o=e.offsetHeight,i=640,r=480;o>n?(i=n||640,r=.75*n):(i=4/3*o,r=o||480);var s="width="+i+"&height="+r+"&dest_width=1024&dest_height=768&jpeg_quality=100&fps=24";return c.a.createElement("object",{classID:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-shockwave-flash",width:i,height:r,ref:function(e){t._flashWebcam=e},align:"middle"},c.a.createElement("param",{name:"wmode",value:"transparent"}),c.a.createElement("param",{name:"allowScriptAccess",value:"always"}),c.a.createElement("param",{name:"allowFullScreen",value:"false"}),c.a.createElement("param",{name:"movie",value:this.props.flashURL}),c.a.createElement("param",{name:"loop",value:"false"}),c.a.createElement("param",{name:"menu",value:"false"}),c.a.createElement("param",{name:"quality",value:"best"}),c.a.createElement("param",{name:"bgcolor",value:"#ffffff"}),c.a.createElement("param",{name:"flashvars",value:s}))},e.prototype._onLoadedMetadata=function(){var t=this;this.setState({webcamAvailable:!0},function(){t.props.onWebcamAvailable&&t.props.onWebcamAvailable()})},e.prototype.render=function(){var t=this,e=this.state.useFlashFallback?this._getFlashFallbackComponent():c.a.createElement(h,{autoPlay:!0,visible:this.state.webcamAvailable&&!this.state.useFlashFallback,innerRef:function(e){t._videoElement=e},onLoadedMetadata:this._onLoadedMetadata});return c.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"},ref:function(e){t._container=e}},e)},e}(u.BaseComponent));p.propTypes={flashURL:a.a.string,onWebcamAvailable:a.a.func,onWebcamError:a.a.func},e.a=p;var h=u.adonis.video("145pu2m",{visible:"jsuk9w"},"Video")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(53)),l=s.ControlsStyles.PlainControlItem,c=s.ControlsStyles.PlainControlItemBackground,u=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.render=function(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return s.React.createElement(p,null,s.React.createElement(h,null,s.React.createElement(m,null,s.React.createElement(f,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},s.React.createElement(s.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onNewFile}),this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone"))),!this.state.dropZoneHovered&&this.props.webcamEnabled&&s.React.createElement(m,null,s.React.createElement(d,{style:t,className:void 0,onClick:this._onWebcamClick}))))},e}(a.a);e.a=u;var p=Object(s.adonis)(l).div("1xesje3","Container"),h=Object(s.adonis)(c).div("z914p5","Background"),f=s.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),d=s.adonis.div("1jg5y1q","WebcamButton"),m=s.adonis.div("15u7gri","Row")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=n.n(s),l=n(167),c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.mapOperationsToSharedState=function(t){var e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],t.getOrCreate("adjustments"));return{brightness:e.getBrightness(),saturation:e.getSaturation(),contrast:e.getContrast(),gamma:e.getGamma(),exposure:e.getExposure(),shadows:e.getShadows(),highlights:e.getHighlights(),clarity:e.getClarity(),setBrightness:function(t){e.setBrightness(t)},setSaturation:function(t){e.setSaturation(t)},setContrast:function(t){e.setContrast(t)},setGamma:function(t){e.setGamma(t)},setExposure:function(t){e.setExposure(t)},setShadow:function(t){e.setShadow(t)},setHighlights:function(t){e.setHighlights(t)},setClarity:function(t){e.setClarity(t)},reset:function(){e.resetOptions()},setOperationOptions:function(t){e.set(t)}}},e.isEnabled=function(t){return t.isToolAllowed("adjustment")&&t.isToolEnabled("adjustments")},e}(s.BaseControls);c.clickAtPosition=s.BaseControls.clickAtPosition,c.getPreloadAssets=s.BaseControls.getPreloadAssets,c.identifier="adjustments",c.controlsComponent=l.a,c.canvasControlsComponent=s.BaseControls.canvasControlsComponent,c.iconPath="editor/controls/adjustments/icon.png",c.activeIconPath="editor/controls/adjustments/icon-active.png",c.requiredOperations=["adjustments"],c.defaultOptions={availableAdjustments:null},c.updatableOperations=["adjustments"],c.switchToDefaultControlsOnRemoval=!1,c.SECTIONS=[{identifier:"basics",items:["brightness","saturation","contrast","gamma"]},{identifier:"refinements",items:["clarity","exposure","shadows","highlights"]}],a.a.Controls.AdjustmentsControls=c,e.a=c},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),l=(n.n(a),n(168)),c=a.GroupedControlsStyles.ControlGroupList,u=function(t){function e(){i(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=r(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onResetDefaultClick"),a}return s(e,t),e.prototype._isAdjustmentAvailable=function(t){var e=this.props.options.availableAdjustments;return null===e||-1!==e.indexOf(t)},e.prototype._onResetDefaultClick=function(){this.sharedState.reset(),this.props.controls.addLocalHistorySnapshot("reset",!0)},e.prototype._onValueChange=function(t,e){this.sharedState.setOperationOptions(o({},t,e)),this.props.controls.addLocalHistorySnapshot(t,!0)},e.prototype._renderAdjustmentsControls=function(){var t=this,e=function(e){return a.React.createElement(a.CollapseSectionComponent,{key:e.identifier,title:t._t("editor.controls.adjustments.sections."+e.identifier),alwaysExpanded:!0},a.React.createElement(h,{className:void 0+e.identifier},n(e.items)))},n=function(e){return e.filter(function(e){return t._isAdjustmentAvailable(e)}).map(function(e){return t._makeItem(e)})};return this.props.controls.constructor.SECTIONS.filter(function(e){return e.items.filter(function(e){return t._isAdjustmentAvailable(e)}).length>0}).map(e)},e.prototype._makeItem=function(t){var e=this.sharedState[t];return a.React.createElement(l.a,{item:t,value:e,onValueChange:this._onValueChange.bind(this,t),className:void 0,key:t})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this;return a.React.createElement(a.ScrollableListComponent,{direction:"vertical",innerListRef:function(e){t._list=e},innerRef:function(e){t._scrollbar=e}},a.React.createElement(p,null,a.React.createElement(f,null,a.React.createElement(a.ButtonComponent,{title:this._t("editor.controls.adjustments.reset"),className:void 0,onClick:this._onResetDefaultClick})),this._renderAdjustmentsControls()))},e}(a.ControlsComponent);u.contextTypes=a.ControlsComponent.contextTypes,u.RootElement=a.ControlsComponent.RootElement,e.a=u;var p=Object(a.adonis)(c).ul("x32ss4","SectionList"),h=a.adonis.ul("gz4y54","SectionItemList"),f=a.adonis.div("7abnmv","BottomSection")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=n.n(s),l=n(1),c=(n.n(l),a.a.Operations.AdjustmentsOperation),u=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onValueChange"),a._option=c.prototype.availableOptions[a.props.item],a}return r(e,t),e.prototype.shouldComponentUpdate=function(t){return t.value!==this.props.value},e.prototype._onValueChange=function(t){var e=this._option,n=e.minValue,o=e.midValue,i=e.maxValue;t=t<0?o+(o-n)*t/100:o+(i-o)*t/100,this.props.onBeforeValueChange&&this.props.onBeforeValueChange(t),this.context.editor.render(),this.setState({value:t}),this.props.onValueChange&&this.props.onValueChange(t)},e.prototype.render=function(){var t=this._option,e=t.minValue,n=t.midValue,o=t.maxValue,i=this.props.value,r=100*(i<=n?(i-e)/(n-e)-1:(i-n)/(o-n));return i===e&&(r=-100),l.React.createElement(l.SliderControlComponent,{key:this.props.item,label:this._t("editor.controls.adjustments.items."+this.props.item),minValue:-100,maxValue:100,value:parseInt(r),onSliderValueChange:this._onValueChange,onValueChange:this._onValueChange,className:this.props.className,middleDot:!0})},e}(l.SharedStateComponent);u.contextTypes=l.SharedStateComponent.contextTypes,e.a=u},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=n.n(l),u=n(170),p=n(172),h=a.Operations.SpriteOperation?a.Operations.SpriteOperation:{},f=h.BrushSprite,d=function(t){function e(n,o,s){i(this,e);var a=r(this,t.call(this,n,o,s));return a._onOperationRemoved=a._onOperationRemoved.bind(a),a}return s(e,t),e.mapOperationsToSharedState=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{operation:t.getOrCreate("sprite")}},e.prototype._onEnter=function(){var t=this,e=this.context.editor,n=e.operations.getOrCreate("sprite"),o=n.createBrush();n.addSprite(o),e.zoom.auto(!1,!1,function(){e.features.disable("zoom","drag");var n=e.getOutputDimensions(),o=Math.max(.05*n.min(),1);t._options.widthPresets&&t._options.widthPresets.length>0&&(o=t._options.sizePresets[0]),t.sharedState.set({brushSize:Math.round(o)})}),this.sharedState.set({operation:n,brushSprite:o,brushColor:a.Color.WHITE,brushSize:.1,brushHardness:50})},e.prototype._onLeave=function(){var t=this.context.editor,e=t.operations.get("sprite");if(e){[].concat(o(e.getSprites())).forEach(function(t){t instanceof f&&t.getPaths().length<=0&&e.removeSprite(t)})}t.features.enable("zoom","drag"),t.render()},e.prototype._onOperationRemoved=function(t){if(t===this.sharedState.get("operation")){var e=this.context.editor.operations.getOrCreate("sprite"),n=e.createBrush();e.addSprite(n),this.sharedState.set({operation:e,brushSprite:n})}},e.isEnabled=function(t){return t.isToolAllowed("brush")&&t.isToolEnabled("brush")},e}(l.BaseControls);d.clickAtPosition=l.BaseControls.clickAtPosition,d.getPreloadAssets=l.BaseControls.getPreloadAssets,d.identifier="brush",d.controlsComponent=u.a,d.canvasControlsComponent=p.a,d.iconPath="editor/controls/brush/icon.png",d.activeIconPath="editor/controls/brush/icon-active.png",d.requiredOperations=["sprite"],d.defaultOptions={brushes:[],replaceBrushes:!1,availableBrushes:null},d.updatableOperations=["sprite"],d.switchToDefaultControlsOnRemoval=!1,c.a.Controls.BrushControls=d,e.a=d},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),n(171)),u=a.Operations.SpriteOperation,p=void 0;u&&(p=a.Operations.SpriteOperation.BrushSprite.Brush);var h=l.GroupedControlsStyles.ControlGroupTitle,f=l.GroupedControlsStyles.ControlGroup,d=function(t){function e(){i(this,e);for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];var c=r(this,t.call.apply(t,[this].concat(s)));return c._bindAll("_onBrushColorChanged","_onBrushHardnessChanged","_onBrushWidthChanged","_onOperationUpdated"),c._events=o({},l.Constants.EVENTS.OPERATION_UPDATED,c._onOperationUpdated),c._initBrushManager(),c}return s(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._onBrushSelect(this._brushManager.getBrushes()[0])},e.prototype._initBrushManager=function(){this._brushManager=new l.BrushManager(this.context.ui,this.props.options)},e.prototype._onBrushColorChanged=function(t){var e=this.getSharedState("brushInstance").clone();e.setColor(t.clone()),this.setSharedState({brushInstance:e})},e.prototype._onBrushHardnessChanged=function(t){var e=this.getSharedState("brushInstance").clone();e.setHardness(t/100),this.setSharedState({brushInstance:e,brushHardness:Math.round(t)})},e.prototype.sharedStateDidChange=function(t,e){t.brushSize!==e.brushSize&&this._onBrushWidthChanged(e.brushSize)},e.prototype._onBrushWidthChanged=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=this.getSharedState("brushInstance").clone();o.setSize(t/n.min()),this.setSharedState({brushInstance:o,brushSize:Math.round(t)})},e.prototype._onOperationUpdated=function(t){var e=this.context.editor;if(t===this.getSharedState("operation")){var n=this.getSharedState("brushSprite");if(n){var o=t.getSprites().filter(function(t){return t.getId()===n.getId()})[0];this.setSharedState({brushSprite:o})}e.render()}},e.prototype._onBrushSelect=function(t){var e=this,n=this.context.editor,o=n.getOutputDimensions(),l=this.getSharedState("brushSize")/o.min(),c=this.getSharedState("brushHardness")/100,u=this.getSharedState("brushColor"),h={size:l,color:u},f=void 0;if(t.prototype&&t.prototype instanceof p){f=new t(h)}else{var d=a.Utils.extend({},t);delete d.image;var m=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return s(e,t),e}(p);m.identifier=t.identifier,f=new m(a.Utils.extend({},d,h))}f.hasOption("hardness")&&f.setHardness(c),this._loadBrush(t,f).then(function(){e.setSharedState({brushInstance:f,brush:t})})},e.prototype._loadBrush=function(t,e){var n=this;return new Promise(function(o,i){if(t.constructor===Object){var r=new window.Image;r.addEventListener("load",function(){e.setImage(r),o()}),r.addEventListener("error",function(){i(new Error("Failed to load image at "+r.src))}),r.src=n._getAssetPath(t.image),r.crossOrigin="Anonymous"}else o()})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderBrushItems=function(){var t=this,e=this._brushManager.getBrushes();return e.length<=1?null:e.map(function(e){return l.React.createElement(c.a,{key:e.identifier,brush:e,selected:t.getSharedState("brush")===e,onClick:t._onBrushSelect.bind(t,e)})})},e.prototype._renderContent=function(){var t=this,e=this.getSharedState("brushInstance");return l.React.createElement(l.ScrollableListComponent,{direction:"vertical",innerListRef:function(e){t._list=e},innerRef:function(e){t._scrollbar=e}},l.React.createElement(_,null,l.React.createElement(g,null,this._t("editor.controls.brush.settings")),l.React.createElement(y,null,l.React.createElement(l.ColorSelectionComponent,{value:this.getSharedState("brushColor"),onChange:this._onBrushColorChanged})),l.React.createElement(m,{label:this._t("editor.controls.brush.width"),minValue:1,maxValue:100,value:this.getSharedState("brushSize"),onSliderValueChange:this._onBrushWidthChanged,onValueChange:this._onBrushWidthChanged,className:void 0}),l.React.createElement(m,{label:this._t("editor.controls.brush.hardness"),minValue:0,maxValue:100,disabled:!(e&&e.hasOption("hardness")),value:this.getSharedState("brushHardness"),onSliderValueChange:this._onBrushHardnessChanged,onValueChange:this._onBrushHardnessChanged})),l.React.createElement(v,null,l.React.createElement(l.ScrollbarComponent,{direction:"vertical"},l.React.createElement(b,null,this._renderBrushItems()))))},e}(l.ControlsComponent);d.contextTypes=l.ControlsComponent.contextTypes,d.RootElement=l.ControlsComponent.RootElement,e.a=d;var m=Object(l.adonis)(l.SliderControlComponent)("6vpx1b","SliderControl"),_=Object(l.adonis)(f).div("r92vc7","Settings"),g=Object(l.adonis)(h).div("120drhm","SettingsTitle"),y=l.adonis.div("yzsuxp","ColorSelection"),v=l.adonis.div("16dil83","Brushes"),b=l.adonis.ul("1lb1mg4","BrushList")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=(n.n(a),a.ControlsStyles.PlainControlItemBackground),c=s.Operations.SpriteOperation,u=void 0,p=void 0;c&&(u=c.BrushSprite.Brush,p=c.BrushSprite.Path);var h=s.Math.Vector2,f=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._loadBrush=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.brush;return new Promise(function(n,o){if(e.constructor===Object){var i=new window.Image;i.addEventListener("load",function(){t._brush.setImage(i),n()}),i.addEventListener("error",function(){o(new Error("Failed to load image at "+i.src))}),i.src=t._getAssetPath(e.image),i.crossOrigin="Anonymous"}else n()})},e.prototype._drawBrush=function(){var t=new p(null,{brush:this._brush},this._canvas);t.addControlPoint(new h(.1,.5)),t.addControlPoint(new h(.9,.5)),t.render(new h(this._canvas.width,this._canvas.height))},e.prototype._instantiateBrush=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.brush,e={color:s.Color.WHITE,size:.25};if(t.prototype&&t.prototype instanceof u){var n=t;this._brush=new n(e)}else{var a=s.Utils.extend({},t);delete a.image;var l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e}(u);l.identifier=t.identifier,this._brush=new l(s.Utils.extend({},a,e))}},e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this),this._instantiateBrush();var n=this._canvas,o=n.offsetWidth,i=n.offsetHeight;this._canvas.width=o,this._canvas.height=i,this._loadBrush().then(function(t){e._drawBrush()})},e.prototype.render=function(){var t=this;return a.React.createElement(d,{onClick:this.props.onClick,selected:this.props.selected,className:void 0,"data-selected":this.props.selected},a.React.createElement(m,{innerRef:function(e){t._canvas=e}}))},e}(a.BaseComponent);e.a=f;var d=Object(a.adonis)(l).li("8908c2",{selected:"120drhm"},"BrushListItem"),m=a.adonis.canvas("1ssoezr","Canvas")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=(n.n(a),n(26)),c=s.Operations.SpriteOperation?s.Operations.SpriteOperation:{},u=c.BrushSprite,p=s.Math.Vector2,h=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var l=i(this,t.call.apply(t,[this].concat(r)));return l._bindAll("_onMouseEnter","_onMouseLeave","_onMouseMove","_onDrawStart","_onDraw","_onDrawStop"),l.state=s.Utils.extend(l.state,{cursorPosition:new p(0,0),canvasClickDisabled:!0}),l}return r(e,t),e.prototype._selectNextSprite=function(){},e.prototype._onDrawStart=function(t){var e=this.context.editor,n=e.getOutputDimensions();this._initialDrawPosition=t.clone();var o=this.getSharedState("brushSprite"),i=this.getSharedState("brushInstance"),r=this.getSharedState("operation");o||(o=r.createBrush(),r.addSprite(o),this.setSharedState({brushSprite:o})),this._currentPath=o.createPath(i),this._currentPath.addControlPoint(t.clone().divide(n)),this._lastDrawPosition=this._initialDrawPosition.clone(),this._lastCursorPosition=this._initialDrawPosition.clone()},e.prototype._onDraw=function(t,e,n){var o=this.context.editor,i=o.getOutputDimensions(),r=o.getOutputTextureDimensions(),s=this._lastCursorPosition.clone().add(n),a=o.zoom.level,l=this.getSharedState("brushSize");s.clone().subtract(this._lastDrawPosition).abs().len()/a>=l/10&&(this._currentPath.addControlPoint(s.clone().divide(i)),this.getSharedState("brushSprite").render(r),this._lastDrawPosition.copy(s)),this._lastCursorPosition.copy(s)},e.prototype._onDrawStop=function(){this._currentPath.setClosed(!0);var t=this.context.editor,e=t.getOutputTextureDimensions();this.getSharedState("brushSprite").render(e),this.props.controls.addLocalHistorySnapshot(),this._currentPath=null},e.prototype._onMouseEnter=function(){this.setState({cursorVisible:!0})},e.prototype._onMouseLeave=function(){this.setState({cursorVisible:!1})},e.prototype._onMouseMove=function(t){var e=a.Utils.getEventPosition(t),n=this._innerContainer.getBoundingClientRect();e.subtract(n.left,n.top),this.setState({cursorPosition:e})},e.prototype._getPropsForSprite=function(e){var n=t.prototype._getPropsForSprite.call(this,e);return e instanceof u&&(n.hideContent=!1),n},e.prototype._getCursorStyle=function(){return{width:this.getSharedState("brushSize")+8,height:this.getSharedState("brushSize")+8,left:this.state.cursorPosition.x,top:this.state.cursorPosition.y,marginLeft:-.5*(this.getSharedState("brushSize")+8),marginTop:-.5*(this.getSharedState("brushSize")+8)}},e.prototype._renderOverlayControls=function(){return a.React.createElement(a.DraggableComponent,{onStart:this._onDrawStart,onDrag:this._onDraw,onStop:this._onDrawStop},a.React.createElement(f,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseMove:this._onMouseMove,className:void 0},a.React.createElement(d,{style:this._getCursorStyle(),visible:this.state.cursorVisible})))},e}(l.a);h.contextTypes=l.a.contextTypes,e.a=h;var f=a.adonis.div("1sc5z35","BrushCanvasControls"),d=a.adonis.div("y4v90o",{visible:"2jlos"},"Cursor")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(27)),l=n(6),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a.state={renderAsSVG:!1,svgAttributes:{}},a}return r(e,t),e.prototype.componentDidMount=function(){var e=this;if(t.prototype.componentDidMount.call(this),this.props.hideContent)return null;var n=this.props.sprite;n.getImage().src.match(/\w+\.svg(?=\?|$)/i)&&"none"!==n.getTintMode()&&l.a.loadXHR(n.getImage().src,"image/svg+xml").then(function(t){for(var n=t.responseXML.documentElement.attributes,o={},i=0;i<n.length;i++){var r=n[i],s=r.name,a=r.value;"xmlns:xlink"===s&&(s="xmlnsXlink"),o[s]=a}var l=t.responseText.match(/<svg\b[^>]*>([\s\S]*?)<\/svg>/im)[1];l=l.replace(/\s+?fill=["'].*?["']/gi,""),e.setState({renderAsSVG:!0,svgContent:l,svgAttributes:o})})},e.prototype._onBeforeScale=function(){var t=this.props.sprite;this._initialOptions={dimensions:t.getDimensions().clone()}},e.prototype._onScale=function(t){var e=this.context.editor,n=this._initialOptions.dimensions;this.props.sprite.set({dimensions:n.clone().multiply(t/e.zoom.level)}),this.forceUpdate(),e.render()},e.prototype._getSpriteDimensions=function(){var t=this.context.editor;return this.props.sprite.getDimensions().clone().multiply(t.zoom.level)},e.prototype._getContainerStyle=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this.props.sprite,o=n.getPosition().clone().multiply(e),i=180*n.getRotation()/Math.PI,r="rotateZ("+i.toFixed(2)+"deg)",s=n.getDimensions().clone().multiply(t.zoom.level);return{width:s.x,height:s.y,left:o.x,top:o.y,marginLeft:-.5*s.x,marginTop:-.5*s.y,transform:r,MozTransform:r,msTransform:r,WebkitTransform:r,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}},e.prototype._getContentStyle=function(){var t=this.props.sprite,e="rotateY("+(t.getFlipHorizontally()?180:0)+"deg) rotateX("+(t.getFlipVertically()?180:0)+"deg)",n={opacity:t.getAlpha(),transform:e,MozTransform:e,msTransform:e,WebkitTransform:e};return this.state.renderAsSVG&&(n.fill=t.getTintColor().toRGBA()),n},e.prototype._renderContent=function(){if(this.props.hideContent)return null;var t=this.props.sprite,e=this.state.svgAttributes;return this.state.renderAsSVG?React.createElement(h,c({style:this._getContentStyle(),dangerouslySetInnerHTML:{__html:this.state.svgContent}},e)):React.createElement(p,{src:t.getImage().src,style:this._getContentStyle()})},e}(a.a);u.contextTypes=a.a.contextTypes,u.MIN_WIDTH=a.a.MIN_WIDTH,e.a=u;var p=s.adonis.img("1ssoezr","Image"),h=s.adonis.svg("1ssoezr","SVGImage")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),n(27)),u=a.Math.Vector2,p=function(t){function e(){i(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=r(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onTextChange","_onBlur","_onItemDoubleClick","_onWidthDrag","_onWidthDragStop"),a.state={editing:!1,updateBecauseIESucks:!1},a}return s(e,t),e.prototype._isDraggingDisabled=function(){return t.prototype._isDraggingDisabled.call(this)||this.state.editing},e.prototype.enterEditMode=function(){var t=this,e=this.context.editor,n=this.props.sprite;n.setVisible(!1),e.render(),this.setState({editing:!0},function(){n._edited||(n.setText(""),t._textField.value="",n._edited=!0,t.forceUpdate()),t._textField.focus(),t._textField.select()})},e.prototype.leaveEditMode=function(){var t=this.context.editor;this.props.sprite.setVisible(!0),t.render(),this.setState({editing:!1})},e.prototype.shouldComponentUpdate=function(){return!0},e.prototype._onTakeToFront=function(){var e;this.leaveEditMode();for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];(e=t.prototype._onTakeToFront).call.apply(e,[this].concat(o))},e.prototype._onFlipHorizontally=function(){var e;this.leaveEditMode();for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];(e=t.prototype._onFlipHorizontally).call.apply(e,[this].concat(o))},e.prototype._onDuplicate=function(){var e;this.leaveEditMode();for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];(e=t.prototype._onDuplicate).call.apply(e,[this].concat(o))},e.prototype._onSpriteUpdate=function(e,n){var o=this;l.Utils.Browser.isIElte(10)&&n.alignment&&e.getAlignment()!==n.alignment&&this.setState({updateBecauseIESucks:!0},function(){Object(l.requestAnimationFrame)(function(){o.setState({updateBecauseIESucks:!1})})}),t.prototype._onSpriteUpdate.call(this)},e.prototype._onWidthDragStart=function(t,e,n){var o=this.context.editor,i=this.props.sprite,r=i.getAnchor();this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset();var s=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),a=i.getDimensions(o.getSDK(),o.getOutputDimensions()),l=new u(a.width,a.height),c=s.clone().subtract(l.clone().multiply(r)).add(l.clone().multiply(.5)).round(),p=n.clone().subtract(this._containerOffset).subtract(c);this._initialScaleSettings={maxWidth:i.getMaxWidth(),mouseDistanceFromCenter:p},this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()},e.prototype._onWidthDrag=function(t){var e=this.props.sprite,n=e.getRotation(),o=this._initialScaleSettings.mouseDistanceFromCenter,i=o.clone().add(t),r=Math.cos(n),s=Math.sin(n),a=Math.max(Math.abs(2*(i.x*r+i.y*s)),50)/this._imageBoundingBox.width;e.setMaxWidth(a),this.context.editor.render()},e.prototype._onWidthDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()},e.prototype._onBlur=function(){this.leaveEditMode();var t=this.props.sprite;t&&""===t.getText()&&(t.setText(this._t("editor.controls.text.defaultText")),t._edited=!1)},e.prototype._onTextChange=function(t){this.props.sprite.setText(t.target.value),this.forceUpdate()},e.prototype._onItemDoubleClick=function(){this.props.selected&&this.enterEditMode()},e.prototype._onBeforeScale=function(){var t=this.props.sprite;this._initialOptions={maxWidth:t.getMaxWidth(),fontSize:t.getFontSize()}},e.prototype._onScale=function(t){var e=this._initialOptions,n=e.maxWidth,o=e.fontSize,i=this.props.sprite;i.set({maxWidth:n*t,fontSize:o*t}),this.context.mediator.emit(l.Constants.EVENTS.TEXT_SCALED,i),this.forceUpdate()},e.prototype._getContainerStyle=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this.props.sprite,o=n.getPosition().clone().multiply(e),i=180*n.getRotation()/Math.PI,r="rotateZ("+i.toFixed(2)+"deg)",s=n.getMaxWidth()*e.x,a=n.getDimensions(t.getSDK(),e).y;return{width:s,height:a,left:o.x,top:o.y,marginLeft:-.5*s,marginTop:-.5*a,transform:r,MozTransform:r,msTransform:r,WebkitTransform:r,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}},e.prototype._getTextStyle=function(){var t=this.context.editor,e=this.props.sprite,n=t.getSDK(),o=t.getOutputDimensions(),i=e.getDOMStyle(n,o),r=this._getAbsoluteSpritePosition(),s=e.getDimensions(n,o);return i.height=Math.min(s.y,o.y-r.y+s.y/2),i},e.prototype._renderKnobs=function(){var e=this,n=t.prototype._renderKnobs.call(this);return["left","right"].forEach(function(t){var i="width-"+t,r=o({},t,!0);n.push(l.React.createElement(l.DraggableComponent,{key:i,onStart:e._onWidthDragStart.bind(e,t),onDrag:e._onWidthDrag,onStop:e._onWidthDragStop},l.React.createElement(d,r)))}),n},e.prototype._getItemControlsProps=function(){return{onDoubleClick:this._onItemDoubleClick,onTouchStart:this._onItemTouchStart,onTouchEnd:this._onItemTouchEnd}},e.prototype._renderContent=function(){var t=this,e=this.props,n=e.sprite,o=e.selected,i=this.state,r=i.editing,s=i.updateBecauseIESucks,a=[];return this.props.hideContent&&!this.state.editing||a.push(l.React.createElement(h,{key:"text-field",editing:r,innerRef:function(e){t._textField=e},style:this._getTextStyle(),defaultValue:n.getText(),onBlur:this._onBlur,onChange:this._onTextChange,updateBecauseIESucks:s})),this.state.editing||a.push(l.React.createElement(f,{key:"disabled-overlay",className:void 0,selected:o})),a},e}(c.a);p.contextTypes=c.a.contextTypes,p.MIN_WIDTH=100,e.a=p;var h=l.adonis.textarea("12u5t8c",{updateBecauseIESucks:"ckktkq",editing:"15kzu1c"},"TextField"),f=l.adonis.div("8gacw5","DisabledOverlay"),d=l.adonis.div("jqmmm4",{left:"tr97e1",right:"1llojum"},"WidthControl")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(27)),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.props.sprite.getCanvas();this._brush&&this._appendCanvas(e)},e.prototype.componentWillReceiveProps=function(t){if(t.sprite!==this.props.sprite){var e=this.props.sprite.getCanvas();if(e.parentNode.removeChild(e),this._brush){var n=t.sprite.getCanvas();this._appendCanvas(n)}}},e.prototype._appendCanvas=function(t){t.style.width="100%",t.style.height="100%",this._brush.appendChild(t)},e.prototype._renderOverlayControls=function(){return null},e.prototype.render=function(){var t=this;return this.props.hideContent?null:s.React.createElement(c,{innerRef:function(e){t._brush=e}})},e}(a.a);e.a=l;var c=s.adonis.div("8gacw5","BrushItem")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=n.n(a),c=n(177),u=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.mapOperationsToSharedState=function(t){var e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],t.getOrCreate("filter"));return{intensity:e?100*e.getIntensity():100,identifier:e?e.getIdentifier():null,filter:e?e.filter:null,setIntensity:function(t){e&&e.setIntensity(t/100)},setFilter:function(t){e&&e.setFilter(t)},setIdentifier:function(t){e&&e.setIdentifier(t)},setOperationOptions:function(t){e.set(t)}}},e.isEnabled=function(t){return t.isToolEnabled("filter")&&t.isToolAllowed("filter")},e.getPreloadAssets=function(t){var e=[],n=t.getOptions(),o=s.Utils.defaults(n.editor.controlsOptions.filter,this.defaultOptions);return new a.FilterManager(t.getUI(),o).getFiltersForCategory("all").forEach(function(t){void 0!==t.lutImage&&e.push([t.lutImage,!1])}),e},e}(a.BaseControls);u.clickAtPosition=a.BaseControls.clickAtPosition,u.identifier="filter",u.controlsComponent=c.a,u.canvasControlsComponent=a.BaseControls.canvasControlsComponent,u.iconPath="editor/controls/filter/icon.png",u.activeIconPath="editor/controls/filter/icon-active.png",u.requiredOperations=["filter","transform"],u.updatableOperations=["filter"],u.switchToDefaultControlsOnRemoval=!1,u.defaultOptions={categories:[],replaceCategories:!1,availableFilters:null},l.a.Controls.FilterControls=u,e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=n.n(s),l=n(1),c=(n.n(l),n(54)),u=n(3),p=n(178),h=n(179),f=void 0;s.Operations.FilterOperation&&(f=s.Operations.FilterOperation.Filters.IdentityFilter);var d=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));a._bindAll("_onIntensityChanged","_onListScroll");var u=a.context,p=u.ui,f=u.editor,d=u.theme;return a._loadedFilters=[],a._filterPreviewRenderer=new h.a(f),a._renderQueue=new c.a(1,1/0,d.listItemSlideInDelay),a._filterManager=new l.FilterManager(p,a.props.options),a._filterPreviewQueue=[],a._filterPreviews=[],a._category="all",a}return r(e,t),e.prototype.fixStyles=function(){var e=this;return t.prototype.fixStyles.call(this).then(function(){e._onListScroll()})},e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this),this._filterPreviewRenderer.init(),this._renderPreviewsAnimationFrame=Object(u.b)(function(){e._renderPreviews()})},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._renderPreviewsAnimationFrame&&Object(u.a)(this._renderPreviewsAnimationFrame),this._renderQueue.dispose(),this._filterPreviewRenderer.dispose(),this._disposed=!0,window.clearInterval(this._interval)},e.prototype._renderPreviews=function(){var t=this,e=this.context.editor,n=e.getSDK().getRenderer(),o=this._getVisibleFilters().filter(function(e){return-1===t._loadedFilters.indexOf(e)});n.isOfType(a.a.RendererType.WEBGL)?o.forEach(function(e){t._loadedFilters.push(e),t._renderQueue.add(function(){return t._filterManager.instantiateFilterWithIdentifier(e.identifier).then(function(n){if(!t._disposed)return t._filterPreviewRenderer.render(n).then(function(n){t._filterPreviews[e.identifier]=n,t.forceUpdate()})})})}):(this._loadedFilters=this._loadedFilters.concat(o),o.forEach(function(e){t._renderQueue.add(function(){return new Promise(function(n){t._filterPreviews[e.identifier]=t._getAssetPath("editor/controls/filter/filters/"+e.identifier+".png",!0),t.forceUpdate(),n()})})}))},e.prototype._getVisibleFilters=function(){for(var t=[f].concat(this._filterManager.getFiltersForCategory(this._category)),e=[],n=this._container.getBoundingClientRect(),o=0,i=t.length;o<i;o++){var r=t[o],s=this.refs["filter-"+r.identifier].container,a=s.getBoundingClientRect();if(!(a.top>n.bottom+n.height||a.bottom<n.top))e.push(r);else if(e.length)break}return e},e.prototype._onListScroll=function(t){this._renderPreviews()},e.prototype._onItemClick=function(t){var e=this;this.sharedState.identifier!==t&&this._filterManager.instantiateFilterWithIdentifier(t).then(function(n){e.sharedState.setOperationOptions({filter:n,identifier:t,intensity:1}),e.context.editor.render()})},e.prototype._onIntensityChanged=function(t){this.sharedState.setIntensity(t)},e.prototype._renderListItems=function(){var t=this,e=this._filterManager.getFiltersForCategory(this._category),n=this.sharedState.identifier,o=this.sharedState.intensity,i=this._filterPreviews;return[f].concat(e).map(function(r,s){var a=r.identifier,c=!i[a]&&s===t._loadedFilters.length,u=a===n;return l.React.createElement(_,{key:a,"data-selected":u,"data-identifier":a,className:void 0},l.React.createElement(p.a,{ref:"filter-"+a,filter:r,identifier:a,lastChild:r===e[e.length-1],onClick:t._onItemClick.bind(t,a),selected:u,intensity:o,displaySlider:r!==f,onIntensityChanged:t._onIntensityChanged,visible:!!i[a],previewUrl:i[a]}),c&&l.React.createElement(g,null))})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this;return l.React.createElement(l.ScrollableListComponent,{direction:"vertical",onScroll:this._onListScroll,innerRef:function(e){t._scrollbar=e}},l.React.createElement(m,null,this._renderListItems()))},e}(l.ControlsComponent);d.contextTypes=l.ControlsComponent.contextTypes,d.propTypes=l.ControlsComponent.propTypes,d.RootElement=l.ControlsComponent.RootElement,e.a=d;var m=l.adonis.ul("9uviv9","List"),_=l.adonis.li("13hv8io","ListItemContainer"),g=Object(l.adonis)(l.LoadingIndicatorComponent)("11ztmqh","LoadingIndicator")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=s.ControlsStyles.ControlItem,u=s.ControlsStyles.ControlItemActiveOverlay,p=s.ControlsStyles.ControlItemTitle,h=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a.state={hovered:!1},a}return r(e,t),e.prototype.shouldComponentUpdate=function(t,e){return this.props.previewUrl!==t.previewUrl||this.props.selected!==t.selected||this.props.visible!==t.visible||this.state.hovered!==e.hovered||this.props.filter!==t.filter||!(this.props.intensity===t.intensity||!t.selected)},e.prototype.render=function(){var t=this,e=this.props,n=e.lastChild,o=e.onClick,i=e.onIntensityChanged,r=e.selected,l=e.intensity,c=e.displaySlider,u=e.visible,p=e.filter,h=null;this.props.previewUrl&&(h=s.React.createElement(g,{src:this.props.previewUrl}));var v=this.context.theme.transitionDuration,b={lastChild:n,onClick:o,visible:u};return s.React.createElement(f,a({},b,{animated:!0,innerRef:function(e){t._container=e},onMouseEnter:function(){return t.setState({hovered:!0})},onMouseLeave:function(){return t.setState({hovered:!1})}}),s.React.createElement(m,{selected:r},h,s.React.createElement(s.Transition,{active:r&&c,enterProp:"rendered",enterDuration:1e3*v,appearProp:"visible",appearDuration:1e3*v,leaveDuration:1e3*v},r&&c&&s.React.createElement(d,null,s.React.createElement(s.SliderComponent,{minValue:0,maxValue:100,valueUnit:"",middleDot:!1,value:l,onChange:i}))),s.React.createElement(_,{hovered:this.state.hovered},this._t("editor.controls.filter.filters."+p.identifier)||p.defaultName),s.React.createElement(s.Transition,{active:r,enterProp:"rendered",enterDuration:1e3*v,appearProp:"visible",appearDuration:1e3*v,leaveDuration:1e3*v},s.React.createElement(y,{selected:r}))))},l(e,[{key:"container",get:function(){return this._container}}]),e}(s.BaseComponent);h.contextTypes=s.BaseComponent.contextTypes,e.a=h;var f=Object(s.adonis)(c).div("120drhm",{lastChild:"229bd5"},"Item"),d=s.adonis.div("19g9ike",{visible:"zgbg08",rendered:"2jlos"},"Slider"),m=s.adonis.div("rf12k1","ItemContainer"),_=Object(s.adonis)(p).span("hpn4lp","ItemTitle"),g=s.adonis.img("3x5zfy","Preview"),y=Object(s.adonis)(u).div("120drhm","Overlay")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(2),r=n.n(i),s=i.Math.Vector2,a=new s(180,80),l=function(){function t(e){o(this,t),this._editor=e,this._disposed=!1}return t.prototype.init=function(){this._initSDK()},t.prototype.render=function(t){var e=this;return this._filterOperation.setFilter(t),this._sdk.render().then(function(){return e._sdk.getCanvas().toDataURL("image/png")})},t.prototype._initSDK=function(){var t=this._editor.getOptions(),e=t.logLevel,n=t.debug,o=t.license,i=t.editor,s=i.smoothDownscaling,l=i.smoothUpscaling,c=i.preferredRenderer,u={logLevel:e,debug:n,pixelRatio:1,smoothDownscaling:s,smoothUpscaling:l,transparent:!0,license:o,image:this._editor.getSDK().getImage(),renderMode:"export",versionCheck:!1,displayWelcomeMessage:!1};this._sdk=new r.a(c,u),this._sdk.resizeTo(a),this._filterOperation=this._sdk.createOperation("filter"),this._transformOperation=this._sdk.createOperation("transform");var p=this._calculateTransformOptions(),h=p.start,f=p.end,d=p.textureScale;this._transformOperation.set({start:h,end:f,textureScale:d}),this._sdk.render()},t.prototype._calculateTransformOptions=function(){var t=this._transformOperation.getInputDimensions(),e=t.x/t.y,n=new s,o=new s,i=a.x/a.y;if(e<=i){var r=1/t.y*(t.x/i);n.set(0,(1-r)/2),o.set(1,1-n.y)}else{var l=1/t.x*(i*t.y);n.set((1-l)/2,0),o.set(1-n.x,1)}var c=o.clone().subtract(n),u=t.clone().multiply(c),p=a.x/u.x;return{dimensions:a,start:n,end:o,textureScale:p}},t.prototype.dispose=function(){this._sdk&&this._sdk.dispose()},t.prototype.isDisposed=function(){return this._disposed},t}();e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(181)),l=(n(55),function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onBlurRadiusChanged"),a}return r(e,t),e.prototype._isModeAvailable=function(t){var e=this.props.options.availableModes;return"none"===t||null===e||-1!==e.indexOf(t)},e.prototype._onItemClick=function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.sharedState.setSelectedFocus(t)},e.prototype._onBlurRadiusChanged=function(t){this.sharedState.setBlurRadius(t)},e.prototype._renderListItems=function(){var t=this,e=this.props.controls,n=this.sharedState.operationIdentifier,o=this.sharedState.selectedFocus,i=this.sharedState.blurRadius;return e.constructor.ITEMS.filter(function(e){return t._isModeAvailable(e.identifier)}).map(function(e){var r=t._getAssetPath(e.backgroundImagePath,!0),l=t._getAssetPath(e.activeBackgroundImagePath,!0),c=e.identifier===o;return s.React.createElement(a.a,{key:e.identifier,title:t._t("editor.controls.focus.items."+e.identifier),selected:c,showSlider:!!n,blurRadius:i,onBlurRadiusChanged:t._onBlurRadiusChanged,backgroundImagePath:r,activeBackgroundImagePath:l,onClick:t._onItemClick.bind(t,e,!0,!1)})},this)},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this;return s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerListRef:function(e){t._list=e},innerRef:function(e){t._scrollbar=e}},s.React.createElement(c,null,this._renderListItems()))},e}(s.ControlsComponent));l.contextTypes=s.ControlsComponent.contextTypes,l.propTypes=s.ControlsComponent.propTypes,l.RootElement=s.ControlsComponent.RootElement,e.a=l;var c=s.adonis.ul("1snluvd","List")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.ControlItem),l=s.ControlsStyles.ControlItemTitle,c=s.ControlsStyles.ControlItemActiveOverlay,u=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onSliderValueChanged"),a}return r(e,t),e.prototype._onSliderValueChanged=function(t){var e=this.props.onBlurRadiusChanged,n=this.sharedState.inputDimensions,o=n.min();e&&e(t/o)},e.prototype._renderSlider=function(){var t=this.props,e=t.selected,n=t.showSlider,o=t.blurRadius;if(!e||!n)return null;var i=this.sharedState.inputDimensions,r=Math.min(180,Math.round(.1*i.min())),a=i.min();return s.React.createElement(s.SliderComponent,{minValue:0,maxValue:r,valueUnit:"",middleDot:!1,value:o*a,onChange:this._onSliderValueChanged})},e.prototype.render=function(){var t=this.props,e=t.title,n=t.backgroundImagePath,o=t.activeBackgroundImagePath,i=t.selected,r=t.onClick,a=t.showSlider,l={backgroundImage:"url('"+(i?o:n)+"')"},c=this.context.theme.transitionDuration;return s.React.createElement(p,{selected:i,"data-selected":i,className:void 0,onClick:r,style:l},s.React.createElement(h,{selected:i,withSlider:i&&a},e),s.React.createElement(d,{visible:i&&a},this._renderSlider()),s.React.createElement(s.Transition,{active:i,enterProp:"rendered",enterDuration:1e3*c,appearProp:"visible",appearDuration:1e3*c,leaveDuration:1e3*c},s.React.createElement(f,{selected:!0})))},e}(s.SharedStateComponent);u.contextTypes=s.SharedStateComponent.contextTypes,e.a=u;var p=Object(s.adonis)(a).li("19qom6j","ListItem"),h=Object(s.adonis)(l).div("1cwztpc",{selected:"2znik8",withSlider:"fsvvyb"},"ListItemTitle"),f=Object(s.adonis)(c).div("rctda3","ListItemOverlay"),d=s.adonis.div("chwlso",{visible:"vpr3tu"},"Slider")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),n(183)),u=n(184),p=n(185),h=function(t){function e(){i(this,e);for(var n=arguments.length,s=Array(n),c=0;c<n;c++)s[c]=arguments[c];var u=r(this,t.call.apply(t,[this].concat(s)));return u._bindAll("_onZoomDone"),u._events=o({},l.Constants.EVENTS.ZOOM_DONE,u._onZoomDone),u.state=a.Utils.extend(u.state,{zoomDone:!1}),u}return s(e,t),e.prototype._onZoomDone=function(){this.setState({zoomDone:!0})},e.prototype._renderControls=function(){var t=this.sharedState.selectedFocus,e=void 0;switch(t){case"radial":e=c.a;break;case"linear":e=u.a;break;case"mirrored":e=p.a;break;default:return l.React.createElement("div",null)}return l.React.createElement(e,{zoomDone:this.state.zoomDone})},e}(l.CanvasControlsComponent);h.contextTypes=l.CanvasControlsComponent.contextTypes,e.a=h},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),n(3)),u=l.ControlsStyles.Knob,p=l.ControlsStyles.FullContainer,h=a.Math.Vector2,f=a.Math.Rectangle,d=function(t){function e(){i(this,e);for(var n=arguments.length,s=Array(n),u=0;u<n;u++)s[u]=arguments[u];var p=r(this,t.call.apply(t,[this].concat(s)));return p._bindAll("_onCircleDragStart","_onCircleDrag","_onKnobDragStart","_onKnobDrag","_onZoomDone"),p.state=a.Utils.extend(p.state,{circlePosition:new h,circleDimensions:new h,knobPosition:new h,visible:!1}),p._knobChangedManually=!1,p._events=o({},l.Constants.EVENTS.ZOOM_DONE,p._onZoomDone),p.props.zoomDone&&Object(c.b)(function(){p._onZoomDone()}),p}return s(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()},e.prototype.sharedStateDidChange=function(t,e){this._operation&&e.operation&&this._operation!==e.operation&&this._operation.constructor===e.operation.constructor&&(e.operation.set(this._operation.serializeOptions()),this._operation=e.operation)},e.prototype._onZoomDone=function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()},e.prototype._onCircleDragStart=function(){this._initialPosition=this.sharedState.radialFocus.position.clone(),this._initialKnobPosition=this.state.knobPosition.clone()},e.prototype._onCircleDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=t.clone().divide(n),i=this._initialPosition.clone().add(o),r=this._initialKnobPosition.clone().add(t);this.sharedState.setPosition(i),this.state.knobPosition=r,e.render(),this._updatePositionsAndDimensions()},e.prototype._onKnobDragStart=function(t){this._knobChangedManually=!0,this._initialKnobPosition=this.state.knobPosition.clone()},e.prototype._onKnobDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=this._initialKnobPosition.clone().add(t).clamp(new h(0,0),n),i=this.sharedState.radialFocus.position.clone().multiply(n),r=o.clone().subtract(i).abs().len(),s=r/2;this.setState({knobPosition:o,circleDimensions:new h(2*r,2*r)}),this.sharedState.setOperationOptions({radius:r/n.min(),gradientRadius:s/n.min()}),e.render()},e.prototype._updatePositionsAndDimensions=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this.sharedState.radialFocus.position.clone().multiply(e),o=this.sharedState.radialFocus.radius*e.min(),i=2*o,r=new h(i,i),s={circleDimensions:r,circlePosition:n};this._knobChangedManually||(s.knobPosition=n.clone().add(o,0)),this.setState(s)},e.prototype._updateOnCanvasControls=function(){var t=this.context.editor,e=t.getSDK().getSprite().getBounds(),n=this._container.getBoundingClientRect(),o=this.context.appComponent.getBounds(),i=new f(Math.floor(e.x-(n.left-o.left)),Math.floor(e.y-(n.top-o.top)),Math.ceil(e.width)+1,Math.ceil(e.height)+1);l.Utils.styleElement(this._onCanvasControls,{left:i.x+"px",top:i.y+"px",width:i.width+"px",height:i.height+"px"}),this.forceUpdate()},e.prototype._getCircleStyles=function(){return{width:this.state.circleDimensions.x,height:this.state.circleDimensions.y,left:this.state.circlePosition.x,top:this.state.circlePosition.y,marginLeft:-.5*this.state.circleDimensions.x,marginTop:-.5*this.state.circleDimensions.y}},e.prototype._getKnobStyle=function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}},e.prototype.render=function(){var t=this;return l.React.createElement(m,{innerRef:function(e){t._container=e}},l.React.createElement(l.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},l.React.createElement(_,{innerRef:function(e){t._onCanvasControls=e}},l.React.createElement(l.DraggableComponent,{onStart:this._onCircleDragStart,onDrag:this._onCircleDrag},l.React.createElement(y,{className:void 0,style:this._getCircleStyles()})),l.React.createElement(l.DraggableComponent,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},l.React.createElement(g,{className:void 0,style:this._getKnobStyle()})))))},e}(l.SharedStateComponent);d.contextTypes=l.SharedStateComponent.contextTypes,e.a=d;var m=Object(l.adonis)(p).div("1rineb","CanvasControls"),_=l.adonis.div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),g=Object(l.adonis)(u).div("120drhm","Knob"),y=l.adonis.div("kgwi8g","Circle")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),n(3)),u=l.ControlsStyles.Knob,p=l.ControlsStyles.FullContainer,h=a.Math.Vector2,f=a.Math.Rectangle,d=function(t){function e(){i(this,e);for(var n=arguments.length,s=Array(n),u=0;u<n;u++)s[u]=arguments[u];var p=r(this,t.call.apply(t,[this].concat(s)));return p._bindAll("_onKnobDragStart","_onKnobDrag","_onZoomDone"),p.state=a.Utils.extend(p.state,{visible:!1}),p._events=o({},l.Constants.EVENTS.ZOOM_DONE,p._onZoomDone),p.props.zoomDone&&Object(c.b)(function(){p._onZoomDone()}),p}return s(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._updateOnCanvasControls()},e.prototype.sharedStateDidChange=function(t,e){this._operation&&e.operation&&this._operation!==e.operation&&this._operation.constructor===e.operation.constructor&&(e.operation.set(this._operation.serializeOptions()),this._operation=e.operation)},e.prototype._onZoomDone=function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls()},e.prototype._onKnobDragStart=function(t,e){this._initialPosition=this.sharedState.linearFocus["controlPoint"+t]},e.prototype._onKnobDrag=function(t,e){var n=this.context.editor,o=n.getSDK().getSprite().getBounds(),i=this._container.getBoundingClientRect(),r=this.context.appComponent.getBounds(),s=this._initialPosition.clone().multiply(o.width,o.height),a=s.add(e).clamp(new h(i.left-r.left-o.x,i.top-r.top-o.y),new h(i.width-(o.x-(i.left-r.left)),i.height-(o.y-(i.top-r.top)))),l=a.divide(o.width,o.height);this.sharedState["setControlPoint"+t](l)},e.prototype._updateOnCanvasControls=function(){var t=this.context.editor,e=t.getSDK().getSprite().getBounds(),n=this._container.getBoundingClientRect(),o=this.context.appComponent.getBounds(),i=new f(Math.floor(e.x-(n.left-o.left)),Math.floor(e.y-(n.top-o.top)),Math.ceil(e.width)+1,Math.ceil(e.height)+1);l.Utils.styleElement(this._onCanvasControls,{left:i.x+"px",top:i.y+"px",width:i.width+"px",height:i.height+"px"}),this.forceUpdate()},e.prototype._getKnobStyle=function(t){var e=this.context.editor,n=this.sharedState.linearFocus["controlPoint"+t],o=e.getSDK().getSprite().getBounds(),i=n.clone().multiply(o.width,o.height);return{left:i.x,top:i.y}},e.prototype._getLineStyle=function(){var t=this.context.editor,e=t.getSDK().getSprite().getBounds(),n=this.sharedState.linearFocus.controlPoint1.clone(),o=this.sharedState.linearFocus.controlPoint2.clone(),i={1:n.multiply(e.width,e.height),2:o.multiply(e.width,e.height)},r=i[2].clone().subtract(i[1]),s=r.len(),a=Math.atan2(r.y,r.x);return{width:s+"px",left:i[1].x+"px",top:i[1].y+"px",transform:"rotate("+a+"rad) translateY(-50%)"}},e.prototype._renderKnobs=function(){for(var t=[],e=1;e<=2;e++)t.push(l.React.createElement(l.DraggableComponent,{onStart:this._onKnobDragStart.bind(this,e),onDrag:this._onKnobDrag.bind(this,e),key:e},l.React.createElement(g,{style:this._getKnobStyle(e),className:void 0})));return t},e.prototype.render=function(){var t=this;return l.React.createElement(m,{innerRef:function(e){t._container=e}},l.React.createElement(l.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},l.React.createElement(_,{innerRef:function(e){t._onCanvasControls=e}},this._renderKnobs(),l.React.createElement(y,{style:this._getLineStyle()}))))},e}(l.SharedStateComponent);d.contextTypes=l.SharedStateComponent.contextTypes,e.a=d;var m=Object(l.adonis)(p).div("1rineb","CanvasControls"),_=l.adonis.div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),g=Object(l.adonis)(u).div("120drhm","Knob"),y=l.adonis.div("1rrhaqy","Line")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),n(3)),u=l.ControlsStyles.Knob,p=l.ControlsStyles.FullContainer,h=a.Math.Vector2,f=a.Math.Rectangle,d=function(t){function e(){i(this,e);for(var n=arguments.length,s=Array(n),u=0;u<n;u++)s[u]=arguments[u];var p=r(this,t.call.apply(t,[this].concat(s)));return p._bindAll("_onCenterDragStart","_onCenterDrag","_onKnobDragStart","_onKnobDrag","_onZoomDone"),p.state=a.Utils.extend(p.state,{areaPosition:new h,areaDimensions:new h,knobPosition:new h,visible:!1}),p._events=o({},l.Constants.EVENTS.ZOOM_DONE,p._onZoomDone),p.props.zoomDone&&Object(c.b)(function(){p._onZoomDone()}),p}return s(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()},e.prototype.sharedStateDidChange=function(t,e){this._operation&&e.operation&&this._operation!==e.operation&&this._operation.constructor===e.operation.constructor&&(e.operation.set(this._operation.serializeOptions()),this._operation=e.operation)},e.prototype._onZoomDone=function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()},e.prototype._onCenterDragStart=function(){this._initialStart=this.sharedState.mirroredFocus.start,this._initialEnd=this.sharedState.mirroredFocus.end,this._initialDist=this._initialEnd.clone().subtract(this._initialStart)},e.prototype._onCenterDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=t.clone().divide(n),i=this._initialStart.clone().add(o).clamp(new h(0,0),new h(1,1).subtract(this._initialDist)),r=i.clone().add(this._initialDist);this.sharedState.setOperationOptions({start:i,end:r}),this._updatePositionsAndDimensions()},e.prototype._onKnobDragStart=function(t){this._initialKnobPosition=this.state.knobPosition.clone()},e.prototype._onKnobDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=this._initialKnobPosition.clone().add(t).clamp(new h(0,0),n),i=o.clone().subtract(this.state.areaPosition),r=this.state.areaPosition.clone().add(-i.y,i.x).divide(n),s=this.state.areaPosition.clone().add(i.y,-i.x).divide(n),a=2*i.len();this.sharedState.setOperationOptions({start:r,end:s,size:a/n.min(),gradientSize:a/n.min()}),this.setState({knobPosition:o,areaDimensions:new h(this.state.areaDimensions.x,a)})},e.prototype._getAreaStyle=function(){var t=this.state.knobPosition.clone().subtract(this.state.areaPosition),e=Math.atan2(t.x,t.y)*(180/Math.PI),n="rotate("+(-e).toFixed(2)+"deg)";return{width:this.state.areaDimensions.x,height:this.state.areaDimensions.y,left:this.state.areaPosition.x,top:this.state.areaPosition.y,marginLeft:-.5*this.state.areaDimensions.x,marginTop:-.5*this.state.areaDimensions.y,transform:n,MozTransform:n,msTransform:n,WebkitTransform:n}},e.prototype._getKnobStyle=function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}},e.prototype._updatePositionsAndDimensions=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this.sharedState.mirroredFocus,o=n.start,i=n.end,r=n.size;o=o.clone().multiply(e),i=i.clone().multiply(e),r*=e.min();var s=i.clone().subtract(o),a=o.clone().add(s.clone().divide(2)),l=new h(2*e.len(),r),c=s.len(),u=s.clone().divide(c).divide(2);this.setState({areaDimensions:l,areaPosition:a.clone(),knobPosition:a.clone().add(-r*u.y,r*u.x)})},e.prototype._updateOnCanvasControls=function(){var t=this.context.editor,e=t.getSDK().getSprite().getBounds(),n=this._container.getBoundingClientRect(),o=this.context.appComponent.getBounds(),i=new f(Math.floor(e.x-(n.left-o.left)),Math.floor(e.y-(n.top-o.top)),Math.ceil(e.width)+1,Math.ceil(e.height)+1);l.Utils.styleElement(this._onCanvasControls,{left:i.x+"px",top:i.y+"px",width:i.width+"px",height:i.height+"px"}),this.forceUpdate()},e.prototype.render=function(){var t=this;return l.React.createElement(m,{innerRef:function(e){t._container=e}},l.React.createElement(l.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},l.React.createElement(_,{innerRef:function(e){t._onCanvasControls=e}},l.React.createElement(l.DraggableComponent,{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag},l.React.createElement(y,{className:void 0,style:this._getAreaStyle()})),l.React.createElement(l.DraggableComponent,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},l.React.createElement(g,{className:void 0,style:this._getKnobStyle()})))))},e}(l.SharedStateComponent);d.contextTypes=l.SharedStateComponent.contextTypes,e.a=d;var m=Object(l.adonis)(p).div("1rineb","CanvasControls"),_=l.adonis.div("aovk7s",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),g=Object(l.adonis)(u).div("120drhm","Knob"),y=l.adonis.div("36haff","Area")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=n.n(s),l=n(187),c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.mapOperationsToSharedState=function(t){var e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],t.get("frame")||null),n=null;return e&&(n=e.getFrame()),{operation:e,frame:n,frameIdentifier:n?n.identifier:null,tintColor:e?e.getTintColor():null,removeFrame:function(){e&&t.remove(e)},setTintColor:function(t){e&&e.setTintColor(t.clone())}}},e.prototype.loadFrame=function(t){var e=this,n=this.context.editor,o=new s.Frame(this.context.ui,t),i=n.operations.getOrCreate("frame"),r=void 0,a=setTimeout(function(){r=s.ModalManager.instance.displayLoading(e._t("loading.loading"))},100);return o.load().then(function(){r&&r.close(),a&&(clearTimeout(a),a=null),i.setFrame(o.getFrame())})},e.isEnabled=function(t){return t.isToolAllowed("frame")&&t.isToolEnabled("frame")},e}(s.BaseControls);c.clickAtPosition=s.BaseControls.clickAtPosition,c.getPreloadAssets=s.BaseControls.getPreloadAssets,c.identifier="frame",c.controlsComponent=l.a,c.canvasControlsComponent=s.BaseControls.canvasControlsComponent,c.iconPath="editor/controls/frame/icon.png",c.activeIconPath="editor/controls/frame/icon-active.png",c.requiredOperations=["frame"],c.defaultOptions={categories:[],replaceCategories:!1,availableFrames:null},c.updatableOperations=["frame"],c.switchToDefaultControlsOnRemoval=!1,a.a.Controls.FrameControls=c,e.a=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(188)),l=n(190),c={ROOT:1,CATEGORY:2,OPTIONS:3},u=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));a._bindAll("_onFrameClick","_onReplaceClick"),a._initFrameManager(),a._needsStyleFixes=!0;var l=c.ROOT,u=a.getSharedState("operation");return u&&u.getFrame()&&(l=c.OPTIONS),a.state={currentPanel:l},a}return r(e,t),e.prototype.fixStyles=function(){var e=this;return this._list.style.height="100%",t.prototype.fixStyles.call(this).then(function(){if(s.Utils.Browser.isIElte(10)){var t=e._container.offsetHeight;e._list.style.height=t+"px"}return e.refs.panel.fixStyles()})},e.prototype.componentDidUpdate=function(t,e){this.state.currentPanel!==e.currentPanel&&this.fixStyles()},e.prototype._initFrameManager=function(){this._frameManager=new s.FrameManager(this.context.ui,this.props.options)},e.prototype.sharedStateDidChange=function(t,e){var n=this.context.editor,o=n.operations.get("frame");return!o||o&&!o.getFrame()?this.setState({currentPanel:c.ROOT}):this.setState({currentPanel:c.OPTIONS})},e.prototype._onReplaceClick=function(){this.setState({currentPanel:c.ROOT})},e.prototype._onCategoryClick=function(t){this.setState({currentPanel:c.CATEGORY,category:t})},e.prototype._onFrameClick=function(t){var e=this;if(!t)return this.sharedState.removeFrame(),void this.props.controls.addLocalHistorySnapshot("frame-image",!0);this.props.controls.loadFrame(t).then(function(){e.props.controls.addLocalHistorySnapshot("frame-image",!1),e.setState({currentPanel:c.OPTIONS})})},e.prototype._renderCurrentPanel=function(){var t=this,e=this.props.controls;switch(this.state.currentPanel){case c.ROOT:return s.React.createElement(a.a,{innerRef:function(e){t._list=e},frameManager:this._frameManager,onFrameClick:this._onFrameClick,controls:e,ref:"panel"});case c.OPTIONS:return s.React.createElement(l.a,{innerRef:function(e){t._list=e},frameManager:this._frameManager,onReplaceClick:this._onReplaceClick,onNewFrameClick:this._onNewFrameClick,controls:e,ref:"panel"})}},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){return this._renderCurrentPanel()},e}(s.ControlsComponent);u.contextTypes=s.ControlsComponent.contextTypes,u.RootElement=s.ControlsComponent.RootElement,e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(3)),l=n(189),c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(a.b)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.render=function(){var t=this,e=this.props,n=e.frameManager,o=e.innerRef;return s.React.createElement(u,{innerRef:function(e){o&&o(e),t._wrapper=e},className:void 0},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement(l.a,{frames:n.getFramesForCategory("all"),onFrameClick:this.props.onFrameClick})))},e}(s.BaseComponent);c.contextTypes=s.BaseComponent.contextTypes,e.a=c;var u=s.adonis.div("rfecls","Wrapper")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.PlainControlItem),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._onFrameClick=function(t){this.props.onFrameClick&&this.props.onFrameClick(t)},e.prototype._renderListItems=function(){var t=this,e=this.props.frames,n=this.getSharedState.frameIdentifier,o=this.getSharedState("selectedSprite");return o&&(n=o.getIdentifier()),e.map(function(e){var o=t._getAssetPath(e.thumbnail),i={background:"url('"+o+"') no-repeat center center",backgroundSize:"contain"};return s.React.createElement(u,{selected:e.identifier===n,key:e.identifier,onClick:t._onFrameClick.bind(t,e),className:void 0,twoColumns:!0},s.React.createElement(p,{style:i}))})},e.prototype.render=function(){var t=this.sharedState.frame;return s.React.createElement(c,null,s.React.createElement(u,{selected:!t,onClick:this._onFrameClick.bind(this,null),className:void 0,withText:!0,twoColumns:!0},"None"),this._renderListItems())},e}(s.SharedStateComponent);l.contextTypes=s.SharedStateComponent.contextTypes,e.a=l;var c=s.adonis.ul("18qztam","FrameList"),u=Object(s.adonis)(a).li("u8nfgk","FrameListItem"),p=s.adonis.div("7r0ke8","FrameImage")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(3)),l=s.ControlsStyles.PlainControlItemBackground,c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));a._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange","_onWidthChange");var l=a.sharedState.tintColor;return a.state={tintEnabled:!!l&&l.a>0,tintColor:l},a}return r(e,t),e.prototype._onTintToggle=function(t){var e=this.state.tintEnabled,n=this.sharedState.tintColor.clone();n.a=e?0:1,this.sharedState.setTintColor(n),this.props.controls.addLocalHistorySnapshot("frame-tint-enabled"),this.context.editor.render(),this.setState({tintEnabled:!e})},e.prototype._onTintColorChange=function(t){this.sharedState.setTintColor(t.clone()),this.props.controls.addLocalHistorySnapshot("frame-tint-color",!0),this.context.editor.render()},e.prototype.sharedStateDidChange=function(){var t=this.sharedState.tintColor;this.setState({tintEnabled:!!t&&t.a>0,tintColor:t?t.clone():null})},e.prototype._onOpacityChange=function(t){this.getSharedState("operation").setAlpha(t/100),this.props.controls.addLocalHistorySnapshot("frame-opacity",!0),this.context.editor.render(),this.forceUpdate()},e.prototype._onWidthChange=function(t){var e=this.context.editor,n=this.getSharedState("operation"),o=n.getInputDimensions().min();n.setScale(t/o),this.props.controls.addLocalHistorySnapshot("frame-width",!0),e.render(),this.forceUpdate()},e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(a.b)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.render=function(){var t=this,e=this.props,n=e.innerRef,o=e.onReplaceClick,i=this.getSharedState("operation"),r=i.getFrame(),a=i.getInputDimensions(),l=a.min(),c=r.tintable,v={background:"url('"+this._getAssetPath(r.thumbnail,!1)+"') center center / contain no-repeat"};return s.React.createElement(u,{innerRef:function(e){n&&n(e),t._wrapper=e},className:void 0},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement("div",null,s.React.createElement(p,null,s.React.createElement(h,null,s.React.createElement(f,null,s.React.createElement(d,{style:v,onClick:o})),s.React.createElement(m,null,s.React.createElement(_,null,this._t("editor.controls.frame.frames."+r.identifier)||r.defaultName),s.React.createElement(g,{onClick:o,className:void 0},this._t("editor.controls.frame.replace")))),s.React.createElement(s.SliderControlComponent,{minValue:0,value:Math.round(100*i.getAlpha()),maxValue:100,label:this._t("editor.controls.frame.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0}),s.React.createElement(s.SliderControlComponent,{minValue:.05*l,value:Math.round(i.getScale()*l),maxValue:.3*l,label:this._t("editor.controls.frame.width"),onSliderValueChange:this._onWidthChange,onValueChange:this._onWidthChange,middleDot:!1,className:void 0})),c&&s.React.createElement(s.CollapseSectionComponent,{toggleable:!0,title:this._t("editor.controls.frame.fill"),expanded:this.state.tintEnabled,className:void 0,onToggle:this._onTintToggle},s.React.createElement(y,{value:this.state.tintColor,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))},e}(s.SharedStateComponent);c.contextTypes=s.SharedStateComponent.contextTypes,e.a=c;var u=s.adonis.div("rfecls","Wrapper"),p=s.adonis.div("1vnvjau","TopSection"),h=s.adonis.div("16woy02","Details"),f=Object(s.adonis)(l).div("6u8g0p","Thumbnail"),d=s.adonis.div("7r0ke8","ThumbnailImage"),m=s.adonis.div("1trlo6v","DetailsContainer"),_=s.adonis.div("w9mc0y","Title"),g=s.adonis.div("1rhky7p","ReplaceButton"),y=Object(s.adonis)(s.ColorSelectionComponent)("1ouwzwk","ColorSelection")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=n.n(s),l=n(192),c=n(6),u=n(28),p=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.mapOperationsToSharedState=function(t){var e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],t.getOrCreate("overlay"));return{operation:e,identifier:e?e.getIdentifier():null,alpha:e?e.getAlpha():1,blendMode:e?e.getBlendMode():u.a.normal,removeOverlay:function(){e&&e.set({image:null,identifier:null,alpha:1})},setOverlayOptions:function(t){e&&e.set(t)},setAlpha:function(t){e&&e.setAlpha(t)},setBlendMode:function(t){e&&e.setBlendMode(t)}}},e.prototype.loadOverlay=function(t){var e=this,n=this._getAssetPath(t.image),o=u.a[t.blendMode],i=void 0,r=setTimeout(function(){i=s.ModalManager.instance.displayLoading(e._t("loading.loading"))},100);return c.a.load(n).then(function(e){return i&&i.close(),r&&(clearTimeout(r),r=null),{identifier:t.identifier,image:e,blendMode:o,alpha:void 0===t.intensity?1:t.intensity}})},e.isEnabled=function(t){return t.isToolAllowed("overlay")&&t.isToolEnabled("overlay")},e}(s.BaseControls);p.clickAtPosition=s.BaseControls.clickAtPosition,p.getPreloadAssets=s.BaseControls.getPreloadAssets,p.identifier="overlay",p.controlsComponent=l.a,p.canvasControlsComponent=s.BaseControls.canvasControlsComponent,p.iconPath="editor/controls/overlay/icon.png",p.activeIconPath="editor/controls/overlay/icon-active.png",p.requiredOperations=["overlay"],p.defaultOptions={overlays:[],replaceOverlays:!1,availableOverlays:null},p.updatableOperations=["overlay"],p.switchToDefaultControlsOnRemoval=!1,a.a.Controls.OverlayControls=p,e.a=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(6)),l=n(54),c=n(193),u=(n(28),s.ControlsStyles.PlainControlItem),p=s.ControlsStyles.PlainControlItemBackground,h=s.ControlsStyles.ControlItemTitle,f=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var c=i(this,t.call.apply(t,[this].concat(r))),u=c.context,p=u.ui,h=u.theme;return c._thumbnailLoadQueue=new l.a(1,1/0,h.listItemSlideInDelay),c._thumbnailsLoaded={},c._overlayManager=new s.OverlayManager(p,c.props.options),c.state={},c}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._loadThumbnails()},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._thumbnailLoadQueue.dispose()},e.prototype._loadThumbnails=function(){var t=this;this._overlayManager.getOverlays().forEach(function(e){t._thumbnailLoadQueue.add(function(){return a.a.load(t._getAssetPath(e.thumbnail)).then(function(n){t._thumbnailsLoaded[e.identifier]=n,t.forceUpdate()})})})},e.prototype._onBlendModeChange=function(){this.props.controls.addLocalHistorySnapshot("overlay-blend-mode",!1)},e.prototype._onAlphaChange=function(){this.props.controls.addLocalHistorySnapshot("overlay-alpha",!0)},e.prototype._onItemClick=function(t){var e=this;if(!t)return this.getSharedState.removeOverlay(),this.forceUpdate();t.identifier!==this.sharedState.identifier&&this.props.controls.loadOverlay(t).then(function(t){e.sharedState.setOverlayOptions(t),e.props.controls.addLocalHistorySnapshot("overlay-image",!1)})},e.prototype._renderListItems=function(){var t=this,e=this.sharedState.identifier;return this._overlayManager.getOverlays().map(function(n){return s.React.createElement(c.a,{key:n.identifier,overlay:n,selected:n.identifier===e,visible:!!t._thumbnailsLoaded[n.identifier],onClick:t._onItemClick.bind(t,n),onBlendModeChange:t._onBlendModeChange.bind(t),onAlphaChange:t._onAlphaChange.bind(t)})})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this,e=this.getSharedState("operation"),n=!e.getIdentifier();return s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement(d,null,s.React.createElement(m,{onClick:this._onItemClick.bind(this,null)},s.React.createElement(_,{selected:n},s.React.createElement(g,null,this._t("editor.controls.overlay.overlays.none")))),this._renderListItems()))},e}(s.ControlsComponent);f.contextTypes=s.ControlsComponent.contextTypes,f.propTypes=s.ControlsComponent.propTypes,f.RootElement=s.ControlsComponent.RootElement,e.a=f;var d=s.adonis.ul("9uviv9","List"),m=Object(s.adonis)(u).div("1sgdmny","NoneItem"),_=Object(s.adonis)(p).div("yogtp1","NoneItemBackground"),g=Object(s.adonis)(h).span("5krmrh","ItemTitle")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(194)),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=s.ControlsStyles.ControlItem,p=s.ControlsStyles.ControlItemActiveOverlay,h=s.ControlsStyles.ControlItemTitle,f=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a.state={hovered:!1},a._bindAll("_onBlendModeChange","_onAlphaChange"),a}return r(e,t),e.prototype._onBlendModeChange=function(t){this.props.onBeforeBlendModeChange&&this.props.onBeforeBlendModeChange(),this.sharedState.setBlendMode(t),this.props.onBlendModeChange&&this.props.onBlendModeChange()},e.prototype._onAlphaChange=function(t){this.props.onBeforeAlphaChange&&this.props.onBeforeAlphaChange(),this.sharedState.setAlpha(t),this.props.onAlphaChange&&this.props.onAlphaChange()},e.prototype.shouldComponentUpdate=function(t,e){return this.props.selected!==t.selected||this.props.visible!==t.visible||this.state.hovered!==e.hovered||this.props.overlay!==t.overlay||!(this.props.intensity===t.intensity||!t.selected)},e.prototype.render=function(){var t=this,e=this.props,n=e.lastChild,o=e.onClick,i=e.selected,r=e.visible,a=e.overlay,c=this.sharedState.alpha,u=this.sharedState.blendMode,p={lastChild:n,onClick:o,visible:r};return p.style={backgroundImage:"url('"+this._getAssetPath(a.thumbnail)+"')"},s.React.createElement(d,l({},p,{className:void 0,animated:!0,innerRef:function(e){t._container=e},onMouseEnter:function(){return t.setState({hovered:!0})},onMouseLeave:function(){return t.setState({hovered:!1})}}),s.React.createElement(_,{selected:i},s.React.createElement(s.Transition,{active:!i},s.React.createElement(v,null,s.React.createElement(g,{hovered:this.state.hovered},this._t("editor.controls.overlay.overlays."+a.identifier)||a.defaultName))),s.React.createElement(s.Transition,{active:i},s.React.createElement(v,null,s.React.createElement(y,null,"Blending"),s.React.createElement(w,{value:u,onChange:this._onBlendModeChange}),i&&s.React.createElement(m,null,s.React.createElement(s.SliderComponent,{minValue:0,maxValue:1,valueUnit:"",middleDot:!1,value:c,onChange:this._onAlphaChange})),s.React.createElement(b,{rendered:!0,visible:!0})))))},c(e,[{key:"container",get:function(){return this._container}}]),e}(s.SharedStateComponent);f.contextTypes=s.SharedStateComponent.contextTypes,e.a=f;var d=Object(s.adonis)(u).div("193vjnw",{lastChild:"229bd5"},"Item"),m=s.adonis.div("12dmntm","Slider"),_=s.adonis.div("1m161zg","ItemContainer"),g=Object(s.adonis)(h).span("120drhm","ItemTitle"),y=Object(s.adonis)(g)("1kbikta","BlendingLabel"),v=s.adonis.div("tj7k39",{rendered:"cuo4v2",visible:"82svov"},"ItemContent"),b=Object(s.adonis)(p).div("120drhm","Overlay"),w=Object(s.adonis)(a.a)("ii685b","BlendingControl")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=(n.n(a),n(28)),c=a.ControlsStyles.ControlItemTitle,u=s.Utils.flipObject(l.a),p=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onPreviousClick","_onNextClick"),a}return r(e,t),e.prototype._onPreviousClick=function(t){t.preventDefault(),t.stopPropagation();var e=Object.keys(u),n=e.indexOf(this.props.value.toString()),o=(n+e.length-1)%e.length,i=parseInt(e[o],10);this.props.onChange&&this.props.onChange(i)},e.prototype._onNextClick=function(t){t.preventDefault(),t.stopPropagation();var e=Object.keys(u),n=e.indexOf(this.props.value.toString()),o=(n+e.length+1)%e.length,i=parseInt(e[o],10);this.props.onChange&&this.props.onChange(i)},e.prototype.render=function(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-left.png",!0)+"')"},e={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-right.png",!0)+"')"},n=this.props.value;return a.React.createElement(h,{styles:this.props.styles},a.React.createElement(d,{onClick:this._onPreviousClick,style:t}),a.React.createElement(f,null,this._t("editor.controls.overlay.blendModes."+u[n])),a.React.createElement(d,{onClick:this._onNextClick,style:e}))},e}(a.BaseComponent);p.contextTypes=a.BaseComponent.contextTypes,e.a=p;var h=a.adonis.div("15zte1z","BlendingControlContainer");p.RootElement=h;var f=Object(a.adonis)(c).div("1v7ogyl","Label"),d=a.adonis.div("1v32l0l","Arrow")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=n.n(a),c=n(196),u=n(201),p=s.Math.Vector2,h=void 0;s.Operations.SpriteOperation&&(h=s.Operations.SpriteOperation.StickerSprite);var f=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._updateStickerCategories=a._updateStickerCategories.bind(a),a}return r(e,t),e.mapOperationsToSharedState=function(t){var e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=t.getOrCreate("sprite"),o=n.getInputDimensions(!1),i=e.selectedSprite,r=e.stickerManager;if(i&&n.getSprites().indexOf(i)<0){var s=n.getSprites().filter(function(t){return t.getId()===i.getId()})[0];s&&(i=s)}return{operation:n,inputDimensions:o,stickerManager:r,selectedSprite:i,stickerObject:i&&r?r.getStickerByIdentifier(i.getIdentifier()):null,image:i?i.getImage():null,alpha:i?100*i.getAlpha():0,tintMode:i?i.getTintMode():"",tintColor:i?i.getTintColor():null,setStickerOptions:function(t){i&&i.set(t)},setStickerImage:function(t){i&&i.setImage(t)},setAlpha:function(t){i&&i.setAlpha(t/100)},setTintMode:function(t){i&&i.setTintMode(t)},setTintColor:function(t){i&&i.setTintColor(t)}}},e.prototype.createSticker=function(t){var e=this;return this.loadStickerImage(t).then(function(n){var o=e.context.editor,i=o.operations.getOrCreate("sprite"),r=i.getInputDimensions(!1),a=new p(n.width,n.height),l=new p(.5*r.min(),.5*r.min()),c=i.createSticker({identifier:t.identifier,image:n,position:new p(.5,.5),dimensions:s.Utils.resizeVectorToFit(a,l),rotation:0,smoothDownscaling:e._options.smoothDownscaling});return e.sharedState.set({selectedSprite:c}),i.addSprite(c),e.addLocalHistorySnapshot("sticker-creation",!1),c})},e.prototype.loadStickerImage=function(t){var e=this;return new Promise(function(n,o){var i=t.images.mediaBase,r=a.StickerManager.getURLForSticker(t,"base"),s=e._getAssetPath(r),l=new window.Image,c=void 0,u=setTimeout(function(){c=a.ModalManager.instance.displayLoading(e._t("loading.loading"))},100);l.addEventListener("load",function(){c&&c.close(),u&&(clearTimeout(u),u=null),void 0!==i.width&&void 0!==i.height&&(l.width=i.width,l.height=i.height),n(l)}),l.addEventListener("error",function(){c&&c.close(),u&&(clearTimeout(u),u=null),a.ModalManager.instance.displayError(e._t("errors.title"),e._t("errors.stickerLoadingError.text",{path:l.src})),o(new Error("Loading sticker failed"))}),l.crossOrigin="Anonymous",l.src=s})},e.prototype._updateStickerCategories=function(t){var e=this._options,n=e.categories,o=e.replaceCategories,i=e.availableStickers;t||(t=n);var r=new a.StickerManager(this.context.ui,{categories:t,replaceCategories:o,availableStickers:i});this.sharedState.set({stickerManager:r})},e.prototype._onEnter=function(){var t=this.context.editor;this._updateStickerCategories(),this._mediator.on(a.Constants.EVENTS.ADDED_STICKER,this._updateStickerCategories),t.zoom.auto(),t.features.disable("zoom","drag")},e.prototype._onLeave=function(){var t=this.context.editor;this._mediator.off(a.Constants.EVENTS.ADDED_STICKER,this._updateStickerCategories),t.features.enable("zoom","drag"),t.render()},e.clickAtPosition=function(t,e){var n=e.operations.get("sprite");if(!n)return!1;var o=n.getSpritesAtPosition(t,e.getOutputTextureDimensions()).filter(function(t){return t instanceof h});return!!o[0]&&{selectedSprite:o[0]}},e.getPreloadAssets=function(t){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]},e.isEnabled=function(t){return t.isToolAllowed("sticker")&&t.isToolEnabled("sticker")},e}(a.BaseControls);f.identifier="sticker",f.controlsComponent=c.a,f.canvasControlsComponent=u.a,f.iconPath="editor/controls/sticker/icon.png",f.activeIconPath="editor/controls/sticker/icon-active.png",f.requiredOperations=["sprite"],f.defaultOptions={categories:[],replaceCategories:!1,availableStickers:null,snapRotation:90,snapRotationTolerance:5},f.updatableOperations=["sprite"],f.switchToDefaultControlsOnRemoval=!0,l.a.Controls.StickerControls=f,e.a=f},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=(n.n(a),n(197)),c=n(199),u=n(200),p=s.Math.Vector2,h={ROOT:1,CATEGORY:2,OPTIONS:3},f=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));a._bindAll("_onCategoryClick","_onStickerClick","_onBackClick","_onNewStickerClick","_onReplaceClick"),a._needsStyleFixes=!0;var l=h.ROOT;return a.sharedState.selectedSprite&&(l=h.OPTIONS),a.state.currentPanel=l,a}return r(e,t),e.prototype.fixStyles=function(){var e=this;return this._list.style.height="100%",t.prototype.fixStyles.call(this).then(function(){if(a.Utils.Browser.isIElte(10)){var t=e._container.offsetHeight;e._list.style.height=t+"px"}return e.refs.panel.fixStyles()})},e.prototype.componentDidUpdate=function(t,e){this.state.currentPanel!==e.currentPanel&&this.fixStyles()},e.prototype.sharedStateDidChange=function(t,e){t.stickerObject!==e.stickerObject&&e.selectedSprite&&e.stickerObject&&this.setState({currentPanel:h.OPTIONS})},e.prototype._onReplaceClick=function(){this.setState({currentPanel:h.ROOT})},e.prototype._onNewStickerClick=function(){this.state.currentPanel=h.ROOT,this.setSharedState({selectedSprite:null})},e.prototype._onCategoryClick=function(t){this.setState({currentPanel:h.CATEGORY,category:t})},e.prototype._onBackClick=function(){this.setState({currentPanel:h.ROOT})},e.prototype._onStickerClick=function(t){var e=this,n=this.sharedState.selectedSprite,o=function(){e.setState({currentPanel:h.OPTIONS})},i=this.context.editor;n?this.props.controls.loadStickerImage(t).then(function(r){var a=n.getDimensions().clone(),l=a.max(),c=new p(l,l),u=new p(r.width,r.height),h={image:r,identifier:t.identifier,dimensions:s.Utils.resizeVectorToFit(u,c)};"none"!==n.getTintMode()&&n.setTintMode(t.tintMode||"none"),e.sharedState.setStickerOptions(h),e.sharedState.setStickerImage(r),e.props.controls.addLocalHistorySnapshot("sticker-image",!0),i.render(),o()}):this.props.controls.createSticker(t).then(function(t){o()})},e.prototype._renderCurrentPanel=function(){var t=this,e=this.props.controls,n=this.sharedState.stickerManager;switch(this.state.currentPanel){case h.ROOT:return a.React.createElement(l.a,{innerRef:function(e){t._list=e},stickerManager:n,onCategoryClick:this._onCategoryClick,onStickerClick:this._onStickerClick,controls:e,ref:"panel"});case h.CATEGORY:return a.React.createElement(c.a,{innerRef:function(e){t._list=e},category:this.state.category,stickerManager:n,onBackClick:this._onBackClick,onStickerClick:this._onStickerClick,controls:e,ref:"panel"});case h.OPTIONS:return a.React.createElement(u.a,{innerRef:function(e){t._list=e},stickerManager:n,onReplaceClick:this._onReplaceClick,onNewStickerClick:this._onNewStickerClick,controls:e,ref:"panel"})}},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){return this._renderCurrentPanel()},e}(a.ControlsComponent);f.contextTypes=a.ControlsComponent.contextTypes,f.RootElement=a.ControlsComponent.RootElement,e.a=f},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(198)),l=n(56),c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a.state={category:"all"},a}return r(e,t),e.prototype._onCategoryClick=function(t,e){this.props.onCategoryClick&&this.props.onCategoryClick(t)},e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(s.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype._renderListItems=function(){var t=this;return this.props.stickerManager.getCategories().map(function(e){return s.React.createElement(a.a,{key:e.identifier,category:e,onClick:t._onCategoryClick.bind(t,e)})})},e.prototype.render=function(){var t=this,e=this.props,n=e.stickerManager,o=e.innerRef;return s.React.createElement(u,{innerRef:function(e){o&&o(e),t._wrapper=e},className:void 0},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement(p,null,this._renderListItems()),s.React.createElement(l.a,{stickers:n.getStickersForCategory("all"),onStickerClick:this.props.onStickerClick})))},e}(s.BaseComponent);c.contextTypes=s.BaseComponent.contextTypes,e.a=c;var u=s.adonis.div("rfecls","Wrapper"),p=s.adonis.ul("5jg0ou","CategoryList")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.ControlItem),l=s.ControlsStyles.ControlItemTitle,c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.render=function(){var t=this.props.category,e=this._getAssetPath(t.metaData.backgroundImage),n={backgroundImage:"url('"+e+"')"};return s.React.createElement(u,{onClick:this.props.onClick,style:n,className:void 0},s.React.createElement(h,null,this._t("editor.controls.sticker.stickerCategories."+t.identifier)||t.defaultName),s.React.createElement(p,null))},e}(s.BaseComponent);c.contextTypes=s.BaseComponent.contextTypes,e.a=c;var u=Object(s.adonis)(a).li("1dc04zg","StickerCategoryItem"),p=s.adonis.div("1fxaw8w","Gradient"),h=Object(s.adonis)(l).div("120drhm","Title")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(56)),l=s.ControlsStyles.ControlItemTextStyles,c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(s.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.render=function(){var t=this,e=this.props,n=e.stickerManager,o=e.category,i=e.onBackClick,r=e.onStickerClick,l=e.innerRef,c=this._getAssetPath(o.metaData.backgroundImage),g={backgroundImage:"url('"+c+"')",backgroundSize:"cover"},y={backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/back.png",!0)+"')"},v=n.getStickersForCategory(o.identifier);return s.React.createElement(u,{innerRef:function(t){return l&&l(t)},className:void 0},s.React.createElement(p,{style:g},s.React.createElement(h,null,s.React.createElement(d,null,this._t("editor.controls.sticker.stickerCategories."+o.identifier)||o.defaultName),o.metaData.author&&s.React.createElement(m,null,s.React.createElement("span",null,"by "),o.metaData.author),s.React.createElement(_,{style:y,onClick:i.bind(this),className:void 0}))),s.React.createElement(f,{innerRef:function(e){t._wrapper=e}},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement(a.a,{stickers:v,onStickerClick:r}))))},e}(s.BaseComponent);c.contextTypes=s.BaseComponent.contextTypes,e.a=c;var u=s.adonis.div("iauaz2","StickerCategoryPanel"),p=s.adonis.div("2j8ygm","Header"),h=s.adonis.div("3wd3qf","HeaderContent"),f=s.adonis.div("zb78lb","Content"),d=Object(s.adonis)(l).div("kswtk0","Title"),m=Object(s.adonis)(l).div("1qn5s6u","Subtitle"),_=s.adonis.button("1t2nim8","BackButton")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.PlainControlItemBackground),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange"),a}return r(e,t),e.prototype._getStickerObject=function(){return this.sharedState.stickerObject},e.prototype._onChangedOption=function(t,e){t&&this.props.controls.addLocalHistorySnapshot(t,e),this.context.editor.render()},e.prototype._onOpacityChange=function(t){this.sharedState.setAlpha(t),this._onChangedOption("sticker-opacity",!0)},e.prototype._onTintToggle=function(t){var e=this._getStickerObject();this.sharedState.setTintMode(t?e.tintMode:"none"),this._onChangedOption("sticker-tint-toggle",!0)},e.prototype._onTintColorChange=function(t){this.sharedState.setTintColor(t.clone()),this._onChangedOption("sticker-tint",!0)},e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(s.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.render=function(){var t=this,e=this.props,n=e.innerRef,o=e.onNewStickerClick,i=e.onReplaceClick,r=this.sharedState,a=r.alpha,l=r.tintMode,y=r.tintColor,v=r.selectedSprite;if(!v)return null;var b=this._getStickerObject(),w={background:"url('"+v.getImage().src+"') center center / contain no-repeat"},k=!!b.tintMode&&"none"!==b.tintMode;return s.React.createElement(c,{innerRef:function(e){n&&n(e),t._wrapper=e},className:void 0},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement("div",null,s.React.createElement(u,null,s.React.createElement(s.ButtonComponent,{title:this._t("editor.controls.sticker.new"),className:void 0,onClick:o}),s.React.createElement(p,null,s.React.createElement(h,null,s.React.createElement(f,{onClick:i,style:w})),s.React.createElement(d,null,s.React.createElement(m,null,this._t("editor.controls.sticker.stickers."+b.identifier)||b.defaultName),s.React.createElement(_,{onClick:i,className:void 0},this._t("editor.controls.sticker.replace")))),s.React.createElement(s.SliderControlComponent,{minValue:0,value:Math.round(a),maxValue:100,label:this._t("editor.controls.sticker.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0})),k&&s.React.createElement(s.CollapseSectionComponent,{toggleable:!0,title:this._t("editor.controls.sticker.fill"),expanded:"none"!==l,className:void 0,onToggle:this._onTintToggle},s.React.createElement(g,{value:y,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))},e}(s.SharedStateComponent);l.contextTypes=s.SharedStateComponent.contextTypes,e.a=l;var c=s.adonis.div("rfecls","Wrapper"),u=s.adonis.div("1vnvjau","TopSection"),p=s.adonis.div("aqfteq","Details"),h=Object(s.adonis)(a).div("6u8g0p","Thumbnail"),f=s.adonis.div("7r0ke8","ThumbnailImage"),d=s.adonis.div("1trlo6v","DetailsContainer"),m=s.adonis.div("w9mc0y","Title"),_=s.adonis.div("1rhky7p","ReplaceButton"),g=Object(s.adonis)(s.ColorSelectionComponent)("1ouwzwk","ColorSelection")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(26)),l=s.Operations.SpriteOperation,c=void 0;l&&(c=s.Operations.SpriteOperation.StickerSprite);var u=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._renderSpriteItems=function(e){return t.prototype._renderSpriteItems.call(this,e.filter(function(t){return t instanceof c}))},e.prototype._selectNextSprite=function(){for(var t=this.getSharedState("operation"),e=t.getSprites().slice(0).reverse(),n=void 0,o=void 0,i=0;i<e.length;i++)if((n=e[i])instanceof c){o=n;break}o||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:o})},e.prototype._createSprite=function(t){return this.getSharedState("operation").createSticker(t)},e}(a.a);u.contextTypes=a.a.contextTypes,e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=n.n(a),c=n(203),u=n(207),p=s.Math.Vector2,h=void 0,f=void 0;s.Operations.SpriteOperation&&(h=s.Operations.SpriteOperation.TextSprite,f=s.Operations.SpriteOperation.BrushSprite);var d=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.mapOperationsToSharedState=function(t){var e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=t.getOrCreate("sprite"),o=n.getInputDimensions(),i=e.selectedSprite;if(i&&n.getSprites().indexOf(i)<0){var r=n.getSprites().filter(function(t){return t.getId()===i.getId()})[0];r&&(i=r)}return{operation:n,selectedSprite:i,inputDimensions:o,color:i?i.getColor().clone():null,backgroundColor:i?i.getBackgroundColor().clone():null,alignment:i?i.getAlignment():null,lineHeight:i?i.getLineHeight():0,fontFamily:i?i.getFontFamily():null,setFontSize:function(t){i&&i.setFontSize(t/o.min())},setColor:function(t){i&&i.setColor(t.clone())},setBackgroundColor:function(t){i&&i.setBackgroundColor(t.clone())},setCharacterSpacing:function(t){i&&i.setCharacterSpacing(t)},setLineHeight:function(t){i&&i.setLineHeight(t)},setAlignment:function(t){i&&i.setAlignment(t)},setTextOptions:function(t){i&&i.set(t)},setVariation:function(t){i&&i.set({fontIdentifier:t.getIdentifier(),fontFamily:t.getFontFamily(),fontWeight:t.getFontWeight(),fontStyle:t.getFontStyle(),textMetrics:t.getTextMetrics()})}}},e.prototype.createText=function(){var t=this.context.editor,e=this.sharedState.get("operation"),n=this.sharedState.get("fontManager"),o=n.getDefaultVariation(),i=t.getOutputDimensions(),r=t.getSDK(),a=r.getRenderer(),l=a.getMaxTextureSize(),c=e.createText({text:this.context.ui.translate("editor.controls.text.defaultText"),position:new p(.5,.5),maxWidth:.5,maxHeight:l?l/i.y:3,textMetrics:o.getTextMetrics(),fontIdentifier:o.getIdentifier(),fontSize:.08,fontFamily:o.getFontFamily(),fontWeight:o.getFontWeight(),fontStyle:o.getFontStyle(),color:s.Color.WHITE,alignment:"center"});return this.sharedState.set({selectedSprite:c}),e.addSprite(c),this.addLocalHistorySnapshot(),c},e.prototype._onEnter=function(){var t=this.context.editor,e=this._options,n=e.fonts,o=e.replaceFonts,i=e.availableVariations,r=new a.FontManager(this.context.ui,{fonts:n,replaceFonts:o,availableVariations:i});this.sharedState.set({fontManager:r}),t.features.disable("zoom","drag"),t.zoom.auto(),this.sharedState.get("selectedSprite")||this.createText(),t.render()},e.prototype._onLeave=function(){var t=this.context.editor;t.features.enable("zoom","drag"),t.render()},e.clickAtPosition=function(t,e){if(!e.operations.exists("sprite"))return!1;var n=e.operations.getOrCreate("sprite"),o=n.getSpritesAtPosition(t,e.getOutputTextureDimensions()).filter(function(t){return!(t instanceof f)});return!!(o.length&&o[0]instanceof h)&&{selectedSprite:o[0]}},e.getPreloadAssets=function(t){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]},e.isEnabled=function(t){return t.isToolAllowed("text")&&t.isToolEnabled("text")},e}(a.BaseControls);d.identifier="text",d.controlsComponent=c.a,d.canvasControlsComponent=u.a,d.iconPath="editor/controls/text/icon.png",d.activeIconPath="editor/controls/text/icon-active.png",d.requiredOperations=["sprite"],d.defaultOptions={fonts:[],replaceFonts:!1,availableVariations:null,snapRotation:90,snapRotationTolerance:5},d.updatableOperations=["sprite"],d.switchToDefaultControlsOnRemoval=!0,l.a.Controls.TextControls=d,e.a=d},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),l=(n.n(a),n(204)),c=n(205),u=(n(206),a.GroupedControlsStyles.ControlGroupList),p=function(t){function e(){i(this,e);for(var n=arguments.length,s=Array(n),l=0;l<n;l++)s[l]=arguments[l];var c=r(this,t.call.apply(t,[this].concat(s)));return c._bindAll("_onNewTextClick","_onFontChanged","_onFontSizeChanged","_onCharacterSpacingChanged","_onLineSpacingChanged","_onColorChanged","_onBackgroundColorChanged","_onAlignmentChanged","_onVariationChanged","_onTextScaled"),c._events=o({},a.Constants.EVENTS.TEXT_SCALED,c._onTextScaled),c._unavailableFontFamilies=[],c}return s(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._loadFonts()},e.prototype._loadFonts=function(){var t=this,e=this.sharedState.fontManager,n=this.context.ui.getFontLoader();n.setFonts(e.getFonts());var o=void 0,i=window.setTimeout(function(){o=a.ModalManager.instance.displayLoading(t._t("loading.fonts"),!0)},200),r=this.sharedState.selectedSprite;return n.load().then(function(){window.clearTimeout(i),o&&o.close(),r.emit("update"),t.context.editor.render()}).catch(function(e){window.clearTimeout(i),o&&o.close(),e.forEach(function(e){t._unavailableFontFamilies.push(e.font.getFontFamily())});var n=t._unavailableFontFamilies.join(", ");r.emit("update"),t.context.editor.render(),t.forceUpdate(),a.ModalManager.instance.displayError(t._t("errors.fontLoadingError.title"),t._t("errors.fontLoadingError.text",{fonts:n}))})},e.prototype._onChangedOption=function(t,e){t&&this.props.controls.addLocalHistorySnapshot(t,e),this.context.editor.render()},e.prototype._onNewTextClick=function(){this.props.controls.createText()},e.prototype._onAlignmentChanged=function(t){this.sharedState.setAlignment(t),this._onChangedOption("text-alignment",!0)},e.prototype._onVariationChanged=function(t){this.sharedState.setVariation(t),this._onChangedOption("font-family",!0)},e.prototype._onFontChanged=function(t){var e=t.getVariations()[0];this._onVariationChanged(e)},e.prototype._onFontSizeChanged=function(t){this.sharedState.setFontSize(t),this._onChangedOption("font-size",!1)},e.prototype._onColorChanged=function(t){this.sharedState.setColor(t),this._onChangedOption("color",!0)},e.prototype._onBackgroundColorChanged=function(t){this.sharedState.setBackgroundColor(t),this._onChangedOption("background-color",!0)},e.prototype._onCharacterSpacingChanged=function(t){this.sharedState.setCharacterSpacing(t),this._onChangedOption()},e.prototype._onLineSpacingChanged=function(t){this.sharedState.setLineHeight(t),this._onChangedOption("line-spacing",!0)},e.prototype._onTextScaled=function(){this.forceUpdate()},e.prototype._renderFontFamilyAndSizeComponent=function(){var t=this,e=this.sharedState,n=e.selectedSprite,o=e.inputDimensions,i=e.fontManager,r=a.Utils.toFixed(n.getFontSize()*o.min(),1),s=Math.round(o.y),c=i.getFonts().filter(function(e){return t._unavailableFontFamilies.indexOf(e.getFontFamily())<0});return a.React.createElement(l.a,{onValueChange:this._onFontSizeChanged,onFontChange:this._onFontChanged,fonts:c,dropdownValue:n.getFontFamily(),label:this._t("editor.controls.text.font"),inputLabel:this._t("editor.controls.text.size"),className:void 0,value:r,minValue:10,maxValue:s})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this,e=this.sharedState,n=e.selectedSprite,o=e.fontManager;if(!n)return null;var i=o.getFontByFontFamily(n.getFontFamily()),r=o.getVariationByIdentifier(n.getFontIdentifier()),s=this.sharedState,l=s.color,u=s.backgroundColor,p=s.alignment,m=s.lineHeight;return a.React.createElement(a.ScrollableListComponent,{direction:"vertical",innerListRef:function(e){t._list=e},innerRef:function(e){t._scrollbar=e}},a.React.createElement(h,{className:void 0},a.React.createElement(a.ButtonComponent,{title:this._t("editor.controls.text.new"),onClick:this._onNewTextClick,className:void 0}),a.React.createElement(d,null,this._renderFontFamilyAndSizeComponent(),a.React.createElement(c.a,{alignment:p,variations:i.getVariations(),selectedVariation:r,onAlignmentChange:this._onAlignmentChanged,onVariationChange:this._onVariationChanged})),a.React.createElement(a.ColorSelectionComponent,{value:l,onColorPickerToggle:this.fixStyles,onChange:this._onColorChanged})),a.React.createElement(f,null,a.React.createElement(a.CollapseSectionComponent,{key:"background",title:this._t("editor.controls.text.background"),alwaysExpanded:!0,className:void 0},a.React.createElement(a.ColorSelectionComponent,{value:u,onColorPickerToggle:this.fixStyles,onChange:this._onBackgroundColorChanged})),a.React.createElement(a.CollapseSectionComponent,{key:"spacing",title:this._t("editor.controls.text.spacing"),alwaysExpanded:!0},a.React.createElement(a.SliderControlComponent,{label:this._t("editor.controls.text.line"),minValue:.5,maxValue:3,className:void 0,value:a.Utils.toFixed(m,1),onSliderValueChange:this._onLineSpacingChanged,onValueChange:this._onLineSpacingChanged}))))},e}(a.ControlsComponent);p.contextTypes=a.ControlsComponent.contextTypes,p.RootElement=a.ControlsComponent.RootElement,e.a=p;var h=a.adonis.div("1vnvjau","TopSection"),f=Object(a.adonis)(u).ul("mgrj1m","SectionList"),d=a.adonis.div("tymb4t","Details")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._updateFontsMap(),a}return r(e,t),e.prototype.componentWillReceiveProps=function(e){t.prototype.componentWillReceiveProps.call(this,e),e.fonts!==this.props.fonts&&this._updateFontsMap()},e.prototype._updateFontsMap=function(){var t=this;this._fontsMap={},this.props.fonts.forEach(function(e){t._fontsMap[e.getFontFamily()]=e})},e.prototype._renderLeftPart=function(){var t=this.sharedState.fontFamily,e=this._fontsMap[t];return s.React.createElement("div",{ref:"root",className:void 0},s.React.createElement(s.DropdownComponent,{value:e,style:{fontFamily:t},className:void 0,onChange:this.props.onFontChange},this.props.fonts.map(function(t){return s.React.createElement(s.DropdownComponent.Item,{value:t,key:t.getFontFamily(),style:{fontFamily:t.getFontFamily()}},t.getFontFamily())})))},e}(s.ValueSelectionComponent));a.contextTypes=s.ValueSelectionComponent.contextTypes,e.a=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._onAlignmentItemClick=function(t){this.props.onAlignmentChange&&this.props.onAlignmentChange(t.title)},e.prototype._onStyleItemClick=function(t){switch(t.title){case"bold":this.props.onStyleChange&&this.props.onStyleChange("fontWeight",this.props.bold?"normal":"bold");break;case"italic":this.props.onStyleChange&&this.props.onStyleChange("fontStyle",this.props.italic?"normal":"italic")}},e.prototype._renderAligmentItems=function(){var t=this,e=this.props.alignment;return[{title:"left",selected:"left"===e,iconPath:"editor/controls/text/align-left.png",selectedIconPath:"editor/controls/text/align-left-selected.png"},{title:"center",selected:"center"===e,iconPath:"editor/controls/text/align-center.png",selectedIconPath:"editor/controls/text/align-center-selected.png"},{title:"right",selected:"right"===e,iconPath:"editor/controls/text/align-right.png",selectedIconPath:"editor/controls/text/align-right-selected.png"}].map(function(e){var n=t._getAssetPath(e.iconPath,!0),o=t._getAssetPath(e.selectedIconPath,!0);return s.React.createElement(u,{key:e.title,className:void 0,"data-alignment":e.title,"data-selected":e.selected,onClick:t._onAlignmentItemClick.bind(t,e)},s.React.createElement(p,{visible:!0,src:n}),s.React.createElement(p,{visible:e.selected,src:o}))},this)},e.prototype._renderStylesDropdown=function(){var t=this.props,e=t.variations,n=t.selectedVariation;return s.React.createElement(s.DropdownComponent,{value:n,onChange:this.props.onVariationChange,className:void 0,enableMenu:e.length>1},e.map(function(t){return s.React.createElement(s.DropdownComponent.Item,{value:t,key:t.getIdentifier(),style:{fontFamily:t.getFontFamily(),fontStyle:t.getFontStyle(),fontWeight:t.getFontWeight()}},t.getLabel())}))},e.prototype.render=function(){return s.React.createElement(l,{className:void 0},s.React.createElement(c,null,this._renderStylesDropdown()),s.React.createElement(c,{right:!0},this._renderAligmentItems()))},e}(s.BaseComponent));a.contextTypes=s.BaseComponent.contextTypes,e.a=a;var l=s.adonis.div("1hzgwcr","TextControlsStyling"),c=s.adonis.div("64aub5",{right:"9ygmmm"},"Group"),u=s.adonis.div("tgbgl1",{selected:"zgbg08"},"ItemContainer"),p=s.adonis.img("7ni881",{visible:"zgbg08"},"ItemImage")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.ControlItem),l=s.ControlsStyles.ControlItemTitle,c=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onClick","_onMouseEnter","_onMouseLeave","_onIntensityChanged"),a.state={selected:!1,hovering:!1,intensity:50},a}return r(e,t),e.prototype._onClick=function(){this.setState({selected:!0})},e.prototype._onMouseEnter=function(){this.setState({hovering:!0})},e.prototype._onMouseLeave=function(){this.setState({hovering:!1})},e.prototype._onIntensityChanged=function(t){this.setState({intensity:t})},e.prototype.render=function(){var t=this.state,e=t.selected,n=t.hovering,o=t.intensity;return s.React.createElement(u,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick,selected:e},!(e&&n)&&s.React.createElement(p,{selected:e},this.props.title),e&&n&&s.React.createElement(h,null,s.React.createElement(s.SliderComponent,{minValue:0,maxValue:100,valueUnit:"",middleDot:!1,value:o,onChange:this._onIntensityChanged})))},e}(s.BaseComponent);c.contextTypes=s.BaseComponent.contextTypes;var u=Object(s.adonis)(a).div("nasu8t",{selected:"120drhm"},"LegibilityPresetItem"),p=Object(s.adonis)(l).div("1hd9n2f",{selected:"186qcx6"},"Title"),h=s.adonis.div("8ekz81","Slider")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(26)),l=void 0;s.Operations.SpriteOperation&&(l=s.Operations.SpriteOperation.TextSprite);var c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._selectNextSprite=function(){for(var t=this.getSharedState("operation"),e=t.getSprites().slice(0).reverse(),n=void 0,o=void 0,i=0;i<e.length;i++)if((n=e[i])instanceof l){o=n;break}o||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:o})},e.prototype._createSprite=function(t){return this.getSharedState("operation").createText(t)},e}(a.a);c.contextTypes=a.a.contextTypes,e.a=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=n.n(a),c=n(209),u=n(211),p=s.Math.Vector2,h=new p(50,50),f=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.mapOperationsToSharedState=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{transformOperation:t.get("transform"),orientationOperation:t.get("orientation")}},e.prototype.convertOperationOptionsToUI=function(t){var e=t.start,n=t.end,o=t.rotation,i=t.textureScale,r=this.sharedState.get("transformOperation"),s=r.calculateScale(o),a=r.getInputDimensions(!1),l=Math.cos(o),c=Math.sin(o),u=n.clone().subtract(e).divide(2),h=e.clone().add(u).multiply(a),f=h.subtract(a.clone().multiply(.5)),d=new p(f.x*l-f.y*c,f.x*c+f.y*l).multiply(s),m=a.clone().multiply(.5).add(d),_=m.clone().divide(a);return{start:_.clone().subtract(u.clone().multiply(s)),end:_.clone().add(u.clone().multiply(s)),rotation:o,textureScale:i}},e.prototype._onEnter=function(){var t=this.context.editor,e=t.operations.exists("transform"),n=t.operations.getOrCreate("transform");n.setEnabled(!1,!1);var o=t.operations.exists("orientation"),i=t.operations.getOrCreate("orientation"),r={end:new p(1,1),rotation:0,start:new p(0,0),textureScale:1},a=n.getInputDimensions(!1),l=n.getNewDimensions(a),c=r,u=c,h=u.start,f=u.end,d=u.textureScale,m=u.rotation;if(e){c=n.serializeOptions(),h=c.start,f=c.end,m=c.rotation,d=c.textureScale,delete c.enabled;var _=this.convertOperationOptionsToUI({start:h,end:f,textureScale:d,rotation:m});h=_.start,f=_.end}t.broadcastTransform(n,r);var g=i.serializeOptions();t.setSpriteScale(n.calculateScale()),t.setRotation(m),n.set(r,e);var y=t.features.isEnabledByOptions("export");t.zoom.auto(!0,!1,function(){t.features.disable("zoom","drag","export")},!1),this.sharedState.set({transformOperation:n,initialTransformOptions:c,newTransformOptions:{start:h,end:f,rotation:m,textureScale:d},transformOperationExistedBeforeEntering:e,exportEnabled:y,orientationOperation:i,initialOrientationOptions:g,newOrientationOptions:s.Utils.cloneOptions(g),orientationOperationExistedBeforeEntering:o,start:p.fromObject(h),end:p.fromObject(f),rotation:m,orientationRotation:i.getRotation(),flipVertically:i.getFlipVertically(),flipHorizontally:i.getFlipHorizontally(),initialDimensions:l,initialRatio:n._ratio||null})},e.prototype._onBeforeLeave=function(){var t=this,e=this.context.ui.translate.bind(this.context.ui);return new Promise(function(n,o){var i=t.sharedState.get("changesDone"),r=t.sharedState.get("changesAccepted");if(i&&!r){return void a.ModalManager.instance.displayWarning(e("warnings.discardChanges.title"),e("warnings.discardChanges.text"),[e("warnings.discardChanges.buttons.cancel"),e("warnings.discardChanges.buttons.discard")]).on("button",function(t){return 0===t?n({leave:!1}):1===t?n({leave:!0,data:{discard:!0}}):void 0})}n({leave:!0})})},e.prototype._onLeave=function(t){var e=t.discard,n=this.context.editor,o=this.sharedState.get("transformOperation"),i=this.sharedState.get("orientationOperation"),r=this.sharedState.get("transformOperationExistedBeforeEntering");if(e){var s=this.sharedState.get("initialOrientationOptions");i.set(s);var a=this.sharedState.get("initialTransformOptions");n.broadcastTransform(o,a),o.set(a),o.setTextureScale(this._calculateTextureScale()),o.setEnabled(!0),r||n.operations.remove(o,!1)}else{var l={rotation:0,flipVertically:!1,flipHorizontally:!1};i.optionsEqual(l)&&n.operations.remove(i,!1);var c=this.sharedState.get("newTransformOptions"),u=c.start,h=c.end,f=c.textureScale,d=c.rotation;f=this._calculateTextureScale(),u=u.clone(),h=h.clone();var m=o.calculateScale(d),_=o.getInputDimensions(!1),g=Math.cos(-d),y=Math.sin(-d),v=h.clone().subtract(u).divide(2),b=u.clone().add(v).multiply(_),w=b.subtract(_.clone().multiply(.5)),k=new p(w.x*g-w.y*y,w.x*y+w.y*g).divide(m),C=_.clone().multiply(.5).add(k),S=C.clone().divide(_),O=S.clone().subtract(v.clone().divide(m)),E=S.clone().add(v.clone().divide(m)),T={start:new p(0,0),end:new p(1,1),rotation:0,textureScale:1},x={start:O,end:E,textureScale:f,rotation:d};x.start.equals(T.start)&&x.end.equals(T.end)&&x.rotation===T.rotation&&x.textureScale===T.textureScale?n.operations.remove(o,!1):(o.set(T),n.broadcastTransform(o,x),o.set(x),o.setTextureScale(this._calculateTextureScale()),o.setEnabled(!0))}n.setRotation(0),n.setSpriteScale(1),n.features.enable("zoom","drag","export"),this.sharedState.get("exportEnabled")&&n.features.enable("export"),n.zoom.auto(!0)},e.prototype._getGlobalHistoryData=function(){return{ratio:this.sharedState.get("ratio")}},e.prototype._onOperationRemoved=function(t){},e.prototype._calculateTextureScale=function(){var t=this.sharedState.get("transformOperation"),e=this.sharedState.get("ratio");if(!e||!e.dimensions)return 1;var n=this.sharedState.get("start"),o=this.sharedState.get("end"),i=o.clone().subtract(n),r=t.getInputDimensions(!1).multiply(i);return e.dimensions.x/r.x},e.prototype.fixTransform=function(t,e,n,o){var i=this.context.editor,r=this.sharedState.get("transformOperation"),s=r.getInputDimensions(!1),l=this.sharedState.get("ratio"),c=l.ratio,u=l.dimensions;u&&!c&&(c=u.x/u.y);var f=void 0;"*"!==c&&(f=a.Utils.findIntegerFraction(c));var d=new p;d.x="left"===n?e.x:1-t.x,d.y="top"===o?e.y:1-t.y;var m=s.clone().multiply(d),_=e.clone().subtract(t),g=_.clone().multiply(s),y=h.clone().divide(i.zoom.targetLevel),v=new p(Math.min(y.x,.1*s.x),Math.min(y.y,.1*s.y));if("*"!==c&&v.divide(f).round().multiply(f),g.x=Math.min(Math.max(v.x,g.x),m.x),"*"!==c){var b=Math.floor(s.x/f.x);g.x=Math.max(1,Math.min(b,Math.round(g.x/f.x)))*f.x,g.y=g.x/c}g.y=Math.min(Math.max(v.y,g.y),m.y),"*"!==c&&(g.x=g.y*c);var w=g.divide(s);return"top"===o?t.y=e.y-w.y:e.y=t.y+w.y,"left"===n?t.x=e.x-w.x:e.x=t.x+w.x,"*"===c&&(t.multiply(s).round().divide(s),e.multiply(s).round().divide(s)),{start:t,end:e}},e.getPreloadAssets=function(t){var e=t.getOptions(),n=s.Utils.defaults(e.editor.controlsOptions.transform,this.defaultOptions),o=["editor/controls/transform/dimensions-cross.png","editor/controls/transform/degree-slider.png","editor/controls/transform/flip.png","editor/controls/transform/lock.png","editor/controls/transform/rotate.png"];return new a.TransformRatioManager(n).getCategories().forEach(function(t){t.ratios.forEach(function(t){var e=t.identifier;o.push("editor/controls/transform/ratios/"+e+"-default.png","editor/controls/transform/ratios/"+e+"-hover.png","editor/controls/transform/ratios/"+e+"-active.png")})}),o},e.isEnabled=function(t){return t.isToolAllowed("transform")&&t.isToolEnabled("transform")},e}(a.BaseControls);f.clickAtPosition=a.BaseControls.clickAtPosition,f.identifier="transform",f.controlsComponent=u.a,f.canvasControlsComponent=c.a,f.iconPath="editor/controls/transform/icon.png",f.activeIconPath="editor/controls/transform/icon-active.png",f.requiredOperations=["transform","orientation"],f.defaultOptions={categories:[],replaceCategories:!1,availableRatios:null,enableRotation:!0,enableStraighten:!0,enableFlip:!0},f.updatableOperations=["transform","orientation"],f.switchToDefaultControlsOnRemoval=!1,l.a.Controls.TransformControls=f,e.a=f},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),n(3)),u=n(210),p=a.Math.Vector2,h=function(t){function e(){var n;i(this,e);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];var p=r(this,t.call.apply(t,[this].concat(c)));return p._bindAll("_onZoomDone","_onCornerDrag","_onCenterDragStart","_onCenterDrag","_onRotationChange","_onOperationUpdated","_onOperationRemoved","_onAcceptClick","_onAcceptMouseDown"),p._events=(n={},o(n,l.Constants.EVENTS.OPERATION_UPDATED,p._onOperationUpdated),o(n,l.Constants.EVENTS.OPERATION_REMOVED,p._onOperationRemoved),o(n,l.Constants.EVENTS.ZOOM_DONE,p._onZoomDone),n),p.state=a.Utils.extend(p.state,{visible:!1}),p}return s(e,t),e.prototype.shouldSharedComponentUpdate=function(t,e){return!t.start.equals(e.start)||!t.end.equals(e.end)||t.orientationRotation!==e.orientationRotation||t.ratio!==e.ratio||t.changesDone!==e.changesDone},e.prototype.sharedStateDidChange=function(t,e){(t.ratio&&t.ratio.ratio)!==(e.ratio&&e.ratio.ratio)&&this._calculateRatioFraction()},e.prototype.sharedComponentWillUpdate=function(t,e){t.orientationRotation!==e.orientationRotation&&this._updateTransformAreaStyles()},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._updateTransformAreaStyles(),this._calculateRatioFraction(),this.forceUpdate()},e.prototype.componentWillUpdate=function(){this._updateTransformAreaStyles()},e.prototype.componentDidUpdate=function(){!this._transformContainerRect&&this.getSharedState("ratio")&&(this._updateTransformAreaStyles(),this.forceUpdate())},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._zoomAFRequest&&(Object(c.a)(this._zoomAFRequest),this._zoomAFRequest=null)},e.prototype._calculateRatioFraction=function(){var t=this.getSharedState("ratio");t&&"*"!==t.ratio&&(this._ratioFraction=l.Utils.findIntegerFraction(t.ratio))},e.prototype._onCenterDragStart=function(t){var e=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),areaDimensions:this._transformContainerRect.getSize(),imageDimensions:e.getInputDimensions(!1)}},e.prototype._onCenterDrag=function(t){var e=this._dragOptions,n=e.initialStart,o=e.initialEnd,i=e.areaDimensions,r=e.imageDimensions,s=t.clone().divide(i),a=o.clone().subtract(n),l=new p(0,0),c=new p(1,1).subtract(a),u=n.clone().add(s).clamp(l,c),h=u.clone().add(a);u.multiply(r).floor().divide(r),h.multiply(r).floor().divide(r),this.props.controls.fixTransform(u,h,"right","bottom");var f=this.getSharedState("newTransformOptions");f.start=u,f.end=h,this.setSharedState({start:u,end:h,changesDone:this.getSharedState("changesDone")||!(n.equals(u)&&o.equals(h))})},e.prototype._onCornerDragStart=function(t,e,n){var o=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),verticalSide:t,horizontalSide:e,areaDimensions:this._transformContainerRect.getSize(),imageDimensions:o.getInputDimensions(!1)},this._currentCorner={vertical:t,horizontal:e}},e.prototype._onCornerDrag=function(t){var e=this._dragOptions,n=e.initialStart,o=e.initialEnd,i=e.verticalSide,r=e.horizontalSide,s=e.areaDimensions,a=t.clone().divide(s),c=n.clone(),u=o.clone();("top"===i?c:u).y+=a.y,("left"===r?c:u).x+=a.x,this.props.controls.fixTransform(c,u,r,i);var p=this.getSharedState("newTransformOptions");p.start=c,p.end=u,this.setSharedState({start:c,end:u,changesDone:!0}),this._emitEvent(l.Constants.EVENTS.TRANSFORM_RESIZE)},e.prototype._onRotationChange=function(t){var e=this.getSharedState("transformOperation"),n=this.context.editor;n.setRotation(t),n.setSpriteScale(e.calculateScale(t)),this.getSharedState("newTransformOptions").rotation=t,n.render(),this.setSharedState({rotation:t,changesDone:!0})},e.prototype._onAcceptClick=function(t){t.preventDefault(),t.stopPropagation(),this.getSharedState("changesDone")&&(this.setSharedState({changesAccepted:!0}),this.context.screen.switchToControls("default"))},e.prototype._onAcceptMouseDown=function(t){t.stopPropagation()},e.prototype._onZoomDone=function(){var t=this;this._zoomAFRequest=Object(c.b)(function(){t._updateTransformAreaStyles(),t.state.visible=!0,t.forceUpdate(),t._zoomAFRequest=null})},e.prototype._onOperationUpdated=function(t){if(t===this.getSharedState("transformOperation")){var e=this.context.editor,n=e.getSDK();n.setRotation(t.getRotation()),n.setSpriteScale(t.calculateScale()),e.render(),this.setSharedState({rotation:t.getRotation()}),this.forceUpdate()}},e.prototype._onOperationRemoved=function(t){"transform"!==t.constructor.identifier&&"orientation"!==t.constructor.identifier||this.forceUpdate()},e.prototype._onFlipClick=function(t){var e=this.context.editor,n=this.getSharedState("orientationOperation"),i=t.charAt(0).toUpperCase()+t.slice(1)+"ly",r=!this.getSharedState("flip"+i);this.setSharedState(o({},"flip"+i,r)),n.flip(t);var s=this.getSharedState("newTransformOptions"),a=-1*this.getSharedState("rotation");e.setRotation(a);var l=this.getSharedState("start").clone(),c=this.getSharedState("end").clone(),u=l.clone();"horizontal"===t?(l.set(1-c.x,l.y),c.set(1-u.x,c.y)):"vertical"===t&&(l.set(l.x,1-c.y),c.set(c.x,1-u.y)),s.start=l,s.end=c,s.rotation=a,this.setSharedState({start:l,end:c,rotation:a,changesDone:!0,newTransformOptions:s}),this.forceUpdate(),e.broadcastFlip(t),e.render()},e.prototype._onRotateClick=function(t){var e=this,n="cw"===t?90:-90,o=this.context.editor,i=this.getSharedState("orientationOperation"),r=(i.getRotation()+n)%360;i.set({rotation:r});var s={orientationRotation:r},a=this.getSharedState("newTransformOptions"),c=this.getSharedState("ratio");if(c)if(c.dimensions||"*"!==c.ratio)this._emitEvent(l.Constants.EVENTS.TRANSFORM_REAPPLY_RATIO),this._emitEvent(l.Constants.EVENTS.TRANSFORM_RESIZE);else{var u=this.getSharedState("start").clone(),p=this.getSharedState("end").clone(),h=u.clone();"cw"===t?(u.set(1-p.y,h.x),p.set(1-h.y,p.x)):"ccw"===t&&(u.set(h.y,1-p.x),p.set(p.y,1-h.x)),s.start=u,s.end=p,a.start=u,a.end=p}this.setSharedState({changesDone:!0,newTransformOptions:a}),o.broadcastRotate(n),o.zoom.auto(!0,!0,function(){e.setSharedState(s)})},e.prototype._updateTransformAreaStyles=function(){this._transformContainerRect=this.getImageBoundingRect(),this._imageContainer&&l.Utils.styleElement(this._imageContainer,{left:this._transformContainerRect.x+"px",top:this._transformContainerRect.y+"px",width:this._transformContainerRect.width+"px",height:this._transformContainerRect.height+"px"})},e.prototype._getAreaStyles=function(){var t=void 0,e=void 0,n=void 0,o=void 0,i=void 0;this._transformContainer?(t=this._transformContainerRect.getSize(),i=this._transformContainerRect.getPosition(),e=this.getSharedState("start").clone().multiply(t),n=this.getSharedState("end").clone().multiply(t),o=n.clone().subtract(e)):(t=new p(0,0),e=new p(0,0),o=new p(0,0),i=new p(0,0));var r=this._getDimensionsStyles(o.x,o.y);return{topLeft:this._getDimensionsStyles(e.x+i.x,e.y+i.y),topCenter:this._getDimensionsStyles(o.x,e.y+i.y),centerLeft:this._getDimensionsStyles(e.x+i.x,o.y),center:{width:r.width},innerTransformContainer:r}},e.prototype._getDimensionsStyles=function(t,e){return{width:Math.max(1,t),height:Math.max(1,e)}},e.prototype._renderOnCanvasControls=function(){var t=this,e=this._getAreaStyles(),n=!this.getSharedState("ratio"),o={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/accept.png",!0)+"')"};return l.React.createElement(d,{innerRef:function(e){t._container=e}},l.React.createElement(y,{className:"js-imageContainer",innerRef:function(e){t._imageContainer=e}},l.React.createElement(P,{className:void 0,enabled:this.getSharedState("changesDone"),onClick:this._onAcceptClick,onMouseDown:this._onAcceptMouseDown,style:o})),l.React.createElement(v,{visible:this.state.visible,innerRef:function(e){t._transformContainer=e}},l.React.createElement(w,null,l.React.createElement(O,{style:e.topLeft}),l.React.createElement(O,{style:e.topCenter}),l.React.createElement(O,null)),l.React.createElement(w,null,l.React.createElement(O,{style:e.centerLeft}),l.React.createElement(l.DraggableComponent,{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag,disabled:n},l.React.createElement(S,{style:e.center,className:void 0,undraggable:n},!n&&[l.React.createElement(l.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"top","left"),onDrag:this._onCornerDrag,key:"topLeft"},l.React.createElement(E,{top:!0,left:!0,className:void 0})),l.React.createElement(l.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"top","right"),onDrag:this._onCornerDrag,key:"topRight"},l.React.createElement(E,{top:!0,right:!0,className:void 0})),l.React.createElement(l.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"bottom","left"),onDrag:this._onCornerDrag,key:"bottomLeft"},l.React.createElement(E,{bottom:!0,left:!0,className:void 0})),l.React.createElement(l.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"bottom","right"),onDrag:this._onCornerDrag,key:"bottomRight"},l.React.createElement(E,{bottom:!0,right:!0,className:void 0})),l.React.createElement(b,{style:e.innerTransformContainer,className:void 0,key:"inner"},l.React.createElement(w,null,l.React.createElement(C,{right:!0,bottom:!0}),l.React.createElement(C,{right:!0,bottom:!0}),l.React.createElement(C,{bottom:!0})),l.React.createElement(w,null,l.React.createElement(C,{right:!0,bottom:!0}),l.React.createElement(C,{right:!0,bottom:!0}),l.React.createElement(C,{bottom:!0})),l.React.createElement(w,null,l.React.createElement(C,{right:!0}),l.React.createElement(C,{right:!0}),l.React.createElement(C,null)))])),l.React.createElement(O,null)),l.React.createElement(w,null,l.React.createElement(O,null),l.React.createElement(O,null),l.React.createElement(O,null))))},e.prototype._renderControls=function(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/flip.png",!0)+"')"},e={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/rotate.png",!0)+"')"},n=this.props.options,o=n.enableRotation,i=n.enableFlip,r=n.enableStraighten;return l.React.createElement(f,{className:void 0},this._renderOnCanvasControls(),l.React.createElement(m,null,l.React.createElement(_,{className:void 0},i&&[l.React.createElement(x,{style:t,key:"flip-h",onClick:this._onFlipClick.bind(this,"horizontal"),className:void 0}),l.React.createElement(x,{vertical:!0,style:t,key:"flip-v",onClick:this._onFlipClick.bind(this,"vertical"),className:void 0})],r&&l.React.createElement(u.a,{value:this.getSharedState("rotation"),onChange:this._onRotationChange}),o&&[l.React.createElement(R,{style:e,key:"rotate-ccw",onClick:this._onRotateClick.bind(this,"ccw"),className:void 0}),l.React.createElement(R,{clockwise:!0,style:e,key:"rotate-cw",onClick:this._onRotateClick.bind(this,"cw"),className:void 0})])))},e}(l.CanvasControlsComponent);h.contextTypes=l.CanvasControlsComponent.contextTypes,e.a=h;var f=l.adonis.div("120drhm","CanvasControls"),d=l.adonis.div("8gacw5",{draggable:"ovipzq"},"OnCanvasControls"),m=l.adonis.div("nmw377","BottomControlsContainer"),_=l.adonis.div("1gk061a","BottomControls"),g=l.adonis.div("1v9hd4r","TransformContainer"),y=l.adonis.div("15kzu1c","ImageContainer"),v=Object(l.adonis)(g)("1kjfwvf",{visible:"zgbg08"},"OuterTransformContainer"),b=Object(l.adonis)(g)("120drhm","InnerTransformContainer"),w=l.adonis.div("15u7gri","TransformRow"),k=l.adonis.div("1q481v0","TransformCell"),C=Object(l.adonis)(k)("1qh9j3j",{top:"1mup05p",right:"12l7t8k",bottom:"1ebuiz6",left:"txqhsl"},"BorderedTransformCell"),S=Object(l.adonis)(k)("52h18o",{undraggable:"16s6vgr"},"CenterTransformCell"),O=Object(l.adonis)(k)("17b4s67","DarkTransformCell"),E=l.adonis.div("1tai30v",{top:"1stnln8",right:"1wj5vxi",bottom:"17bojqc",left:"1a9ompl"},"Dragger"),T=l.adonis.button("127b6wl","Button"),x=Object(l.adonis)(T)("120drhm",{vertical:"12fqiy2"},"FlipButton"),R=Object(l.adonis)(T)("120drhm",{clockwise:"o7ss47"},"RotateButton"),P=l.adonis.div("sbdqjz",{enabled:"ro0g1e"},"AcceptButton")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onDragStart","_onDrag"),a._width=0,a.state={value:a.props.value||0},a}return r(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._degreesPerPixel=90/217},e.prototype.componentWillReceiveProps=function(t){this.state.value!==t.value&&this.setState({value:t.value})},e.prototype._onDragStart=function(){this._initialDegrees=180*this.state.value/Math.PI},e.prototype._onDrag=function(t){var e=this._initialDegrees+t.x*this._degreesPerPixel;e=Math.min(45,Math.max(e,-45));var n=e*Math.PI/180;this.setState({value:n}),this.props.onChange&&this.props.onChange(n)},e.prototype._getValue=function(){return Math.round(180*this.state.value/Math.PI)+"°"},e.prototype._getIndicatorPosition=function(){var t=45*Math.PI/180;return this._width/2+this.state.value/t*(this._width/2)},e.prototype._getIndicatorStyles=function(){var t=45*Math.PI/180;return{left:{left:108.5+this.state.value/t*108.5},right:{right:108.5-this.state.value/t*108.5}}},e.prototype.render=function(){var t=this._getIndicatorStyles(),e={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",!0)+"')",backgroundPosition:t.left.left-4},n={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",!0)+"')",backgroundPosition:t.left.left+35};return s.React.createElement(s.DraggableComponent,{onStart:this._onDragStart,onDrag:this._onDrag},s.React.createElement(l,{className:void 0},s.React.createElement(c,{style:e},s.React.createElement(u,{style:t.left})),s.React.createElement(p,{className:void 0},this._getValue()),s.React.createElement(c,{style:n},s.React.createElement(u,{style:t.right}))))},e}(s.BaseComponent));a.contextTypes=s.BaseComponent.contextTypes,e.a=a;var l=s.adonis.div("tix0xu","Wrapper"),c=s.adonis.div("6mdana","RotationSlider"),u=s.adonis.div("nxjpo","Indicator"),p=s.adonis.div("d97kws","Value")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(2),l=(n.n(a),n(1)),c=(n.n(l),n(212)),u=n(213),p=l.GroupedControlsStyles.ControlGroupList,h=l.GroupedControlsStyles.ControlGroup,f=l.GroupedControlsStyles.ControlGroupTitle,d=a.Math.Vector2,m=function(t){function e(){var n;i(this,e);for(var s=arguments.length,a=Array(s),c=0;c<s;c++)a[c]=arguments[c];var u=r(this,t.call.apply(t,[this].concat(a)));return u._bindAll("_reapplyRatio","_onHistoryChange","_onResetDefaultClick","_onOperationRemoved","_onOperationUpdated"),u._events=(n={},o(n,l.Constants.EVENTS.TRANSFORM_REAPPLY_RATIO,u._reapplyRatio),o(n,l.Constants.EVENTS.OPERATION_REMOVED,u._onOperationRemoved),o(n,l.Constants.EVENTS.OPERATION_UPDATED,u._onOperationUpdated),o(n,l.Constants.EVENTS.HISTORY_UNDO,u._onHistoryChange),o(n,l.Constants.EVENTS.HISTORY_REDO,u._onHistoryChange),n),u._transformRatioManager=new l.TransformRatioManager(u.props.options),u.state.ratio=null,u._selectInitialRatio(!u.getSharedState("transformOperationExistedBeforeEntering")),u}return s(e,t),e.prototype.shouldSharedComponentUpdate=function(t,e){return t.ratio!==e.ratio},e.prototype._onHistoryChange=function(t){var e=this.context.editor,n={},o=e.operations.get("transform");if(o){var i=this.getSharedState("newTransformOptions"),r=this.props.controls.convertOperationOptionsToUI(o.serializeOptions());i.start=r.start,i.end=r.end,i.rotation=r.rotation,i.textureScale=r.textureScale,n.newTransformOptions=i,n.changesDone=!0,t.data&&t.data.ratio&&(n.ratio=t.data.ratio);var s={end:new d(1,1),rotation:0,start:new d(0,0),textureScale:1};e.broadcastTransform(o,s),this.setSharedState(n),e.zoom.auto(!0,!0)}},e.prototype._onOperationUpdated=function(t){var e=this.context.editor;if(this.getSharedState("transformOperation")===t){var n=this.props.controls.convertOperationOptionsToUI(t.serializeOptions());this.setSharedState({rotation:n.rotation,start:n.start,end:n.end}),e.zoom.auto(!0,!0)}},e.prototype._onOperationRemoved=function(t){var e=this.context.editor;if(this.getSharedState("transformOperation")===t){var n=e.operations.getOrCreate("transform",{enabled:!1}),o=e.getSDK();o.setRotation(0),o.setSpriteScale(1),this.setSharedState({transformOperation:n,rotation:0,initialTransformOptions:n.serializeOptions(),transformOperationExistedBeforeEntering:!1}),n._ratio=null,this._selectInitialRatio(!0,!0)}if(this.getSharedState("orientationOperation")===t){var i=e.operations.getOrCreate("orientation");this.setSharedState({orientationOperation:i,rotation:0,flipVertically:!1,flipHorizontally:!1})}},e.prototype._onResetDefaultClick=function(){var t=this.context.editor,e=this.getSharedState("orientationOperation"),n=e.getRotation();e.set({flipHorizontally:!1,flipVertically:!1,rotation:0}),t.broadcastRotate(-n);var o=this.getSharedState("newTransformOptions");o.start=new d(0,0),o.end=new d(1,1),o.rotation=0,this.setSharedState({ratio:null,start:new d(0,0),end:new d(1,1),orientationRotation:0,rotation:0,flipVertically:!1,flipHorizontally:!1,changesDone:!0}),this._emitEvent(l.Constants.EVENTS.TRANSFORM_RESIZE),t.setRotation(0),t.setSpriteScale(1),t.zoom.auto(!0,!0)},e.prototype._reapplyRatio=function(){var t=this.getSharedState("ratio");this._selectRatio(t)},e.prototype._selectRatio=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.getSharedState("transformOperation");e&&t&&this._setDefaultOptionsForRatio(t,n),o._ratio=t,this.setSharedState({ratio:t},n),n&&this.setSharedState({changesDone:!0}),this._emitEvent(l.Constants.EVENTS.TRANSFORM_RESIZE)},e.prototype._setDefaultOptionsForRatio=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t||{},o=n.ratio,i=n.dimensions,r=new d,s=new d;i&&!o&&(o=i.x/i.y);var a=o&&l.Utils.findIntegerFraction(o);if(o&&"*"!==o){var c=this.getSharedState("transformOperation"),u=c.getInputDimensions(!1),p=u.x/u.y,h=void 0,f=void 0;if(p<=o){var m=Math.floor(u.x/a.x)*a.y;f=Math.floor(Math.min(m,u.y)/a.y)*a.y,h=f*o,r.set((u.x-h)/2,(u.y-f)/2).floor()}else{var _=Math.floor(u.y/a.y)*a.x;h=Math.floor(Math.min(_,u.x)/a.x)*a.x,f=h/o,r.set((u.x-h)/2,(u.y-f)/2).floor()}s.copy(r).add(h,f),r.divide(u),s.divide(u)}else r=new d(0,0),s=new d(1,1);var g=this.getSharedState("newTransformOptions");g.start=r,g.end=s,this.setSharedState({start:r,end:s},e)},e.prototype._selectInitialRatio=function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.getSharedState("transformOperation"),i=null,r=this._transformRatioManager.getCategories(),s=r.map(function(e){return t._transformRatioManager.getRatiosForCategory(e)}).reduce(function(t,e){return t.concat(e)}),a=o._ratio;if(a){i=s.filter(function(t){return t===a})[0]}if(!i){i=s.filter(function(t){return t.selected}).pop()}return i||(i=s[0],"*"!==i.ratio&&this.setSharedState({changesDone:!0})),this._selectRatio(i,e,n)},e.prototype._renderSections=function(){var t=this,e=function(e){return l.React.createElement(y,{key:e.identifier},l.React.createElement(v,null,t._t("editor.controls.transform.ratios."+e.identifier+".name")||e.defaultName),l.React.createElement(b,null,n(e)))},n=function(e){return t._transformRatioManager.getRatiosForCategory(e).map(function(n){var o=t.getSharedState("ratio")===n;return l.React.createElement(c.a,{key:n.identifier,defaultIconPath:"editor/controls/transform/ratios/"+n.identifier+"-default.png",hoverIconPath:"editor/controls/transform/ratios/"+n.identifier+"-hover.png",activeIconPath:"editor/controls/transform/ratios/"+n.identifier+"-active.png",onClick:t._selectRatio.bind(t,n),title:t._t("editor.controls.transform.ratios."+e.identifier+".ratios."+n.identifier)||n.defaultName,identifier:n.identifier,selected:o})})};return this._transformRatioManager.getCategories().map(function(n){return t._transformRatioManager.getRatiosForCategory(n).length>0?e(n):null})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this,e=this.context.options,n=e.editor.forceCrop,o=this.getSharedState("ratio");return[l.React.createElement(l.ScrollableListComponent,{key:"list",direction:"vertical",innerRef:function(e){t._scrollbar=e}},l.React.createElement(g,null,l.React.createElement(_,null,l.React.createElement(l.ButtonComponent,{disabled:n,title:this._t("editor.controls.transform.reset"),className:void 0,onClick:this._onResetDefaultClick})),this._renderSections())),l.React.createElement(u.a,{key:"transformDimensions",controls:this.props.controls,disabled:!o||!!o.dimensions})]},e}(l.ControlsComponent);m.contextTypes=l.ControlsComponent.contextTypes,m.RootElement=l.ControlsComponent.RootElement,e.a=m;var _=l.adonis.li("7abnmv","SectionListHeader"),g=Object(l.adonis)(p).ul("x32ss4","SectionList"),y=Object(l.adonis)(h).li("ber9o0","Section"),v=Object(l.adonis)(f).div("15ebqhq","SectionTitle"),b=l.adonis.ul("1klgjyq","SectionGrid")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),s.ControlsStyles.PlainControlItem),l=function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r)));return a.state={hovered:!1},a}return r(e,t),e.prototype.render=function(){var t=this,e={backgroundImage:"url('"+this._getAssetPath(this.props.defaultIconPath,!0)+"')"},n={backgroundImage:"url('"+this._getAssetPath(this.props.hoverIconPath,!0)+"')"},o={backgroundImage:"url('"+this._getAssetPath(this.props.activeIconPath,!0)+"')"},i=this.props,r=i.selected,a=i.onClick,l=i.identifier,h=i.title,f=this.state.hovered;return s.React.createElement(c,{selected:r,onClick:a,"data-identifier":l,"data-selected":r,onMouseEnter:function(){return t.setState({hovered:!0})},onMouseLeave:function(){return t.setState({hovered:!1})},className:void 0},s.React.createElement(s.Transition,{active:!r},s.React.createElement(u,{style:e})),s.React.createElement(s.Transition,{active:!r&&f},s.React.createElement(u,{style:n})),s.React.createElement(s.Transition,{active:r},s.React.createElement(u,{style:o})),s.React.createElement(p,{selected:r},h))},e}(s.BaseComponent);l.contextTypes=s.BaseComponent.contextTypes,e.a=l;var c=Object(s.adonis)(a).li("71xi0n","TransformListItem"),u=s.adonis.div("u0ryhr",{rendered:"2jlos",visible:"82svov"},"Icon"),p=s.adonis.div("jpjwq7",{selected:"zgbg08"},"Title")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),a=(n.n(s),n(1)),l=(n.n(a),function(t){function e(){o(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(r))),l=a._getTransformDimensions();return a.state={dimensions:l,x:l.x,y:l.y},a}return r(e,t),e.prototype.shouldSharedComponentUpdate=function(t,e){return!t.start.equals(e.start)||!t.end.equals(e.end)||t.ratio!==e.ratio},e.prototype.sharedComponentWillUpdate=function(t,e){if(e.transformOperation){var n=this._getTransformDimensions(),o=n.x,i=n.y;this.state.dimensions=n,this.state.x=o,this.state.y=i}},e.prototype._onInputLiveChange=function(t,e){var n=e.target.value;n.length&&!n.match(/\d+?/i)||(this.state[t]=n&&parseInt(n,10)||"",this.forceUpdate())},e.prototype._onInputChange=function(t,e){var n=this.state[t]||0,o=this.getSharedState("transformOperation"),i=o.getInputDimensions(!1),r=this.getSharedState("ratio"),l=r.ratio,c=this.getSharedState("start"),u=this.getSharedState("end"),p=u.clone().subtract(c),h=p.clone().multiply(i);if(h[t]=Math.min(i[t],n),"*"!==l){var f=a.Utils.findIntegerFraction(l);h[t]=Math.max(1,Math.round(h[t]/f[t]))*f[t],"x"===t?h.y=h.x/l:h.x=h.y*l}var d=h.clone();(h.x>i.x||h.y>i.y)&&(d=s.Utils.resizeVectorToFit(h,i));var m=this._getTransformDimensions(),_=m.x,g=m.y;this.state.dimensions=m,this.state.x=_,this.state.y=g,this._resizeTransformTo(d),this.forceUpdate()},e.prototype._getTransformDimensions=function(){var t=this.getSharedState("transformOperation"),e=this.getSharedState("ratio")||{ratio:"*"},n=void 0;if(e.dimensions)n=e.dimensions.clone();else{var o=t.getInputDimensions(!1),i=this.getSharedState("start");n=this.getSharedState("end").clone().subtract(i).multiply(o).round()}return n},e.prototype._resizeTransformTo=function(t){var e=this.getSharedState("transformOperation"),n=e.getInputDimensions(!1),o=this.getSharedState("start").clone(),i=this.getSharedState("end").clone(),r=t.divide(n);i.copy(o).add(r),i.x>1&&(o.x-=i.x-1,i.x=1),i.y>1&&(o.y-=i.y-1,i.y=1);var s=this.props.controls,l=s.fixTransform(o,i,"right","bottom"),c=l.start,u=l.end,p=this.getSharedState("newTransformOptions");p.start=c,p.end=u,this.setSharedState({start:c,end:u}),this._emitEvent(a.Constants.EVENTS.TRANSFORM_RESIZE)},e.prototype.render=function(){return a.React.createElement(p,{className:void 0},a.React.createElement(h,null,a.React.createElement(f,null,a.React.createElement(d,null,a.React.createElement(c,{suffix:this._t("editor.controls.transform.dimensions.width"),name:"width",disabled:this.props.disabled,value:this.state.x,onLiveChange:this._onInputLiveChange.bind(this,"x"),onChange:this._onInputChange.bind(this,"x")})),a.React.createElement(m,null,a.React.createElement(u,{src:this._getAssetPath("editor/controls/transform/dimensions-cross.png",!0)})),a.React.createElement(d,null,a.React.createElement(c,{suffix:this._t("editor.controls.transform.dimensions.height"),name:"height",disabled:this.props.disabled,value:this.state.y,onLiveChange:this._onInputLiveChange.bind(this,"y"),onChange:this._onInputChange.bind(this,"y")}))),a.React.createElement(a.Transition,{active:this.props.disabled,enterProp:"rendered",enterDuration:300,appearProp:"visible",appearDuration:300,leaveDuration:300},a.React.createElement(_,{className:void 0},a.React.createElement(g,{src:this._getAssetPath("editor/controls/transform/lock.png",!0)})))))},e}(a.SharedStateComponent));l.contextTypes=a.SharedStateComponent.contextTypes,e.a=l;var c=Object(a.adonis)(a.SuffixedTextInputComponent)("2jlos","DimensionInput"),u=a.adonis.img("1dew3s1","Cross"),p=a.adonis.div("1yz821h","TransformDimensions"),h=a.adonis.div("1dg9k0o","TransformDimensionsWrapper"),f=a.adonis.div("wlk9p6","Table"),d=a.adonis.div("1q481v0","Cell"),m=Object(a.adonis)(d)("13lk3i9","CrossCell"),_=a.adonis.div("943mx5",{rendered:"2jlos",visible:"rval4i"},"LockOverlay"),g=a.adonis.img("1hp46pm","Lock")}])});